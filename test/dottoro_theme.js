window.Dottoro=window.Dottoro||{};Dottoro.LIBPATH=window.Dottoro_LibPath||"";Dottoro.BROWSER_IE=1;Dottoro.BROWSER_FF=2;Dottoro.BROWSER_OP=4;Dottoro.BROWSER_SA=8;Dottoro.BROWSER_ALL=15;Dottoro.CSS_SIDES=["top","right","bottom","left"];Dottoro.BOX_INNER=1;Dottoro.BOX_PADDING=2;Dottoro.BOX_SCROLLBAR=3;Dottoro.BOX_BORDER=4;Dottoro.BOX_MARGIN=5;Dottoro.TOPWINDOW=window;
(function(){var a=navigator.userAgent.toLowerCase(),b=-1<a.indexOf("msie"),c=-1<a.indexOf("trident/");Dottoro.isIE=b||c;Dottoro.isFF=-1<a.indexOf("firefox");Dottoro.isOP=-1<a.indexOf("opera");Dottoro.isOPMini=-1<a.indexOf("opera mini");Dottoro.isWK=-1<a.indexOf("webkit");Dottoro.isIPhone=-1<a.indexOf("iphone");Dottoro.isIPad=-1<a.indexOf("ipad");Dottoro.isIPod=-1<a.indexOf("ipod");Dottoro.isIE&&(a=(b?/msie ([\w.]+)/:/rv:([\w.]+)/).exec(a))&&(a=parseInt(a[1]),Dottoro["isIE"+a]=!0,Dottoro.ieVersion=
a)})();Dottoro.isIEOlder=function(a){return Dottoro.isIE&&Dottoro.ieVersion<a};Dottoro.HTML5Tags="abbr article aside audio bdi canvas command data datalist details figcaption figure footer header hgroup mark meter nav output progress rp section summary time track video".split(" ");Dottoro.isIEOlder(9)&&function(){for(var a=Dottoro.HTML5Tags.length,b=0;b<a;b++)document.createElement(Dottoro.HTML5Tags[b])}();
(function(){var a=null,b=null;Dottoro.SupportTouchPoints=function(){null==a&&(a=window.PointerEvent&&(navigator.maxTouchPoints||navigator.msMaxTouchPoints));return a};Dottoro.SupportTouch=function(){null==b&&(b="ontouchstart"in window||Dottoro.SupportTouchPoints());return b}})();
Dottoro.ViewPortScaleFix=function(){if((Dottoro.isIPhone||Dottoro.isIPad||Dottoro.isIPod)&&!Dottoro.isOPMini){var a=document.querySelector&&document.querySelector('meta[name="viewport"]');a&&(a.content="width=device-width, minimum-scale=1.0, maximum-scale=1.0",document.addEventListener("gesturestart",function(){a.content="width=device-width, minimum-scale=0.25, maximum-scale=1.6"},!1))}};
Dottoro.Prompt=function(a,b,c){return Dottoro.isIEOlder(9)?showModalDialog(c?c:Dottoro.LIBPATH+"htm/prompt.htm",{message:a,defValue:b?b:"",dottoroPath:Dottoro.LIBPATH},"center: yes; dialogWidth:356px; dialogHeight:100px; resizable: no; scroll: no; status: no"):prompt(a,b)};Dottoro.Modulo=function(a,b){return(a%b+b)%b};Dottoro.TypeOf=function(a){var b=typeof a;return"object"===b?"[object Array]"===Object.prototype.toString.call(a)?"array":"object":b};Dottoro.IsNumber=function(a){return"number"===typeof a};
Dottoro.IsString=function(a){return"string"===typeof a};Dottoro.IsObject=function(a){return"object"===typeof a||"function"===typeof a};Dottoro.IsArray=function(a){return"array"===Dottoro.TypeOf(a)};Dottoro.IsObjEmpty=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0};Dottoro.CallUserFunc=function(a,b){if(a)return void 0===b?b=[]:Dottoro.IsArray(b)||(b=[b]),Dottoro.IsArray(a)?a[0][a[1]].apply(a[0],b):a.apply(null,b)};Dottoro.reWSStr="\\s\\xa0\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u200b\\u2028\\u2029\\u3000";
Dottoro.reWS=new RegExp("["+Dottoro.reWSStr+"]");Dottoro.reNonWS=new RegExp("[^"+Dottoro.reWSStr+"]");Dottoro.reTrim=new RegExp("^["+Dottoro.reWSStr+"]+|["+Dottoro.reWSStr+"]+$","g");Dottoro.FirstWS=function(a,b,c){b||(b=0);null==c&&(c=a.length);a=a.substring(b,c);return b+a.search(Dottoro.reWS)};Dottoro.FirstNonWS=function(a,b,c){b||(b=0);null==c&&(c=a.length);a=a.substring(b,c);return b+a.search(Dottoro.reNonWS)};Dottoro.Trim=function(a){return a.replace(Dottoro.reTrim,"")};
Dottoro.Escape=function(a){a=a.replace(/\\/g,"\\\\");a=a.replace(/'/g,"\\'");return a=a.replace(/"/g,'\\"')};Dottoro.Unescape=function(a){a=a.replace(/\\'/g,"'");a=a.replace(/\\"/g,'"');return a=a.replace(/\\\\/g,"\\")};Dottoro.EscHtml=function(a){a=a.replace(/&/g,"&amp;");a=a.replace(/</g,"&lt;");return a=a.replace(/>/g,"&gt;")};Dottoro.JSONDecode=function(a,b){try{a=Dottoro.Trim(a);var c=!b&&window.JSON&&window.JSON.parse?window.JSON.parse(a):(new Function("return "+a))()}catch(d){return}return c};
Dottoro.JSONEncode=function(a){var b="";if(window.JSON&&window.JSON.stringify)try{b=window.JSON.stringify(a)}catch(c){}else if(Dottoro.IsObject(a))if(Dottoro.IsArray(a)){for(var b=b+"[",d=0;d<a.length;d++)0<d&&(b+=","),b+=Dottoro.JSONEncode(a[d]);b+="]"}else if(null===a)b+="null";else{var b=b+"{",e=!0;for(d in a)a.hasOwnProperty(d)&&(e||(b+=","),e=!1,b+=Dottoro.JSONEncode(d)+":"+Dottoro.JSONEncode(a[d]));b+="}"}else Dottoro.IsString(a)?(a=a.replace(/\\/g,"\\\\"),a=a.replace(/\r/g,"\\r"),a=a.replace(/\n/g,
"\\n"),a=a.replace(/\t/g,"\\t"),a=a.replace(/"/g,'\\"'),b+='"'+a+'"'):b+=a;return b};Dottoro.Clone=function(a,b){if(!a)return a;var c=a;if(Dottoro.IsArray(a))for(var c=[],d=a.length,e=0;e<d;e++)c[e]=b?a[e]:Dottoro.Clone(a[e]);else if("object"===typeof a)for(e in c={},a)a.hasOwnProperty(e)&&(c[e]=b?a[e]:Dottoro.Clone(a[e]));return c};
Dottoro.Extend=function(a,b,c){c=c||{};var d=null==c.deep?!0:c.deep,e=null==c.override?!0:c.override;if(!a||"object"!==Dottoro.TypeOf(a))return b;if(b&&"object"===typeof b)for(var f in b)b.hasOwnProperty(f)&&(d&&a[f]&&"object"==Dottoro.TypeOf(a[f])&&"object"==Dottoro.TypeOf(b[f])?Dottoro.Extend(a[f],b[f],c):!e&&f in a||(a[f]=b[f]));return a};Dottoro.FindInArray=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1};
Dottoro.InArray=function(a,b){return 0<=Dottoro.FindInArray(a,b)};Dottoro.SortArray=function(a,b){var c=[],d;for(d in a)c.push(d);for(d=0;d<c.length;d++){for(var e=d,f=d+1;f<c.length;f++)b?a[c[f]]<a[c[e]]&&(e=f):a[c[f]]>a[c[e]]&&(e=f);e>d&&(f=c[d],c[d]=c[e],c[e]=f)}return c};Dottoro.Split=function(a,b,c){null==b&&(b=",");null==c&&(c=!0);a=a.split(b);if(!c)return a;c=a.length;b=[];for(var d=0;d<c;d++)b.push(Dottoro.Trim(a[d]));return b};
(function(){function a(a){return 10>a?"0"+a:""+a}Dottoro.GetLocalTime=function(b,c,d,e){var f=new Date;if(Dottoro.IsString(b)){var g=b.match(/^(\d\d\d\d)-(\d\d)-(\d\d)\s(\d\d):(\d\d):(\d\d)$/);g&&(f.setUTCFullYear(Number(g[1]),Number(g[2])-1,Number(g[3])),f.setUTCHours(Number(g[4]),Number(g[5]),Number(g[6])))}else f.setTime(b);var g=f.getFullYear(),h=a(f.getMonth()+1),k=a(f.getDate()),l=a(f.getHours()),m=a(f.getMinutes()),f=a(f.getSeconds());c||(c="date");switch(c){case "date":b=g+"-"+h+"-"+k;break;
case "time":b=l+":"+m+":"+f;break;case "datetime":b=g+"-"+h+"-"+k+" "+l+":"+m+":"+f}d&&(e||(e=document),e.write(b));return b}})();
(function(){function a(b,d,e,f){if(Dottoro.IsString(e)){if(f||!b[d])b[d]=e;return!0}if(Dottoro.IsObject(e)){Dottoro.IsObject(b[d])||(b[d]={});for(var g in e)a(b[d],g,e[g],f);return!0}return!1}var b={};window.Dottoro_I18N&&Dottoro.IsObject(window.Dottoro_I18N)&&(b=window.Dottoro_I18N);Dottoro.Sprintf=function(a){for(var b=a.length,e=!1,f=[],g=0,h=0;h<b;h++){var k=a.charCodeAt(h);e?(49<=k&&57>=k&&(f.push(a.substr(g,h-g-1)),e=k-48,f.push(e<arguments.length?""+arguments[e]:""),g=h+1),37==k&&(f.push(a.substr(g,
h-g)),g=h+1),e=!1):e=37==k}g<b&&f.push(a.substr(g,b-g));return f.join("")};Dottoro.GetText=function(a){if(!a)return b;a=a.split(".");for(var d=b,e=0;e<a.length;e++){var f=a[e];if(!(Dottoro.IsObject(d)&&f in d))return"";d=d[f]}return d};Dottoro.GetTextF=function(a){var b=Dottoro.GetText(a);if(b&&1<arguments.length){for(var b=[b],e=1;e<arguments.length;e++)b.push(arguments[e]);return Dottoro.Sprintf.apply(null,b)}return b};Dottoro.SetText=function(c,d,e){if(!c){if(Dottoro.IsObject(d)){for(var f in d)a(b,
f,d[f],e);return!0}return!1}c=c.split(".");var g=b;for(f=0;f<c.length-1;f++){var h=c[f];if(!h)return!1;Dottoro.IsObject(g)||(g={});h in g||(g[h]={});g=g[h]}return a(g,c[c.length-1],d,e)};Dottoro.SetText("",{OK:"OK",Cancel:"Cancel",Close:"Close",Help:"Help",Fullscreen:"Fullscreen"})})();
(function(){function a(a,c,d,e){if(!a.dottoro)if(e)a.dottoro={};else return;a=a.dottoro;d=d?"internal":"user";if(!a[d])if(e)a[d]={};else return;a=a[d];c=c.split("/");d=c.length-1;for(var f=0;f<d;f++){var g=c[f];if(!(g in a))if(e)a[g]={};else return;a=a[g]}return{obj:a,prop:c[d]}}Dottoro.SetData=function(b,c,d,e){b=a(b,c,e.internal,!0);b.obj[b.prop]=d;return b.obj[b.prop]};Dottoro.HasData=function(b,c,d){return(b=a(b,c,d.internal,!1))&&b.prop in b.obj};Dottoro.GetData=function(b,c,d){if((b=a(b,c,d.internal,
"def"in d))&&b.prop in b.obj)return b.obj[b.prop];if("def"in d)return b.obj[b.prop]=d.def,b.obj[b.prop]};Dottoro.RemoveData=function(b,c,d){if((b=a(b,c,d.internal,!1))&&b.prop in b.obj)return c=b.obj[b.prop],delete b.obj[b.prop],c};Dottoro._setData=function(a,c,d,e){return Dottoro.SetData(a,c,d,Dottoro.Extend({internal:!0},e))};Dottoro._hasData=function(a,c,d){return Dottoro.HasData(a,c,Dottoro.Extend({internal:!0},d))};Dottoro._getData=function(a,c,d){return Dottoro.GetData(a,c,Dottoro.Extend({internal:!0},
d))};Dottoro._removeData=function(a,c,d){return Dottoro.RemoveData(a,c,Dottoro.Extend({internal:!0},d))};Dottoro._removeAllData=function(a,c){a.dottoro&&delete a.dottoro;if(c)for(var d=a.firstChild;d;)Dottoro._removeAllData(d,!0),d=d.nextSibling}})();
(function(){var a=null,b=3E5,c=0;Dottoro.SetOverlapZIndex=function(c){b=c;a&&(a.style.zIndex=""+b)};Dottoro.CreateOverlap=function(){a||(a=Dottoro.CreateElement("div",Dottoro.TOPWINDOW.document.body,null,{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px",zIndex:b}),Dottoro.isIEOlder(11)&&"opacity"in a.style&&(a.style.backgroundColor="black",a.style.opacity="0"));c++;return a};Dottoro.RemoveOverlap=function(){0<c&&(c--,0==c&&(Dottoro.RemoveNode(a),a=null))}})();
Dottoro.ForceRedraw=function(a){a=a||document;if(Dottoro.isWK){var b=a.createElement("div");b.id="dottoro_forceRedraw";a.body.appendChild(b);a.body.removeChild(b)}};
(function(){function a(a,b,c){if(!c)return!0;var d=!1,e=[],m;for(m in c)e.push(Number(m));e.sort(function(a,b){return a-b});for(m=0;m<e.length;m++){var p=""+e[m],n;for(n in c[p]){var q=[a,b].concat(c[p][n].args);!1===Dottoro.CallUserFunc(c[p][n].handler,q)&&(d=!0)}}return!d}Dottoro.CAPTURE_NO=0;Dottoro.CAPTURE_ELEM=1;Dottoro.CAPTURE_WINDOW=2;Dottoro.CAPTURE_ALLWINDOW=3;var b=1,c={mouseenter:"mouseover",mouseleave:"mouseout"},d={mouseover:"mouseenter",mouseout:"mouseleave"},e=null;Dottoro.AddListener=
function(f,g,h,k){k||(k=Dottoro.CAPTURE_NO);if(Dottoro.IsObject(k))var l="capture"in k?k.capture:Dottoro.CAPTURE_NO,m="priority"in k?k.priority:10;else l=k,m=10;l!=Dottoro.CAPTURE_ELEM&&l!=Dottoro.CAPTURE_WINDOW&&l!=Dottoro.CAPTURE_ALLWINDOW&&(l=Dottoro.CAPTURE_NO);if(!h.addEventListener&&!h.attachEvent)return null;for(var p=[],n=4;n<arguments.length;n++)p.push(arguments[n]);if(l==Dottoro.CAPTURE_NO){var q=Dottoro._getData(h,"listeners",{def:{}}),r=Dottoro._getData(h,"handler",{def:function(b){a:{if(Dottoro.isIEOlder(9)&&
"resize"==b.type&&h==window){var c={w:Dottoro.GetClientWinWidth(),h:Dottoro.GetClientWinHeight()},f=e;e=c;if(f&&f.w==c.w&&f.h==c.h){b=void 0;break a}}c=!1;if(f=Dottoro._getData(h,"listeners")){if("mouseover"==b.type||"mouseout"==b.type){var g=f[d[b.type]];if(g){var k="relatedTarget"in b?b.relatedTarget:b.srcElement==b.fromElement?b.toElement:b.fromElement;k&&Dottoro.IsAncestorOf(h,k)||!1===a(b,h,g)&&(c=!0)}}g=f[b.type];!1===a(b,h,g)&&(c=!0)}b=c?!1:void 0}return b}}),t=[],s=Dottoro.IsArray(f)?f:[f],
n=0;for(;n<s.length;n++){var u=s[n],v=u in c?c[u]:u;u in q||(v in q||(h.addEventListener?h.addEventListener(v,r,!1):h.attachEvent("on"+v,r)),q[u]={});var v=q[u],x=""+m;x in v||(v[x]={});var z=""+b++;v[x][z]={handler:g,args:p};t.push({type:u,id:z})}return{ids:t,elem:h,capture:l,priority:m}}m=function(a){a=[a,h].concat(p);return Dottoro.CallUserFunc(g,a)};n=h;if(h.addEventListener)switch(l){case Dottoro.CAPTURE_ELEM:h.addEventListener(f,m,!0);break;case Dottoro.CAPTURE_WINDOW:n=Dottoro.GetWinFromDoc(h.ownerDocument);
if(!n)return!1;n.addEventListener(f,m,!0);break;case Dottoro.CAPTURE_ALLWINDOW:n=Dottoro.CreateOverlap();n=Dottoro.GetWinFromDoc(n.ownerDocument);q=[n];Dottoro.GetChildFrameWindows(h,q);r=Dottoro.GetWinFromDoc(h.ownerDocument);n!=r&&q.push(r);r=[];for(n=0;n<q.length;n++)try{q[n].addEventListener(f,m,!0),r.push({type:f,elem:q[n],capture:l,handler:m})}catch(y){}return r}else h.attachEvent("on"+f,m);return{type:f,elem:n,capture:l,handler:m}};Dottoro.AddTouchListener=function(a,b,c,d){var e={start:"touchstart",
end:"touchend",cancel:"touchcancel"};Dottoro.SupportTouchPoints()&&(window.navigator.pointerEnabled?e={start:"pointerdown",end:"pointerup",cancel:"pointercancel"}:window.navigator.msPointerEnabled&&(e={start:"MSPointerDown",end:"MSPointerUp",cancel:"MSPointerCancel"}));return a in e?Dottoro.AddListener(e[a],b,c,d):null};Dottoro.RemoveListener=function(a){if(!a||!Dottoro.IsObject(a))return!1;if(Dottoro.IsArray(a)){for(var b=!0,d=0;d<a.length;d++)Dottoro.RemoveListener(a[d])||(b=!1);return b}b=a.elem;
d=a.capture;if(!b.removeEventListener&&!b.detachEvent)return!1;if(d==Dottoro.CAPTURE_NO){var e=Dottoro._getData(b,"listeners"),l=Dottoro._getData(b,"handler"),m=""+a.priority;if(e)for(d=0;d<a.ids.length;d++){var p=a.ids[d].type,n=a.ids[d].id;p in e&&(m in e[p]&&(n in e[p][m]&&delete e[p][m][n],Dottoro.IsObjEmpty(e[p][m])&&delete e[p][m]),Dottoro.IsObjEmpty(e[p])&&(l&&(n=p in c?c[p]:p,Dottoro.IsObjEmpty(e[n])&&(b.removeEventListener?b.removeEventListener(n,l,!1):b.detachEvent("on"+n,l))),delete e[p],
Dottoro.IsObjEmpty(e)&&(Dottoro._removeData(b,"handler"),l=null)))}return!0}p=a.type;a=a.handler;b.removeEventListener?(b.removeEventListener(p,a,!0),d==Dottoro.CAPTURE_ALLWINDOW&&b==Dottoro.TOPWINDOW&&Dottoro.RemoveOverlap()):b.detachEvent("on"+p,a);return!0};Dottoro.StopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0};Dottoro.PreventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;return!1};Dottoro.CancelEvent=function(a){Dottoro.StopPropagation(a);
return Dottoro.PreventDefault(a)}})();(function(){var a=[];Dottoro.Ready=function(b){a.push(b)};Dottoro.CallReadyHandlers=function(){for(var b=0;b<a.length;b++)Dottoro.CallUserFunc(a[b])}})();
(function(){var a={},b=-1;Dottoro.ContentReady=function(b,d){null==d&&(d=10);var e=""+d;e in a||(a[e]={idx:0});var f=""+a[e].idx++;a[e][f]=b;return{key:e,id:f}};Dottoro.CallContentReadyHandlers=function(c,d){c||(c=document);d=d||"all";var e=[];if("zero"==d)"0"in a&&e.push(0);else{for(var f in a)("all"==d||"nonzero"==d&&"0"!=f)&&e.push(Number(f));e.sort(function(a,b){return a-b})}b++;for(var g=[],h=0;h<e.length;h++){f=""+e[h];for(var k in a[f])if("idx"!=k){var l=Dottoro.CallUserFunc(a[f][k],[c,""+
b]);l&&(Dottoro.IsArray(l)?g=g.concat(l):g.push(l))}}for(h=0;h<g.length;h++)Dottoro.CallUserFunc(g[h]);b--};Dottoro.RemoveContentReadyHandler=function(b){var d=b.key;b=b.id;d&&b&&"idx"!=b&&a[d]&&a[d][b]&&delete a[d][b]}})();
(function(){var a=0;Dottoro.ContentRemoved=function(b,c){var d=Dottoro._getData(b,"contentRemovedHandlers",{def:{}}),e=""+a++;d[e]=c;return e};Dottoro.CallContentRemovedHandlers=function(a){if(a){for(var c=a.lastChild;c;)Dottoro.CallContentRemovedHandlers(c),c=c.previousSibling;if(c=Dottoro._getData(a,"contentRemovedHandlers")){for(var d in c)Dottoro.CallUserFunc(c[d],a);Dottoro._removeData(a,"contentRemovedHandlers")}}};Dottoro.RemoveContentRemovedHandler=function(a,c){var d=Dottoro._getData(a,"contentRemovedHandlers");
d&&c in d&&delete d[c]}})();(function(){var a={};Dottoro.RegisterTagParser=function(b,c){b in a||(a[b]=[]);a[b].push(c)};Dottoro.ContentReady(function(b,c){for(var d=b.getElementsByTagName("a"),e=d.length,f=[],g=0;g<e;g++)f.push(d[g]);for(g=0;g<e;g++){var d=f[g],h=d.getAttribute("data-dottoro_name");if(h&&h in a)for(var h=a[h],k=0;k<h.length;k++)Dottoro.CallUserFunc(h[k],[d,b,c])}})})();
(function(){var a=[];Dottoro.Leave=function(b){a.push(b)};Dottoro.CallLeaveHandlers=function(b){for(var c=!1,d=0;d<a.length;d++)!1===Dottoro.CallUserFunc(a[d],b)&&(c=!0);return!c};Dottoro.OpenWindow=function(a,c,d,e){var f=!0;if(c)switch(c){case "_blank":f=!1;break;case "_self":f=!0;break;case "_parent":case "_top":f=window.parent===window;break;default:f=c==window.name}return f&&!Dottoro.CallLeaveHandlers(a)?!1:window.open(a,c,d,e)}})();
(function(){var a=!1,b=/xyz/.test(function(){var xyz;})?/\b_super\b/:/.*/;Dottoro.Class=function(){};Dottoro.Class.extend=function(c){var d=this.prototype;a=!0;var e=new this;a=!1;for(var f in c)c.hasOwnProperty(f)&&(e[f]="function"==typeof c[f]&&"function"==typeof d[f]&&b.test(c[f])?function(a,b){return function(){var c=this._super;this._super=d[a];var e=b.apply(this,arguments);this._super=c;return e}}(f,c[f]):c[f]);f=function(){!a&&this.init&&this.init.apply(this,arguments)};f.prototype=e;f.constructor=
f;f.extend=arguments.callee;return f}})();
Dottoro.ClassEvents=Dottoro.Class.extend({init:function(){this.handlerID=0;this.userEventHandlersByID={};this.userEventHandlersByType={};this.i18n={}},FireEvent:function(a){if(Dottoro.IsArray(a)){var b=a;a=b[0]}else for(var b=[a,this],c=1;c<arguments.length;c++)b.push(arguments[c]);c=!1;if(this.userEventHandlersByType[a])for(var d in this.userEventHandlersByType[a])this.userEventHandlersByType[a].hasOwnProperty(d)&&!1===Dottoro.CallUserFunc(this.userEventHandlersByType[a][d].listener,b)&&(c=!0);return c},
AddListener:function(a,b){var c={name:a,listener:b};this.userEventHandlersByType[a]||(this.userEventHandlersByType[a]={});this.handlerID++;this.userEventHandlersByID[""+this.handlerID]=c;this.userEventHandlersByType[a][""+this.handlerID]=c;return this.handlerID},RemoveListener:function(a){Dottoro.IsArray(a)||(a=[a]);for(var b=0;b<a.length;b++){var c=""+a[b];if(this.userEventHandlersByID[c]){var d=this.userEventHandlersByID[c].name;delete this.userEventHandlersByID[c];this.userEventHandlersByType[d]&&
delete this.userEventHandlersByType[d][c]}}},Detach:function(){this.userEventHandlersByID={};this.userEventHandlersByType={}}});
Dottoro.ClassEventsSettings=Dottoro.ClassEvents.extend({init:function(){this._super();this.settings={};this.settingsProp={}},ReadSettings:function(a){a&&(a=Dottoro.SplitSettings(a),this.SetSettings(a))},SetSettings:function(a){if(a)for(var b in a)a.hasOwnProperty(b)&&this.SetSetting(b,a[b])},SetSetting:function(a,b){Dottoro.SetSetting(this.settings,a,b,this.settingsProp)},GetSetting:function(a){return this.settings[a.toLowerCase()]},Detach:function(){delete this.settings;delete this.settingsProp;
this._super()}});Dottoro.GetAssignedObject=function(a,b){var c=b.prototype?b.prototype.classID:"";return c?a?Dottoro._getData(a,c+"/obj"):null:null};Dottoro.GetHolderObject=function(a,b){for(;a;){var c=Dottoro.GetAssignedObject(a,b);if(c)return c;a=a.parentNode}return null};Dottoro.Now=function(){return(new Date).getTime()};
(function(){function a(){null==q&&(q=Dottoro.Now(),setTimeout(b,0));return q}function b(){q=null}function c(a,b){var c=t[a];if(!c.paused){if(0<c.duration){if(c.back){var d=b-c.back.start;if(0>d)return;d=Math.max(0,c.back.duration-d)}else if(c.fore){d=b-c.fore.start;if(0>d)return;d=c.duration-Math.max(0,c.fore.duration-d)}else{d=b-c.start;if(0>d)return;d=Math.min(d,c.duration)}d/=c.duration}else if(d=b-c.start,0>d)return;var e=c.once&&!h(c,d)?!0:Dottoro.CallUserFunc(c.func,(c.noDefArgs?[]:[d,a]).concat(c.args));
if(!1===e||h(c,d))if(!1!==e&&0<c.duration&&c.autoback)g(a);else return!1}}function d(a){null!=a&&(r=null,e());0<s&&!r&&(r=l(d))}function e(b){var d=a(),e=[];if(b)b in t&&!1===c(b,d)&&e.push(b);else for(b in t)!1===c(b,d)&&e.push(b);b=e.length;for(d=0;d<b;d++)f(e[d])}function f(a,b){if(a&&a in t){var c=t[a];null==b&&(b=c.silentRemove);if(!(b||(Dottoro.CallUserFunc(c.func,(c.noDefArgs?[]:[-1,a]).concat(c.args)),a in t)))return!1;delete t[a];s--;0==s&&(m(r),r=null);return!0}return!1}function g(b){var c=
k(b);if(c&&0<c.duration){var d=a();if(c.back){var e=d-c.back.start;if(0>e)return delete c.back,f(b),!0;b=Math.max(0,c.back.duration-e);b=c.duration-b;delete c.back;c.fore={start:d,duration:b}}else{if(c.fore){e=d-c.fore.start;if(0>e)return delete c.fore,c.back={start:d,duration:e},f(b),!0;b=Math.max(0,c.fore.duration-e);b=c.duration-b;delete c.fore}else{e=d-c.start;if(0>e)return c.back={start:d,duration:e},f(b),!0;b=Math.min(e,c.duration)}c.back={start:d,duration:b}}return!0}return!1}function h(a,
b){var c=k(a);return c?0<c.duration&&(c.back&&0==b||!c.back&&1==b):!1}function k(a){return a&&Dottoro.IsString(a)?t[a]:a}var l=window.requestAnimationFrame,m=window.cancelAnimationFrame;if(!l||!m){var p={ms:1,moz:1,webkit:1,o:1},n;for(n in p)if(l=l||window[n+"RequestAnimationFrame"],m=m||window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"],l&&m)break}l&&m||(l=function(b){return setTimeout(function(){b(a())},15)},m=function(a){clearTimeout(a)});var q=null,r=null,t={},s=0,u=0;Dottoro.Timer=
{Add:function(b,c,e){Dottoro.IsNumber(c)&&(c={duration:c});var f=a();c.startDelay&&(f+=c.startDelay);b={start:f,duration:c.duration,once:c.once,autoback:c.autoback,silentRemove:"silentRemove"in c?c.silentRemove:c.once&&!c.autoback,noDefArgs:"noDefArgs"in c?c.noDefArgs:c.once&&!c.autoback,func:b,args:e||[]};c.back&&(b.back={start:f,duration:c.duration});e=""+u;u++;s++;t[e]=b;d();return e},Update:function(a){a&&a in t&&e(a)},Remove:function(a,b){return f(a,b)},Pause:function(b){(b=k(b))&&!b.paused?
(b.paused={start:a()},b=!0):b=!1;return b},Restart:function(b){if((b=k(b))&&b.paused){var c=a()-b.paused.start,d=b.back?b.back:b.fore?b.fore:b;"origStart"in d||(d.origStart=d.start);d.start+=c;delete b.paused;b=!0}else b=!1;return b},TurnBack:function(a){return g(a)},Finished:function(a,b){return h(a,b)},IsBack:function(a){a=(a=k(a))?!!a.back:!1;return a},GetTimer:function(a){return k(a)}}})();Dottoro.SetTimeout=function(a,b,c){return Dottoro.Timer.Add(a,{duration:b,once:!0},c)};
Dottoro.CubicBezier=function(a,b,c,d){function e(a,b){var c,d,e,k;e=a;for(d=0;8>d;d++){k=((h*e+g)*e+f)*e-a;if(Math.abs(k)<b)return e;c=(3*h*e+2*g)*e+f;if(Math.abs(c)<b)break;e-=k/c}c=0;d=1;e=a;if(e<c)return c;if(e>d)return d;for(;c<d;){k=((h*e+g)*e+f)*e;if(Math.abs(k-a)<b)break;a>k?c=e:d=e;e=.5*(d-c)+c}return e}this.Get=function(a){a=e(a,1E-6);return((m*a+l)*a+k)*a};var f=3*a,g=3*(c-a)-f,h=1-f-g,k=3*b,l=3*(d-b)-k,m=1-k-l};
(function(){Dottoro.Move=Dottoro.Class.extend({init:function(a,b,c,d){this.ranges=(this.valueIsArr=Dottoro.IsArray(a))?a:[a];this.duration=b;this.callback=c;d||(d={});this.easing=d.easing?d.easing:"swing";this.cachedEasings={};this.userData=d.userData;this.timerId=null;(a=null!=d.start?d.start:1)&&this.Start({back:0>a,skipFirst:d.skipFirst,startDelay:d.startDelay})},getPolyTiming:function(a,b,c){switch(a){case "in":return 1-Math.pow(1-c,b);case "out":return Math.pow(c,b)}return.5>c?(1-Math.pow(1-
2*c,b))/2:.5+Math.pow(2*(c-.5),b)/2},getExpTiming:function(a,b){switch(a){case "exp-in":return 1-Math.pow(2,10*(1-b))/1024;case "exp-out":return Math.pow(2,10*b)/1024}return.5>b?(1-Math.pow(2,10*(1-2*b))/1024)/2:.5+Math.pow(2,20*(b-.5))/1024/2},getBackTiming:function(a,b){switch(a){case "back-in":return 1-(1+Math.cos(Math.PI*(1.3*b-.3)))/(1+Math.cos(.3*Math.PI));case "back-out":return(-1+Math.cos(1.3*Math.PI*b))/(-1-Math.cos(.3*Math.PI))}return(1-Math.cos(Math.PI*(1.6*b-.3))/Math.cos(.3*Math.PI))/
2},initBounceTiming:function(a){var b=(1-a)/(1+a),c=2/b/b,d=(1+a)/(2*a),e=Math.log(a);return{q:a,x:b,a:c,r:d,lnq:e}},getBounceTiming:function(a,b){this.cachedEasings.bounces||(this.cachedEasings.bounces={});var c=this.cachedEasings.bounces,d=""+a;d in c||(c[d]=this.initBounceTiming(a));var e=c[d];a=e.q;var c=e.x,d=e.a,f=e.r,e=e.lnq;b<=c?c=b/c*(b/c):1<=b?c=1:(f=Math.floor(Math.log(f*(1-b))/e)+1,f=-2*Math.pow(a,f),e=b-(1+f/(a+1)),c=1+d/2*e*e+f/c*e);return c},getElasticTiming:function(a,b,c){if(1<=c)a=
1;else{var d=(2*b-1)/4/Math.sqrt(1-a*a);a=1-Math.exp(-2*a*Math.PI*d*c)*Math.cos((2*b-1)/2*Math.PI*c)}return a},getBezierTiming:function(a,b){if(Dottoro.IsString(a))switch(a){case "ease":a=[.25,.1,.25,1];break;case "ease-in":a=[.42,0,1,1];break;case "ease-out":a=[0,0,.58,1];break;case "ease-in-out":a=[.42,0,.58,1]}if(Dottoro.IsArray(a)){this.cachedEasings.bezierCurves||(this.cachedEasings.bezierCurves={});var c=this.cachedEasings.bezierCurves,d=a.join("_");d in c||(c[d]=new Dottoro.CubicBezier(a[0],
a[1],a[2],a[3]));return c[d].Get(b)}return b},getInitValues:function(a){for(var b=[],c=this.ranges.length,d=0;d<c;d++){var e=this.ranges[d],e=a?e.to:e.from;if(!this.valueIsArr){b=e;break}b.push({value:e,moveBack:!1})}return b},callUserFunc:function(a){this.lastValues=a[0];this.lastT=a[3];return Dottoro.CallUserFunc(this.callback,a)},first:function(a){var b=this.getInitValues(a);return this.callUserFunc([b,this,this.timerId,a?1:0])},next:function(a,b){if(0>a)this.clearTimer();else{for(var c=-1,d=[],
e=this.ranges.length,f=0;f<e;f++){var g=!1,h=this.ranges[f],k=0,l=1,m=this.duration;0>=m?(l=m?-1:0,"startTime"in h&&(k=h.startTime),"duration"in h&&(m=h.duration,0<=m&&(l=k+m))):("startTime"in h&&(k=Dottoro.IsString(h.startTime)?parseFloat(h.startTime)/100:h.startTime/m),"duration"in h&&(m=Dottoro.IsString(h.duration)?parseFloat(h.duration)/100:h.duration/m,l=k+m));var p=!1;if(a<=k)l=h.from;else if(0<=l)if(a>=l)l=h.to;else var m=l-k,n=this.GetEasingTiming((a-k)/m,h),l=(1-n)*h.from+n*h.to;else if(n=
(a-k)/(-1*m)*h.by,l=h.from+n,"to"in h){var q=h.to-h.from,r=0>q?-1:1;if(r*n>r*q||0==q&&0!=n)"toBack"in h?"durationBack"in h?(r=a-(q/h.by*-1*m+k),k=Math.abs(h.durationBack),l=(h.to-h.toBack)/h.by*-1*m,r=Dottoro.Modulo(r,k+l),l=r<k?r/k:1-(r-k)/l,l=(1-l)*h.to+l*h.toBack,p=0<r&&r<=k):(m=Math.abs(h.to-h.toBack),k=Dottoro.Modulo(n-q,2*m),l=h.to+r*(k>m?k-2*m:-1*k),p=0<r==(0<k&&k<=m)):(l=h.to,g=!0)}g?0!=c&&(c=1):c=0;if(!this.valueIsArr){d={value:l,moveBack:p};break}d.push({value:l,moveBack:p})}d=this.callUserFunc([d,
this,b,a]);0<c&&(d=!1);return d}},clearTimer:function(){this.callUserFunc([null,this,this.timerId,-1]);this.timerId=null},Start:function(a){a||(a={});if(this.timerId){var b=Dottoro.Timer.GetTimer(this.timerId);return b&&!b.back!=!a.back?Dottoro.Timer.TurnBack(this.timerId):!1}b="duration"in a?a.duration:this.duration;0!=b&&(this.timerId=Dottoro.Timer.Add([this,"next"],{duration:b,back:a.back,startDelay:a.startDelay}));a.skipFirst||this.first(a.back);0==b&&(this.first(!a.back),this.clearTimer());return!0},
Stop:function(a,b){this.timerId&&(b&&Dottoro.Timer.Update(this.timerId),Dottoro.Timer.Remove(this.timerId,a),a&&(this.timerId=null))},Pause:function(){return this.timerId?Dottoro.Timer.Pause(this.timerId):!1},Restart:function(){return this.timerId?Dottoro.Timer.Restart(this.timerId):!1},IsRunning:function(){return!!this.timerId},IsBack:function(){return Dottoro.Timer.IsBack(this.timerId)},Reset:function(a){this.first(a)},GetDuration:function(){return this.duration},GetRanges:function(){return this.ranges},
GetLastValues:function(){return this.lastValues},GetLastTime:function(){return this.lastT},GetEasingTiming:function(a,b){var c=b.easing?b.easing:this.easing;switch(c){case "quad-in":return this.getPolyTiming("in",2,a);case "quad-out":return this.getPolyTiming("out",2,a);case "quad-in-out":return this.getPolyTiming("in-out",2,a);case "cubic-in":return this.getPolyTiming("in",3,a);case "cubic-out":return this.getPolyTiming("out",3,a);case "cubic-in-out":return this.getPolyTiming("in-out",3,a);case "exp-in":case "exp-out":case "exp-in-out":return this.getExpTiming(c,
a);case "back-in":case "back-out":case "back-in-out":return this.getBackTiming(c,a);case "bounce-xl":return this.getBounceTiming(.8,a);case "bounce-l":return this.getBounceTiming(2/3,a);case "bounce":return this.getBounceTiming(.5,a);case "bounce-s":return this.getBounceTiming(.4,a);case "bounce-xs":return this.getBounceTiming(1/3,a);case "elastic-xs":return this.getElasticTiming(.3,6,a);case "elastic-s":return this.getElasticTiming(.25,8,a);case "elastic":return this.getElasticTiming(.2,10,a);case "elastic-l":return this.getElasticTiming(.15,
14,a);case "elastic-xl":return this.getElasticTiming(.1,20,a);case "ease":case "ease-in":case "ease-out":case "ease-in-out":return this.getBezierTiming(c,a);case "cubic-bezier":return this.getBezierTiming(b&&b.easingParams?b.easingParams:"ease",a);case "swing":return(1-Math.cos(a*Math.PI))/2}return a},GetUserData:function(){return this.userData}})})();
(function(){Dottoro.Anim=Dottoro.Class.extend({init:function(a,b,c){Dottoro.IsArray(a)||(a=[a]);this.ranges=[];this.items=[];for(var d=a.length,e=0;e<d;e++){var f=a[e],g=Dottoro.GetElement(f.elem),f=f.props,h;for(h in f){var k=f[h];switch(h){case "clip":for(var l={width:g.offsetWidth,height:g.offsetHeight},m=Dottoro.GetClip(g),p={},n=!1,q=["left","top","right","bottom"],r=0;r<q.length;r++){var t=q[r];if(t in k){var s=k[t],u=0>("duration"in s?s.duration:b),v="from"in s?s.from:m[t];"auto"!=v&&(v=this.parseValue(v,
null,l),v=v.n);if(u)var x="by"in s?s.by:0,x=this.parseValue(x,null,l),x=x.n,z=0==x;else{var y="to"in s?s.to:v;"auto"!=y&&(z=this.parseValue(y,null,l),y=z.n);z=v==y}z?p[t]=v:(n=!0,p[t]=u?{from:v,by:x}:{from:v,to:y},z="left"==t||"right"==t?"width":"height",t="left"==t||"top"==t,"auto"==v&&(v=t?0:l[z]),0>v&&(v=l[z]),u||("auto"==y&&(y=t?0:l[z]),0>y&&(y=l[z])),t=u?{from:v,by:x}:{from:v,to:y},this.addToRanges(t,s,u))}else p[t]="auto"}n&&this.items.push({elem:g,prop:h,data:p});break;case "trafo":var m={x:"50%",
y:"50%"},p=Dottoro.GetElemTrafo(g),n=[],w;for(w in k)if(s=k[w],"originX"==w||"originY"==w)m["originX"==w?"x":"y"]=s;else switch(l=(u=0>("duration"in s?s.duration:b))?"by":"to",w){case "moveX":case "moveY":var q=u?{from:1,by:1}:{from:1,to:1},l="moveX"==w?g.offsetWidth:g.offsetHeight,A;for(A in q)A in s?Dottoro.IsString(s[A])&&(s[A]=parseFloat(s[A])/100*l):s[A]="from"==A?p.move["moveX"==w?"x":"y"]:u?0:s.from;this.addToRanges(s,null,u);n.push(w);break;case "scaleX":case "scaleY":s.from="from"in s?s.from:
p.scale["scaleX"==w?"x":"y"];s[l]=l in s?s[l]:u?0:s.from;this.addToRanges(s,null,u);n.push(w);break;case "rotate":s.from="from"in s?s.from:p.rotate,s[l]=l in s?s[l]:u?0:s.from,this.addToRanges(s,null,u),n.push(w)}this.items.push({elem:g,prop:h,ops:n,origin:m});break;default:u=0>("duration"in k?k.duration:b),v=this.parseValue("from"in k?k.from:Dottoro.GetStyleOrigUnit(g,h),g),s="px",t={from:v.n},u?(x=0,"by"in k&&(x=this.parseValue(k.by,g),s=x.unit?x.unit:s,x=x.n),t.by=x):(z="to"in k?this.parseValue(k.to,
g):v,s=z.unit?z.unit:s,t.to=z.n),v.unit&&(s=v.unit),this.addToRanges(t,k,u),this.items.push({elem:g,prop:h,unit:s})}}}c||(c={});this.profile=c.profile||"anim";this.forceRedraw=c.forceRedraw;this.simulate=c.simulate;this.callback=c.callback;a=null!=c.start?c.start:1;c.start=0;this.move=new Dottoro.Move(this.ranges,b,[this,"next"],c);a&&this.move.Start({back:0>a,skipFirst:c.skipFirst,startDelay:c.startDelay})},parseValue:function(a,b,c){var d=0,e="";if(Dottoro.IsString(a)){if(d=parseFloat(a),(a=a.match(/^(\+|-)?(\d*\.\d+|\d+)([^\d]*)$/))&&
a[3]&&(e=a[3],"%W"==e||"%H"==e))b=c?c:Dottoro.GetSize(b),d*=("%W"==e?b.width:b.height)/100,e="px"}else d=a;return{n:d,unit:e}},addToRanges:function(a,b,c){if(b){var d={startTime:1,duration:1,easing:1};c&&(d.to=1,d.toBack=1,d.durationBack=1);for(var e in d)e in b&&(a[e]=b[e])}this.ranges.push(a)},setValues:function(a,b,c,d){b=b?Dottoro.Timer.Finished(b,c):!0;for(var e=this.items.length,f=0,g=0;g<e;g++){var h=this.items[g];switch(h.prop){case "clip":for(var k=h.data,l=["left","top","right","bottom"],
m={},p=0;p<l.length;p++){var n=l[p];if(Dottoro.IsObject(k[n])){r=a[f++].value;if(b){var q=0==c?k[n].from:k[n].to;"auto"==q&&(r=q)}m[n]=r}else m[n]=k[n]}d&&!1===Dottoro.CallUserFunc(d,[h,m])||Dottoro.SetStyle(this.profile,h.elem,"clip",m);break;case "trafo":k={move:{},scale:{},origin:h.origin};l=h.ops.length;for(m=0;m<l;m++)switch(p=h.ops[m],r=a[f++].value,p){case "moveX":k.move.x=r;break;case "moveY":k.move.y=r;break;case "scaleX":k.scale.x=r;break;case "scaleY":k.scale.y=r;break;case "rotate":k.rotate=
r}d&&!1===Dottoro.CallUserFunc(d,[h,k])||Dottoro.SetStyle(this.profile,h.elem,"trafo",k);break;case "opacity":var r=a[f++].value;d&&!1===Dottoro.CallUserFunc(d,[h,r])||Dottoro.SetStyle(this.profile,h.elem,"opacity",r);break;default:r=a[f++].value,k=null!=h.unit?h.unit:"px","zIndex"==h.prop&&(k=""),d&&!1===Dottoro.CallUserFunc(d,[h,r+k])||Dottoro.SetStyle(this.profile,h.elem,h.prop,r+k)}}},next:function(a,b,c,d){a&&!this.simulate&&this.setValues(a,c,d);Dottoro.CallUserFunc(this.callback,[this,c,d,
a])},Start:function(a){return this.move.Start(a)},Stop:function(a,b){this.move.Stop(a,b)},Pause:function(){return this.move.Pause()},Restart:function(){return this.move.Restart()},IsRunning:function(){return this.move.IsRunning()},IsBack:function(){return this.move.IsBack()},Reset:function(a){this.move.Reset(a)},GetDuration:function(){return this.move.GetDuration()},GetRanges:function(){return this.move.GetRanges()},GetLastValues:function(){return this.move.GetLastValues()},GetLastTime:function(){return this.move.GetLastTime()},
GetEasingTiming:function(a,b){return this.move.GetEasingTiming(a,b)},GetUserData:function(){return this.move.GetUserData()}})})();
Dottoro.PreloaderAnim=Dottoro.Class.extend({init:function(a,b,c){this.frameCount=12;a&&this.Start(a,b,c)},create:function(){this.wrapper||(this.wrapper=Dottoro.CreateElement("div",this.p,{className:(this.holderClass?this.holderClass+" ":"")+"dottoro_preloader_wrapper"}),this.img=Dottoro.CreateElement("div",this.wrapper,{className:"dottoro_preloader"}),this.width=this.img.offsetWidth)},show:function(){if(!this.animTimer){this.create();this.step=0;this.img.style.backgroundPosition="0px 0px";var a=this;
this.animTimer=window.setInterval(function(b){a.animate()},100);this.animate()}},animate:function(){this.step=(this.step+1)%this.frameCount;this.img.style.backgroundPosition=-1*this.step*this.width+"px 0px"},Start:function(a,b,c){this.Stop();this.p=a;this.holderClass=c;if(b){var d=this;this.delayTimer=window.setTimeout(function(a){d.show()},b)}else this.show()},Stop:function(){this.delayTimer&&(window.clearTimeout(this.delayTimer),this.delayTimer=null);this.animTimer&&(window.clearInterval(this.animTimer),
this.animTimer=null,Dottoro.RemoveNode(this.wrapper),this.wrapper=null)}});Dottoro.StrToType=function(a,b,c){if(void 0!==b){if("string"==b)return a;if("boolean"==b)return"1"==a||"true"==a||"yes"==a||"on"==a;if("number"==b)return Number(a);if("integer"==b)return parseInt(a);if("array"==b)return Dottoro.StrToArray(a);c||(c=document);return c.getElementById(a)}};Dottoro.StrToArray=function(a){return Dottoro.JSONDecode(a,!0)||[]};
Dottoro.SplitSettings=function(a,b){a=Dottoro.Trim(a);var c=a.length;c&&","==a.charAt(c-1)&&(a=a.substr(0,c-1));try{var d=(new Function("return "+("{"+a+"}")))()}catch(e){d={}}if(!b){var c=[],f;for(f in d){var g=f.toLowerCase();g!=f&&c.push([g,f])}for(f=0;f<c.length;f++)d[c[f][0]]=d[c[f][1]],delete d[c[f][1]]}return d};
Dottoro.SetSetting=function(a,b,c,d){var e="";b=b.toLowerCase();if(d&&d.hasOwnProperty(b)){if(d[b].readOnly)return;"type"in d[b]&&(e=d[b].type)}!e&&a.hasOwnProperty(b)&&(e=Dottoro.TypeOf(a[b]));if(e&&(d=Dottoro.TypeOf(c),e!=d)){if("string"==e){a[b]=""+c;return}if("string"==d){a[b]=Dottoro.StrToType(c,e);return}}a[b]=c};Dottoro.GetNodeSettings=function(a,b){if(a){var c=a.getAttribute(b||"data-dottoro_params");if(c)return Dottoro.SplitSettings(c)}return{}};
Dottoro.ReadNodeSettings=function(a,b,c,d){if(a=Dottoro.GetNodeSettings(a,d))for(var e in a)a.hasOwnProperty(e)&&Dottoro.SetSetting(b,e,a[e],c)};Dottoro.HasParentNode=function(a){return a.parentNode&&a.parentNode!==a.ownerDocument};
Dottoro.GetChildFrameWindows=function(a,b){a||(a=window);b||(b=[]);try{if("frames"in a)for(var c=0;c<a.frames.length;c++)b.push(a.frames[c]),Dottoro.GetChildFrameWindows(a.frames[c],b);else for(var d=["frame","iframe"],e=0;e<d.length;e++)for(var f=a.getElementsByTagName(d[e]),c=0;c<f.length;c++){var g=f[c].contentWindow;b.push(g);Dottoro.GetChildFrameWindows(g,b)}}catch(h){}return b};
Dottoro.GetAllFrameWindows=function(a,b){a||(a=window);b||(b=[]);var c=a.top;b.push(c);Dottoro.GetChildFrameWindows(c,b);return b};Dottoro.IsWin=function(a){return"window"in a&&a.window==a};Dottoro.GetWinFromDoc=function(a){return a?a.defaultView?a.defaultView:a.parentWindow:null};Dottoro.GetWin=function(a){if(Dottoro.IsWin(a))return a;"ownerDocument"in a&&a.ownerDocument&&(a=a.ownerDocument);return Dottoro.GetWinFromDoc(a)};
Dottoro.GetElement=function(a,b){return Dottoro.IsString(a)?(b||(b=document),b.getElementById(a)):a};Dottoro.FirstElementChild=function(a,b){if(!a)return null;var c=null;if("firstElementChild"in a)c=a.firstElementChild;else for(c=a.firstChild;c&&1!=c.nodeType;)c=c.nextSibling;return c&&b&&b.toLowerCase()!=c.nodeName.toLowerCase()?Dottoro.NextElementSibling(c,b):c};
Dottoro.NextElementSibling=function(a,b){if(!a)return null;var c=a;b=b?b.toLowerCase():"";do if("nextElementSibling"in c)c=c.nextElementSibling;else{do c=c.nextSibling;while(c&&1!=c.nodeType)}while(c&&b&&c.nodeName.toLowerCase()!=b);return c};Dottoro.GetElementChilds=function(a,b){for(var c=[],d=Dottoro.FirstElementChild(a,b);d;)c.push(d),d=Dottoro.NextElementSibling(d,b);return c};
Dottoro.AppendChilds=function(a,b){if(a&&b)if(Dottoro.IsArray(b))for(var c=b.length,d=0;d<c;d++)a.appendChild(b[d]);else a.appendChild(b)};Dottoro.RemoveNode=function(a){return a&&a.parentNode?a.parentNode.removeChild(a):null};Dottoro.IsAncestorOf=function(a,b){if(a==b)return!0;if(a.contains)return a.contains(b);if(a.compareDocumentPosition)return!!(a.compareDocumentPosition(b)&16);for(;b;){if(b==a)return!0;b=b.parentNode}return!1};
(function(){function a(a,c){for(var d=a.length,e=null,f=null,g=0;g<d;g++){var h={domNode:a[g]};f?(h.p=f,f.firstChild=h,f.lastChild=h):e=h;f=h;c&&Dottoro._setData(a[g],c,h)}return e}Dottoro.Parents=function(a,c){for(var d=[a];a.parentNode&&a!=a.parentNode&&(!c||a!=c);)a=a.parentNode,d.unshift(a);return d};Dottoro.CommonAncestor=function(a,c,d){a=Dottoro.Parents(a,d);c=Dottoro.Parents(c,d);if(a[0]!=c[0])return!1;d=1;for(var e=Math.min(a.length,c.length);d<e&&a[d]==c[d];)d++;return{ancestor:a[d-1],path:a.slice(0,
d),path1:a.slice(d),path2:c.slice(d)}};Dottoro.GetCommonSubtree=function(b,c,d){for(var e=null,f=b.length,g=0;g<f;g++){var h=Dottoro.Parents(b[g],c);if(e){for(var k=e,l=0,m=null;k&&l<h.length&&k.domNode==h[l];)l++,m=k,k=k.lastChild;m&&(h=a(h.slice(l),d))&&(h.p=m,m.lastChild=h,m.firstChild?(m.firstChild.nextSibling=h,h.previousSibling=m.firstChild):m.firstChild=h)}else e=a(h,d)}return e}})();
Dottoro.CreateElement=function(a,b,c,d){var e=document;if(b=Dottoro.GetElement(b))"nodeType"in b&&9==b.nodeType?(e=b,b=null):e=b.ownerDocument;a=e.createElement(a);var f;if(c)for(f in c)void 0!==c[f]&&("enctype"==f?a.setAttribute(f,c[f]):(a[f]=c[f],"checked"==f&&(a.defaultChecked=c[f])));if(d)for(f in d)void 0!==d[f]&&(a.style[f]=d[f]);b&&b.appendChild(a);return a};
Dottoro.CreateSelect=function(a,b,c,d,e){a=Dottoro.CreateElement("select",a,b,c);Dottoro.CreateOptions(a,d,e);b&&"value"in b&&(a.value=b.value);return a};
Dottoro.CreateOptions=function(a,b,c){if(b)if(c=c?c:"",Dottoro.IsArray(b))for(var d=0;d<b.length;d++){var e=b[d],f={},g=null,h=0;if(Dottoro.IsString(e))f.value=e,f.text=e;else if(Dottoro.IsArray(e))0<e.length&&(f.value=e[0],f.text=1<e.length?e[1]:f.value,c&&2<e.length&&(h=e[2]));else{if("group"in e){Dottoro.CreateOptions(a,e.group,c);continue}"value"in e&&(f.value=e.value,f.text=f.value);"text"in e&&(f.text=e.text,"value"in e||(f.value=f.text));c&&"depth"in e&&(h=e.depth);"styles"in e&&(g=e.styles)}for(;0<
h;)f.text=c+f.text,h--;f.label=f.text;Dottoro.CreateElement("option",a,f,g)}else for(d in b)e=Dottoro.CreateElement("optgroup",a,{label:d}),Dottoro.CreateOptions(e,b[d],c)};Dottoro.CreateDummyElem=function(a,b){a||(a=document);b||(b="div");var c=a.createElement(b);c.style.position="static";c.style.left="0px";c.style.top="0px";c.style.width="0px";c.style.height="0px";c.style.margin="0px";c.style.border="0px";c.style.padding="0px";c.style.overflow="hidden";c.style.visibility="hidden";return c};
Dottoro.DecodeCommentNodeText=function(a){if(a=a.data)a=a.replace(/-&#45;/g,"--"),a=a.replace(/--&gt;/g,"--\x3e"),a=a.replace(/--&amp;/g,"--&");return a};Dottoro.GetElemText=function(a){return"textContent"in a?a.textContent:a.innerText};Dottoro.SetElemText=function(a,b){"textContent"in a?a.textContent=b:a.innerText=b};Dottoro.HtmlToText=function(a){var b=document.createElement("div");b.innerHTML=a;return Dottoro.GetElemText(b)};
(function(){var a=null,b=/^\s+/,c=/<script/i;Dottoro.CreateDocFragment=function(a){a=a||document;a=a.createDocumentFragment();if(a.createElement)for(var b=Dottoro.HTML5Tags.length,c=0;c<b;c++)a.createElement(Dottoro.HTML5Tags[c]);return a};Dottoro.Eval=function(a){try{window.execScript?window.execScript(a,"JavaScript"):window.eval.call(window,a)}catch(b){}};Dottoro.EvalScriptTags=function(a){for(var b=0;b<a.length;b++){var c=a[b];c.src?Dottoro.LoadScript(src):(c=c.text||c.textContent||c.innerHTML)&&
Dottoro.Eval(c)}};Dottoro.LoadScript=function(a){Dottoro.Ajax.GetRequest(a,"",{responseType:"jscript"})};Dottoro.LoadStyle=function(a,b){b=b||document.body;Dottoro.CreateElement("link",b,{rel:"stylesheet",href:a})};Dottoro.SetElemHtml=function(d,e,f){var g;if(!a){a={};var h=document.createElement("div");h.innerHTML="   <link />";a.leadingWS=!h.firstChild||3!=h.firstChild.nodeType;a.links=!h.getElementsByTagName("link").length}g=a;var k=d.ownerDocument||document;f=Dottoro.Extend({evalScripts:!0},f);
h={scripts:[]};if(!Dottoro.isIEOlder(9)&&!c.test(e))return d.innerHTML=e,g.leadingWS&&b.test(e)&&(f=b.exec(e)[0],d.insertBefore(k.createTextNode(f),d.firstChild)),h;var l=Dottoro.CreateDocFragment(k),k=k.createElement("div");l.appendChild(k);if(g.links||g.leadingWS)e="div<div>"+e+"</div>";k.innerHTML=e;if(g.links||g.leadingWS)k=k.lastChild;e=k.getElementsByTagName("script");g=[];for(l=0;l<e.length;l++){var m=e[l];m.type&&"text/javascript"!=m.type.toLowerCase()||g.push(m)}for(l=0;l<g.length;l++)Dottoro.RemoveNode(g[l]);
for(;k.firstChild;)d.appendChild(k.firstChild);f.evalScripts&&Dottoro.EvalScriptTags(g);h.scripts=g;return h}})();Dottoro.HideFocus=function(a){if(a)for(var b=0;b<a.length;b++)a[b].hideFocus=!0};Dottoro.GetElemsByIds=function(a,b,c){for(var d=0;d<b.length;d++){var e=document.getElementById(a+b[d]);e&&(c[b[d]]=e)}};
Dottoro.GetElemsByClass=function(a,b){for(var c=[],d=[],e=[],f=a.split(" "),g=0;g<f.length;g++){var h=Dottoro.Trim(f[g]);h&&(c.push("."+h),d.push(h),e.push(" "+h+" "))}b=b||document;if(b.getElementsByClassName)return b.getElementsByClassName(d.join(" "));if(b.querySelectorAll)return b.querySelectorAll(c.join(""));c=[];if(b.getElementsByTagName)for(d=b.getElementsByTagName("*"),f=d.length,h=e.length,g=0;g<f;g++){for(var k=d[g],l=!0,m=" "+k.className+" ",p=0;p<h;p++)if(0>m.indexOf(e[p])){l=!1;break}l&&
c.push(k)}return c};
(function(){Dottoro.GetFormControlsByAttr=function(a,b,c,d){var e=d?d.length:0;for(a=a.firstChild;a;){if(a.getAttribute){var f=a.getAttribute(b);if(f){var g=f.indexOf("["),h=0<=g;h&&(f=f.substr(0,g));f=Dottoro.Trim(f)}f&&e&&(f=e<=f.length&&f.substr(0,e)===d?f.substr(e):"");f&&(f in c||(c[f]={elems:[]}),c[f].arr=h,c[f].elems.push(a))}Dottoro.GetFormControlsByAttr(a,b,c,d);a=a.nextSibling}};Dottoro.GetOptionValue=function(a){var b=a.getAttributeNode("value");return b&&b.specified?a.value:a.text};Dottoro.SetFormControlValueFunc=
function(a,b){Dottoro._setData(a,"updateValue",b)};Dottoro.GetFormControlValue=function(a){var b=Dottoro._getData(a,"updateValue");b&&Dottoro.CallUserFunc(b,[a]);var c=a.nodeName.toLowerCase(),d=a.type?a.type.toLowerCase():"",b=a.value;if("input"===c&&("checkbox"===d||"radio"===d))a.checked||(b="");else if("select"===c)if(a.multiple)for(b=[],c=0;c<a.options.length;c++)d=a.options[c],d.selected&&b.push(Dottoro.GetOptionValue(d));else 0<=a.selectedIndex?(d=a.options[a.selectedIndex],b=Dottoro.GetOptionValue(d)):
b="";return b};Dottoro.ControlsToAssocArray=function(a,b){b=b||{};for(var c in a)if(a.hasOwnProperty(c)){var d=a[c].arr;b[c]=d?[]:"";for(var e=0;e<a[c].elems.length;e++){var f=Dottoro.GetFormControlValue(a[c].elems[e]);d?Dottoro.IsArray(f)?b[c]=b[c].concat(f):f&&b[c].push(f):(Dottoro.IsArray(f)&&(f=0<f.length?f[0]:""),f&&(b[c]=f))}}return b};Dottoro.FormToAssocArray=function(a,b,c,d){var e={};Dottoro.GetFormControlsByAttr(a,b?b:"name",e,c);return Dottoro.ControlsToAssocArray(e,d)};Dottoro.UpdateControlsByAssocArray=
function(a,b,c){for(var d in b)if(b.hasOwnProperty(d)){var e=c?c+d:d;if(e in a)if(Dottoro.IsArray(b[d]))for(var f=0;f<a[e].elems.length;f++){var g=a[e].elems[f],h=g.nodeName.toLowerCase(),k=g.type?g.type.toLowerCase():"";if("input"!==h||"checkbox"!==k&&"radio"!==k)if("select"===h&&g.multiple)for(h=0;h<g.options.length;h++)k=g.options[h],k.selected=Dottoro.InArray(b[d],Dottoro.GetOptionValue(k));else{var l=f<b[d].length?b[d][f]:"";Dottoro.SetControlValue(g,l)}else g.checked=Dottoro.InArray(b[d],g.value)}else for(f=
0;f<a[e].elems.length;f++)if(g=a[e].elems[f],h=g.nodeName.toLowerCase(),k=g.type?g.type.toLowerCase():"","input"!==h||"checkbox"!==k&&"radio"!==k)if("select"===h)for(h=0;h<g.options.length;h++)k=g.options[h],l=Dottoro.GetOptionValue(k),k.selected=l&&l===b[d];else l=b[d],Dottoro.SetControlValue(g,l);else g.checked="radio"===k?g.value&&g.value===b[d]:g.value&&g.value===b[d]||!0===b[d]||"1"===b[d]||"true"===b[d]||"yes"===b[d]||"on"===b[d]}};Dottoro.UpdateFormByAssocArray=function(a,b,c,d){var e={};Dottoro.GetFormControlsByAttr(a,
c?c:"name",e);Dottoro.UpdateControlsByAssocArray(e,b,d)};Dottoro.AddCBoxHiddens=function(a,b){b||(b="");var c=Dottoro._getData(a,"cboxinputs");if(c){for(var d=0;d<c.length;d++)Dottoro.RemoveNode(c[d]);Dottoro._removeData(a,"cboxinputs")}for(var c=[],e={},f=a.getElementsByTagName("input"),d=0;d<f.length;d++){var g=f[d];"checkbox"==g.type.toLowerCase()&&g.name&&(0>g.name.indexOf("[")?g.checked||c.push(g):(g.name in e||(e[g.name]=g),g.checked&&(e[g.name]=!1)))}for(d in e)e[d]&&c.push(e[d]);e=[];for(d=
0;d<c.length;d++)f=c[d],g=Dottoro.CreateElement("input",null,{type:"hidden",name:f.name,value:b}),f.parentNode.insertBefore(g,f),e.push(g);Dottoro._setData(a,"cboxinputs",e)}})();
(function(){Dottoro.GetInputSel=function(a){if("selectionStart"in a)return{start:a.selectionStart,end:a.selectionEnd};var b=a.ownerDocument;if(b.selection){var c=b.selection.createRange();"textarea"==a.nodeName.toLowerCase()?(b=b.body.createTextRange(),b.moveToElementText(a)):b=a.createTextRange();try{if(0>=c.compareEndPoints("EndToStart",b))return{start:0,end:0};if(0<=c.compareEndPoints("StartToEnd",b)){var d=a.value.length;return{start:d,end:d}}if(0>=c.compareEndPoints("StartToStart",b))var e=0;
else for(var f=b.duplicate(),e=0;f.moveStart("character",1)&&!("\r"==a.value.charAt(e)&&"\n"==a.value.charAt(e+1)?e+=2:e++,0>=c.compareEndPoints("StartToStart",f)););if(0<=c.compareEndPoints("EndToEnd",b))var g=a.value.length;else for(f=b.duplicate(),g=0;f.moveStart("character",1)&&!("\r"==a.value.charAt(g)&&"\n"==a.value.charAt(g+1)?g+=2:g++,0>=c.compareEndPoints("EndToStart",f)););return{start:e,end:g}}catch(h){}}d=a.value.length;return{start:d,end:d}};Dottoro.SelectInput=function(a,b,c){if("selectionStart"in
a)a.selectionStart=b,a.selectionEnd=c;else if(a.createTextRange){var d=a.value.substr(0,b).match(/\r\n/g);d&&(b-=d.length);(d=a.value.substr(0,c).match(/\r\n/g))&&(c-=d.length);"textarea"==a.nodeName.toLowerCase()?(d=a.ownerDocument.body.createTextRange(),d.moveToElementText(a)):d=a.createTextRange();d.moveStart("character",b);d.collapse();d.moveEnd("character",c-b);d.select()}}})();
(function(){function a(a,c){"innerText"in a&&!a.addEventListener?a.innerText=""+c:a.value=""+c}Dottoro.Input=Dottoro.Class.extend({init:function(a,c){this.input=a;Dottoro._setData(a,"input",this);this.handler=c;this.value=a.value;this.timerId=0;Dottoro.AddListener(a.addEventListener?Dottoro.isIE9?["input","focus","blur"]:"input":Dottoro.isIE8?["propertychange","focus","blur"]:"propertychange",[this,"OnChanged"],a)},NotifyChange:function(){Dottoro.CallUserFunc(this.handler,[this.input,this])},SetValue:function(b){this.value=
""+b;a(this.input,b)},CheckValue:function(){this.value!=this.input.value&&(this.NotifyChange(),this.value=this.input.value)},ClearTimer:function(){this.timerId&&(clearInterval(this.timerId),this.timerId=0)},OnChanged:function(a){switch(a.type){case "input":this.CheckValue();break;case "propertychange":"value"==a.propertyName&&this.CheckValue();break;case "focus":this.ClearTimer();var c=this;this.timerId=setInterval(function(){c.CheckValue()},100);break;case "blur":this.ClearTimer(),this.CheckValue()}}});
Dottoro.ListenInputChange=function(a,c){return new Dottoro.Input(a,c)};Dottoro.SetInputValue=function(b,c){var d=Dottoro._getData(b,"input");d?d.SetValue(c):a(b,c)}})();Dottoro.SetControlValue=function(a,b){var c=a.nodeName.toLowerCase();"input"===c||"textarea"===c?Dottoro.SetInputValue(a,b):a.value=""+b};
(function(){function a(a,b){""==a.value&&(a.value=b);a.value==b&&Dottoro.ModifyCSSClass(a,"placeholder")}function b(a,b){var c=b.getAttribute("data-dottoro_placeholder");b.value==c&&(b.value="");Dottoro.ModifyCSSClass(b,"","placeholder")}function c(b,c){var f=c.getAttribute("data-dottoro_placeholder");a(c,f)}Dottoro.PlaceHolder=function(d){var e=d.getAttribute("data-dottoro_placeholder");e&&(a(d,e),Dottoro.AddListener("focus",b,d),Dottoro.AddListener("blur",c,d))}})();
(function(){Dottoro.SetClip=function(a,b){for(var c="rect(",d=["top","right","bottom","left"],e=!0,f=0;f<d.length;f++){0<f&&(c+=" ");var g=b&&d[f]in b?b[d[f]]:"auto",c=c+g;"auto"!=g&&(c+="px",e=!1)}c+=")";if(e)if(Dottoro.isIEOlder(10))try{a.style.clip="auto",Dottoro.isIE8&&(a.style.clip="inherit",a.style.setAttribute("clip",""))}catch(h){a.style.clip="rect(auto auto auto auto)"}else Dottoro.RemoveStyleProp(a.style,"clip");else a.style.clip=c};Dottoro.GetClip=function(a){var b={left:"auto",top:"auto",
right:"auto",bottom:"auto"};if("currentStyle"in a&&"clipTop"in a.currentStyle)b={left:a.currentStyle.clipLeft,top:a.currentStyle.clipTop,right:a.currentStyle.clipRight,bottom:a.currentStyle.clipBottom};else{var c=Dottoro.GetStyle(a,"clip");c&&(a=/rect\(([^\)]*)\)/i,(c=a.exec(c))&&c[1]&&(a=/(\w+)[\s\,](\w+)[\s\,](\w+)[\s\,](\w+)/,(c=a.exec(c[1]))&&(b={top:c[1],right:c[2],bottom:c[3],left:c[4]})))}for(var d in b)b[d]=b[d]&&"auto"!=b[d]?parseFloat(b[d]):"auto";return b}})();
(function(){Dottoro.GetFilter=function(a,b){var c="";if(a.filters){"alpha"!=b&&a.filters.alpha&&100>a.filters.alpha.opacity&&(c+=" alpha(opacity="+a.filters.alpha.opacity+")");"gray"!=b&&a.filters.gray&&(c+=" gray("+a.filters.gray+")");if("alphaimageloader"!=b){var d=a.filters["DXImageTransform.Microsoft.AlphaImageLoader"];if(d&&""!=d.src){for(var c=c+" progid:DXImageTransform.Microsoft.AlphaImageLoader(",e=["src","sizingMethod"],f=0;f<e.length;f++){var g=e[f];0<f&&(c+=", ");c+=g+"="+d[g]}c+=")"}}if("transform"!=
b&&(d=a.filters["DXImageTransform.Microsoft.Matrix"])&&(1!=d.M11||0!=d.M21||0!=d.M12||1!=d.M22||0!=d.Dx||0!=d.Dy)){c+=" progid:DXImageTransform.Microsoft.Matrix(";e="M11 M21 M12 M22 Dx Dy sizingMethod".split(" ");for(f=0;f<e.length;f++)g=e[f],0<f&&(c+=", "),c+=g+"="+d[g];c+=")"}}return c};Dottoro.SetFilter=function(a,b,c){if(a.filters){var d=Dottoro.GetFilter(a,b);switch(b){case "alpha":c=Math.min(100,Math.max(0,c));100>c&&(d+=" alpha(opacity="+c+")");break;case "gray":c&&(d+=" gray(1)");break;case "alphaimageloader":if(Dottoro.IsObject(c)){b=
c.src;var e=c.sizingMethod}else b=c,e="scale";""!=b&&(d+=" progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+b+"', sizingMethod="+e+")");break;case "transform":b=Dottoro.GetSpecifiedRect(a);e=a.runtimeStyle;"auto"!=b.left&&(e.marginLeft="");"auto"!=b.right&&(e.marginRight="");"auto"!=b.top&&(e.marginTop="");"auto"!=b.bottom&&(e.marginBottom="");var f=c.matrix;if(f&&(1!=f[0]||0!=f[1]||0!=f[2]||1!=f[3]||0!=f[4]||0!=f[5])){Dottoro.SetFilter(a,"transform",{});var g=a.offsetWidth,h=a.offsetHeight;
c="origin"in c?c.origin:{x:0,y:0};if(Dottoro.IsString(c.x)){var k=parseFloat(c.x);c.x=k/100*g}Dottoro.IsString(c.y)&&(k=parseFloat(c.y),c.y=k/100*h);var d=d+(" progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand', M11="+f[0]+", M21="+f[1]+", M12="+f[2]+", M22="+f[3]+", Dx="+f[4]+", Dy="+f[5]+")"),k=Dottoro.TransformPoint({x:0-c.x,y:0-c.y},f),l=Dottoro.TransformPoint({x:g-c.x,y:0-c.y},f),g=Dottoro.TransformPoint({x:g-c.x,y:h-c.y},f),h=Dottoro.TransformPoint({x:0-c.x,y:h-c.y},f),f=Math.min(k.x,
l.x,g.x,h.x),h=Math.min(k.y,l.y,g.y,h.y),f=c.x+f;c=c.y+h;"auto"!=b.left&&(e.marginLeft=f+"px");"auto"!=b.right&&(e.marginRight=-1*f+"px");"auto"!=b.top&&(e.marginTop=c+"px");"auto"!=b.bottom&&(e.marginBottom=-1*c+"px")}}a.style.filter=d}}})();(function(){Dottoro.SetOpacity=function(a,b){a&&a.style&&(""===b&&(b=1),b=Math.min(1,Math.max(0,Number(b))),"opacity"in a.style?a.style.opacity=b:Dottoro.SetFilter(a,"alpha",100*b))};Dottoro.GetOpacity=function(a){return Number(Dottoro.GetStyle(a,"opacity"))}})();
(function(){var a=null;Dottoro.GetCssTransformSupport=function(){if(null===a){a="";for(var b=["transform","MozTransform","webkitTransform","OTransform","msTransform"],c=0;c<b.length;c++){var d=b[c];if(d in document.documentElement.style){a=d;break}}}return a};Dottoro.SetTransformOrigin=function(a,c,d){var e=Dottoro.GetCssTransformSupport();e&&(a.style[e+"Origin"]=c+" "+d)};Dottoro.JoinArrayPrec=function(a,c,d){null==c&&(c=10);null==d&&(d=", ");for(var e=a.length,f=[],g=0;g<e;g++)f.push(a[g].toFixed(c));
return f.join(d)};Dottoro.IsUnitMatrix=function(a){var c=[1,0,0,1,0,0];if(a.length!=c.length)return!1;for(var d=0;d<c.length;d++)if(1E-4<Math.abs(c[d]-a[d]))return!1;return!0};Dottoro.GetElemTrafo=function(a){return Dottoro._getData(a,"trafo")||{move:{x:0,y:0},rotate:0,scale:{x:1,y:1},origin:{x:"50%",y:"50%"},rot_then_scale:!0}};Dottoro.TransformElem=function(a,c){var d=Dottoro._setData(a,"trafo",Dottoro.Extend(Dottoro.GetElemTrafo(a),c)),e=Dottoro.GetTrafoMatrix(d.move,d.rotate,d.scale,d.rot_then_scale),
f=Dottoro.GetCssTransformSupport();f?(Dottoro.SetTransformOrigin(a,d.origin.x,d.origin.y),Dottoro.IsUnitMatrix(e)?a.style[f]="":(d=Dottoro.JoinArrayPrec(e),a.style[f]="matrix("+d+")")):Dottoro.SetFilter(a,"transform",{matrix:e,origin:d.origin})};Dottoro.TransformPoint=function(a,c){return{x:c[0]*a.x+c[2]*a.y+c[4],y:c[1]*a.x+c[3]*a.y+c[5]}};Dottoro.GetTrafoMatrix=function(a,c,d,e){var f=Math.cos(c);c=Math.sin(c);return e?[d.x*f,d.y*c,-1*d.x*c,d.y*f,a.x,a.y]:[d.x*f,d.x*c,-1*d.y*c,d.y*f,a.x,a.y]}})();
(function(){var a=null;Dottoro.CopyElemSettings=function(a,c,d,e){if(d)for(var f=0;f<d.length;f++)c[d[f]]=a[d[f]];if(e)for(f=0;f<e.length;f++)c.style[e[f]]=a.style[e[f]]};Dottoro.CopyElemsSettings=function(a,c,d,e){for(var f in a)f in c&&Dottoro.CopyElemSettings(a[f],c[f],d,e)};Dottoro.CloneNode=function(b,c){var d=b.cloneNode(c);if(null===a){var e=document.createElement("div");e.dottoro=1;a="dottoro"in e.cloneNode(!1)}a&&Dottoro._removeAllData(d,c);return d}})();
(function(){Dottoro.HasCSSClass=function(a,b){return 0<=(a.className?" "+a.className+" ":"").indexOf(" "+b+" ")};Dottoro.ModifyCSSClass=function(a,b,c){var d={add:[],remove:[]},e=a.className?" "+a.className+" ":" ";if(c)if(Dottoro.IsArray(c))for(var f=0;f<c.length;f++)e=e.replace(" "+c[f]+" "," "),d.remove.push(c[f]);else e=e.replace(" "+c+" "," "),d.remove.push(c);if(b)if(Dottoro.IsArray(b))for(f=0;f<b.length;f++)0>e.indexOf(" "+b[f]+" ")&&(e+=b[f]+" ",d.add.push(b[f]));else 0>e.indexOf(" "+b+" ")&&
(e+=b+" ",d.add.push(b));a.className=Dottoro.Trim(e);return d};Dottoro.ReplaceCSSClass=function(a,b,c){a.className=(a.className?" "+a.className+" ":"").replace(" "+b+" "," "+c+" ")};Dottoro.AddRemoveCSSClass=function(a,b,c,d){b?Dottoro.ModifyCSSClass(a,c,d):Dottoro.ModifyCSSClass(a,d,c)}})();Dottoro.ConvertToPixel=function(a,b,c,d){if(a.runtimeStyle){var e=!a.runtimeStyle[c];e&&(a.runtimeStyle[c]=a.currentStyle[c]);var f=a.style[c];a.style[c]=b;b=a.style[d];a.style[c]=f;e&&(a.runtimeStyle[c]="")}return b};
Dottoro.GetStyleParent=function(a,b){if(!a||!a.ownerDocument)return null;var c=a.ownerDocument.documentElement;b||(b=Dottoro.GetStyle(a,"position"));if("fixed"==b)return c;if("absolute"==b){var d=a.offsetParent;if(!d)return c;pPosType=Dottoro.GetStyle(d,"position");return"absolute"==pPosType||"fixed"==pPosType||"relative"==pPosType?d:c}return Dottoro.HasParentNode(a)?a.parentNode:c};Dottoro.GetStyleOrigUnit=function(a,b){return a.style[b]?a.style[b]:Dottoro.GetStyle(a,b)};
(function(){var a={};Dottoro.GetStyle=function(b,c,d){if(!b||!b.ownerDocument)return null;var e=b.ownerDocument,f=e.documentElement;"float"==c&&(c="cssFloat"in b.style?"cssFloat":"styleFloat");var g=null;if(window.getComputedStyle){var h=Dottoro.GetWinFromDoc(e);if(!h)return null;try{var k=h.getComputedStyle(b,null),g=k[c]}catch(l){}"opacity"==c&&""===g&&(g="1");if(d){var m=/^-?\d+(\.\d+)?%$/;if(m.test(g))switch(c){case "backgroundPositionX":g=Math.floor(parseFloat(k.width)*parseFloat(g)/100);break;
case "backgroundPositionY":g=Math.floor(parseFloat(k.height)*parseFloat(g)/100);break;case "left":case "maxWidth":case "minWidth":case "right":case "textIndent":c=Dottoro.GetStyleParent(b);c===f?c=Dottoro.GetClientWinWidth(e):(c=h.getComputedStyle(c,null),c=c.width);g=Math.floor(parseFloat(c)*parseFloat(g)/100);break;case "bottom":case "maxHeight":case "minHeight":case "top":c=Dottoro.GetStyleParent(b);c===f?c=Dottoro.GetClientWinHeight(e):(c=h.getComputedStyle(c,null),c=c.height);g=Math.floor(parseFloat(c)*
parseFloat(g)/100);break;case "verticalAlign":g=Math.floor(parseFloat("normal"===k.lineHeight?"24px":k.lineHeight)*parseFloat(g)/100)}}}else{if("opacity"==c&&b.filters)return g=b.filters.alpha?b.filters.alpha.opacity:100,""+g/100;b.currentStyle&&(g=b.currentStyle[c]);if(d){if(f="borderLeftWidth"==c||"borderTopWidth"==c||"borderRightWidth"==c||"borderBottomWidth"==c)if(h=c.substring(6,c.length-5),"none"==b.currentStyle["border"+h+"Style"])g="0px";else if("medium"==g||"thin"==g||"thick"==g)a.hasOwnProperty(g)||
(h=Dottoro.CreateDummyElem(e),h.style.position="absolute",e.body.appendChild(h),h.style.border="medium solid red",a.medium=h.clientTop,h.style.borderWidth="thin",a.thin=h.clientTop,h.style.borderWidth="thick",a.thick=h.clientTop,e.body.removeChild(h)),g=a[g]+"px";"auto"!=g||"width"!=c&&"height"!=c||(g={"content-box":Dottoro.BOX_INNER,"padding-box":Dottoro.BOX_PADDING,"border-box":Dottoro.BOX_BORDER,"margin-box":Dottoro.BOX_MARGIN},e=Dottoro.BOX_INNER,h=b.currentStyle.boxSizing,h in g&&(e=g[h]),g=
Dottoro.GetSize(b,e),g="width"==c?g.width:g.height);if("fontSize"==c)g=Dottoro.ConvertToPixel(b,"1em","left","pixelLeft")+"px";else if(g)if(/^-?\d+(\.\d+)?(cm|mm|in|pt|pc|em|ex)$/i.test(g))g=Dottoro.ConvertToPixel(b,g,"left","pixelLeft")+"px";else if(m=/^-?\d+(\.\d+)?%$/,m.test(g))switch(c){case "backgroundPositionX":e=Dottoro.CreateDummyElem(b.ownerDocument);e.style.left=g;b.appendChild(e);g=e.style.pixelLeft+"px";b.removeChild(e);break;case "backgroundPositionY":e=Dottoro.CreateDummyElem(b.ownerDocument);
e.style.top=g;b.appendChild(e);g=e.style.pixelTop+"px";b.removeChild(e);break;case "left":case "marginBottom":case "marginLeft":case "marginRight":case "marginTop":case "maxWidth":case "minWidth":case "paddingBottom":case "paddingLeft":case "paddingRight":case "paddingTop":case "right":case "textIndent":case "width":g=Dottoro.ConvertToPixel(b,g,"left","pixelLeft")+"px";break;case "bottom":case "height":case "layoutGridChar":case "layoutGridLine":case "maxHeight":case "minHeight":case "top":g=Dottoro.ConvertToPixel(b,
g,"top","pixelTop")+"px";break;case "lineHeight":e=Dottoro.ConvertToPixel(b,"1em","left","pixelLeft");g=e*parseFloat(g)/100+"px";break;case "verticalAlign":e=Dottoro.ConvertToPixel(b,"1em","left","pixelLeft"),g=e*parseFloat(g)/100*parseFloat(g)/100+"px"}f&&b.contentWindow&&b.contentWindow.document&&b.contentWindow.document.documentElement&&(b=b.contentWindow.document.documentElement,c="borderLeftWidth"==c||"borderRightWidth"==c?b.clientLeft:b.clientTop,g=parseFloat(g)+c+"px")}}void 0===g&&(g=null);
d&&"auto"===g&&(g="0px");return g}})();
(function(){function a(a,c){if(!Dottoro.IsObjEmpty(e)){var d=Dottoro._getData(a,"backupStyle",{def:{}}),g=!1,p;for(p in e)if(!f[p].callback||!1!==Dottoro.CallUserFunc(f[p].callback,["backup_prop",a,c]))if(p in d||(e[p].push(a),d[p]={}),!(c in d[p])){if(!g){if((g=Dottoro._getData(a,"style"))&&c in g){var g=g[c],n={},q=void 0;for(q in g)"first"!=q&&"current"!=q&&(n[q]={value:g[q].value},g[q].clone=n[q]);if(g.first){n.first=g.first.clone;for(var r=g.first,t=n.first;r;)r.prev&&(t.prev=r.prev.clone),r.next&&
(t.next=r.next.clone),r=r.next,t=t.next}for(q in g)"first"!=q&&"current"!=q&&delete g[q].clone;g=n}else g={};g.current=b(a,c)}d[p][c]=g}}}function b(a,b){switch(b){case "opacity":return"opacity"in a.style?a.style.opacity:a.filters&&a.filters.alpha?a.filters.alpha.opacity/100:1;case "trafo":return Dottoro.Clone(Dottoro.GetElemTrafo(a))}return a.style[b]}function c(b,c,d,e){a(b,c);switch(c){case "opacity":Dottoro.SetOpacity(b,d);return;case "trafo":Dottoro.TransformElem(b,d);return;case "clip":if(!e){Dottoro.SetClip(b,
d);return}}b.style[c]=d}function d(d,e,f,g){var p=!1;if((d=d[e])&&d[f]){a(g,e);var n=d[f];n.prev?(p={changed:!1,value:n.prev.value},n.prev.next=n.next,n.prev.value=n.value):(p={changed:!0,value:b(g,e)},d.first=n.next,c(g,e,n.value,!0));n.next&&(n.next.prev=n.prev);delete d[f]}return p}var e={},f={},g=1;Dottoro.SetStyle=function(a,d,e,f){if(a&&"first"!=a&&"current"!=a&&d.style){var g=Dottoro._getData(d,"style",{def:{}}),n=e;Dottoro.IsString(e)&&(n={},n[e]=f);for(e in n){e in g||(g[e]={});f=g[e];var q=
b(d,e);if(a in f){var r=f[a];r.prev?(r.prev.next=r.next,r.prev.value=r.value):(f.first=r.next,q=r.value);r.next&&(r.next.prev=r.prev)}f[a]={next:f.first,prev:null,value:q};f.first&&(f.first.prev=f[a]);f.first=f[a];c(d,e,n[e])}}};Dottoro.RestoreStyle=function(a,b,c){var e=Dottoro._getData(b,"style");if(!a||"first"==a||"current"==a||!b.style||!e)return!1;var f={};if(c)if(Dottoro.IsString(c))f=d(e,c,a,b);else for(var g=0;g<c.length;g++)f[c[g]]=d(e,c[g],a,b);else for(c in e)f[c]=d(e,c,a,b);return f};
Dottoro.HasStoredStyle=function(a,b,c){var d=Dottoro._getData(b,"style");if(!b.style||!d)return!1;a||(a="first");return c in d&&!!d[c][a]};Dottoro.ActivateBackup=function(a){var b=""+g++;e[b]=[];f[b]={callback:a};return b};Dottoro.DeactivateBackup=function(a){a in e&&(delete e[a],delete f[a])};Dottoro.RestoreBackup=function(a){if(a in e){for(var b=0;b<e[a].length;b++){var d=e[a][b],f=Dottoro._getData(d,"style",{def:{}}),g=Dottoro._getData(d,"backupStyle"),n;for(n in g[a]){var q=g[a][n];c(d,n,q.current,
!0);delete q.current;f[n]=q}delete g[a]}delete e[a]}}})();Dottoro.HexToRGB=function(a){a=Dottoro.Trim(a);"#"==a.substr(0,1)&&(a=a.substr(1));var b=/^([a-fA-F\d]{2})([a-fA-F\d]{2})([a-fA-F\d]{2})$/,c=/^([a-fA-F\d])([a-fA-F\d])([a-fA-F\d])$/.exec(a);if(c)a=17*parseInt(c[1],16),b=17*parseInt(c[2],16),c=17*parseInt(c[3],16);else if(c=b.exec(a))a=parseInt(c[1],16),b=parseInt(c[2],16),c=parseInt(c[3],16);else return null;return{r:a,g:b,b:c}};
Dottoro.GetRGBColor=function(a){var b=/^#(([a-fA-F\d]){3}|([a-fA-F\d]){6})$/.exec(a);return b?Dottoro.HexToRGB(b[1]):(b=/^(rgb|rgba)?\(\s*(\d+)\s*\,\s*(\d+)\s*\,\s*(\d+)\s*(\,\s*(\d+)\s*)?\)$/.exec(a))?{r:b[2],g:b[3],b:b[4]}:!1};Dottoro.GetPixelLength=function(a,b){var c=Dottoro.GetStyle(a,b,!0);return parseFloat(c)};
Dottoro.GetStyleClip=function(a){var b=Dottoro.GetSize(a);a=Dottoro.GetStyle(a,"clip");b={top:0,right:b.width,bottom:b.height,left:0};if(a){var c=a.indexOf("("),d=a.lastIndexOf(")");if(0<=c&&0<=d)for(a=a.substring(c+1,d),d=c=0;c<a.length;){var e=Dottoro.FirstNonWS(a,c);if(0>e)break;c=Dottoro.FirstWS(a,e);0>c&&(c=a.length);e=a.substring(e,c);0>e.indexOf("auto")&&(b[Dottoro.CSS_SIDES[d]]=parseFloat(e));d++}}return b};
Dottoro.JSToCSS=function(a){for(var b="",c=0;c<a.length;c++)var d=a.charCodeAt(c),b=65<=d&&90>=d?b+("-"+String.fromCharCode(d+32)):b+a.charAt(c);return b};Dottoro.RemoveStyleProp=function(a,b){a.removeProperty?a.removeProperty(Dottoro.JSToCSS(b)):a.removeAttribute&&a.removeAttribute(b)};
(function(){var a=null;Dottoro.CSSAutoTest=function(){if(null===a){var b=document.createElement("div");b.style.position="fixed";b.style.top="0px";b.style.left="0px";b.style.height="0px";b.style.width="0px";document.body.appendChild(b);a="auto"==(window.getComputedStyle?window.getComputedStyle(b,null):b.currentStyle).bottom;document.body.removeChild(b)}return a}})();
Dottoro.GetVertOverflow=function(a){var b={height:"auto",maxHeight:"none",minHeight:0,top:"auto",bottom:"auto"},c={},d;for(d in b)c[d]=a.style[d],a.style[d]=b[d];var e=a.offsetHeight;for(d in b)a.style[d]=c[d];return e-a.offsetHeight};
Dottoro.GetSpecifiedRect=function(a){for(var b={},c=window.getComputedStyle?window.getComputedStyle(a,null):a.currentStyle,d=["left","top","right","bottom"],e=["width","height"],f=0;f<d.length;f++){var g=d[f],h=d[(f+2)%4],k=e[f%2];b[g]=c[g];if("auto"!=b[g]&&!Dottoro.CSSAutoTest()){var l=a.style[h],m=a.style[k];a.style[k]="auto";a.style[h]="-10000px";var p=c[g];a.style[h]="-20000px";var n=c[g];a.style[h]=l;a.style[k]=m;p!=n&&(b[g]="auto")}}return b};
Dottoro.GetZoomFactor=function(a){if(!Dottoro.isIEOlder(8))return 1;a||(a=document);var b=1;if(a.body.currentStyle&&a.body.getBoundingClientRect){var b=a.body.getBoundingClientRect(),b=b.right-b.left,c=a.body.offsetWidth;"zoom"in a.body.currentStyle&&"normal"!=a.body.currentStyle.zoom&&(a=parseInt(a.body.currentStyle.zoom),b/=a/100);b=Math.round(b/c*100)/100}return b};
Dottoro.StandardizeRect=function(a){a.hasOwnProperty("left")?a.hasOwnProperty("right")?a.width=a.right-a.left:a.right=a.left+a.width:a.left=a.right-a.width;a.hasOwnProperty("top")?a.hasOwnProperty("bottom")?a.height=a.bottom-a.top:a.bottom=a.top+a.height:a.top=a.bottom-a.height};Dottoro.IsPointInRect=function(a,b){return a.x>=b.left&&a.x<b.right&&a.y>=b.top&&a.y<b.bottom};Dottoro.IsRectInRect=function(a,b){return a.left>=b.left&&a.right<=b.right&&a.top>=b.top&&a.bottom<=b.bottom};
Dottoro.OffsetCoords=function(a,b,c){b&&("x"in a&&(a.x+=b),"left"in a&&(a.left+=b),"right"in a&&(a.right+=b));c&&("y"in a&&(a.y+=c),"top"in a&&(a.top+=c),"bottom"in a&&(a.bottom+=c))};Dottoro.ClientWinToDoc=function(a,b,c){b||(b=document);var d=c?-1:1;c=d*Dottoro.GetDocScrollLeft(b);b=d*Dottoro.GetDocScrollTop(b);Dottoro.OffsetCoords(a,c,b)};
Dottoro.ClientWinToClientWin=function(a,b,c){var d=b?Dottoro.GetWin(b):Dottoro.TOPWINDOW,e=c?Dottoro.GetWin(c):Dottoro.TOPWINDOW;if(!d||!e)return!1;if(d===e)return!0;for(c=[];d&&d.parent!==d;)c.push(d.frameElement),d=d.parent;for(b=[];e&&e.parent!==e;)b.push(e.frameElement),e=e.parent;if(d!==e)return!1;d=c.length-1;for(e=b.length-1;0<=d&&0<=e&&c[d]===b[e];)d--,e--;for(var f=0;f<=d;f++){var g=c[f];if(!g)return!1;g=Dottoro.GetLeftTopInClient(g,Dottoro.BOX_SCROLLBAR);Dottoro.OffsetCoords(a,g.left,g.top)}for(f=
0;f<=e;f++){g=b[f];if(!g)return!1;g=Dottoro.GetLeftTopInClient(g,Dottoro.BOX_SCROLLBAR);Dottoro.OffsetCoords(a,-g.left,-g.top)}return!0};
Dottoro.ClientWinToAbsolute=function(a,b,c,d){var e=b.ownerDocument;if(e){var f=b.offsetParent;if(f){var g={left:0,top:0},h=Dottoro.GetStyle(f,"position");"absolute"==h||"relative"==h||"fixed"==h?(g=Dottoro.GetLeftTopInClient(f,Dottoro.BOX_PADDING),Dottoro.OffsetCoords(g,-f.scrollLeft,-f.scrollTop)):(g.left-=Dottoro.GetDocScrollLeft(e),g.top-=Dottoro.GetDocScrollTop(e));d||(d={});d.hasOwnProperty("left")||(d.left=Dottoro.GetPixelLength(b,"marginLeft"));d.hasOwnProperty("top")||(d.top=Dottoro.GetPixelLength(b,
"marginTop"));g.left+=d.left;g.top+=d.top;b=c?1:-1;Dottoro.OffsetCoords(a,b*g.left,b*g.top)}}};Dottoro.IsElemHidden=function(a){return 0===a.offsetWidth&&0===a.offsetHeight};
Dottoro.GetSize=function(a,b){var c=a.ownerDocument;if(!c)return{width:0,height:0};if(a===c.documentElement){var d=Dottoro.GetClientWinWidth(c),c=Dottoro.GetClientWinHeight(c);return{width:d,height:c}}if(Dottoro.IsElemHidden(a))return{width:0,height:0};b||(b=Dottoro.BOX_BORDER);if(b==Dottoro.BOX_INNER||b==Dottoro.BOX_PADDING){c=!0;if(Dottoro.isIEOlder(11))if(0==a.clientWidth&&0==a.clientHeight)c=!1;else if(d=a.nodeName.toLowerCase(),"img"==d||"input"==d&&"image"==a.type.toLowerCase())c=!1;c?(d=Dottoro.GetSize(a),
d.width+=a.clientWidth-a.offsetWidth,d.height+=a.clientHeight-a.offsetHeight):d=Dottoro.GetSize(a,Dottoro.BOX_SCROLLBAR);b==Dottoro.BOX_INNER&&(d.width-=Dottoro.GetPixelLength(a,"paddingLeft")+Dottoro.GetPixelLength(a,"paddingRight"),d.height-=Dottoro.GetPixelLength(a,"paddingTop")+Dottoro.GetPixelLength(a,"paddingBottom"))}else switch(a.getBoundingClientRect?(d=a.getBoundingClientRect(),d={width:d.right-d.left,height:d.bottom-d.top},c=Dottoro.GetZoomFactor(c),d.width/=c,d.height/=c):(d={width:a.offsetWidth,
height:a.offsetHeight},c.documentElement===a&&(c=Dottoro.GetZoomFactor(c),d.width/=c,d.height/=c)),b){case Dottoro.BOX_SCROLLBAR:d.width-=Dottoro.GetPixelLength(a,"borderLeftWidth")+Dottoro.GetPixelLength(a,"borderRightWidth");d.height-=Dottoro.GetPixelLength(a,"borderTopWidth")+Dottoro.GetPixelLength(a,"borderBottomWidth");break;case Dottoro.BOX_MARGIN:d.width+=Dottoro.GetPixelLength(a,"marginLeft")+Dottoro.GetPixelLength(a,"marginRight"),d.height+=Dottoro.GetPixelLength(a,"marginTop")+Dottoro.GetPixelLength(a,
"marginBottom")}return d};
(function(){function a(b){var g=b.ownerDocument;if(!g||b===g.documentElement)return{left:0,top:0};if(b===g.body){var g=Dottoro.GetPixelLength(b,"marginLeft"),h=Dottoro.GetPixelLength(b,"marginTop"),k=Dottoro.GetStyle(b,"position");if("absolute"==k||"relative"==k||"fixed"==k)g+=Dottoro.GetPixelLength(b,"left"),h+=Dottoro.GetPixelLength(b,"top");return{left:g,top:h}}var l={left:b.offsetLeft,top:b.offsetTop},m=b.offsetParent;if(!m)return l;k=Dottoro.GetStyle(b,"position");if("fixed"==k)return l;b=a(m);
var h=Dottoro.GetStyle(m,"position"),p="absolute"==h||"relative"==h||"fixed"==h,n=Dottoro.GetStyle(m,"overflow");if("absolute"==k&&m===g.body&&!p)return l;var q=null;if(m===g.body)c.hasOwnProperty(k)||(c[k]={}),c[k].hasOwnProperty(h)||(c[k][h]={}),q=c[k][h];else if(p)d.hasOwnProperty(k)||(d[k]={}),d[k].hasOwnProperty(n)||(d[k][n]={}),q=d[k][n];else if("td"==m.tagName.toLowerCase()||"th"==m.tagName.toLowerCase())e.hasOwnProperty(k)||(e[k]={}),e[k].hasOwnProperty(n)||(e[k][n]={}),q=e[k][n];if(q){if(!q.hasOwnProperty("margin")){if(m===
g.body){n=Dottoro.CreateDummyElem(g,"iframe");n.style.position="absolute";g.body.appendChild(n);var r=n.contentWindow.document;r.open();r.write("<html><head></head><body></body></html>");r.close();p=r.body;p.style.marginLeft="2px";p.style.borderLeft="10px solid black";p.style.left="50px";p.style.position=h;h=Dottoro.CreateDummyElem(r,"div");h.style.position=k;p.appendChild(h);k=h.offsetLeft-10;g.body.removeChild(n)}else p?(h=Dottoro.CreateDummyElem(g,"div"),h.style.position="absolute",h.style.overflow=
n,h.style.marginLeft="2px",h.style.borderLeft="10px solid black",h.style.left="50px"):(h=Dottoro.CreateDummyElem(g,"td"),h.style.overflow=n,h.style.marginLeft="2px",h.style.borderLeft="10px solid black"),n=Dottoro.CreateDummyElem(g,"div"),n.style.position=k,h.appendChild(n),g.body.appendChild(h),k=n.offsetLeft-10,g.body.removeChild(h);q.margin=0;q.border=0;q.pos=0;for(g=-2;2>=g;g++)for(h=-2;2>=h;h++)for(n=-2;2>=n;n++)if(k==2*g+10*h+50*n){q.margin=g;q.border=h;q.pos=n;break}}q.margin&&(g=Dottoro.GetPixelLength(m,
"marginLeft"),h=Dottoro.GetPixelLength(m,"marginTop"),b.left-=q.margin*g,b.top-=q.margin*h);q.border&&(k=Dottoro.GetPixelLength(m,"borderLeftWidth"),g=Dottoro.GetPixelLength(m,"borderTopWidth"),b.left-=q.border*k,b.top-=q.border*g);q.pos&&(k=Dottoro.GetPixelLength(m,"left"),m=Dottoro.GetPixelLength(m,"top"),b.left-=q.pos*k,b.top-=q.pos*m)}Dottoro.OffsetCoords(l,b.left,b.top);return l}function b(a){var c;c=a.ownerDocument;if(!c||a===c.documentElement)return{left:0,top:0};var d=Dottoro.GetStyle(a,"position");
return"fixed"==d?{left:0,top:0}:(d="absolute"==d?a.offsetParent:a.parentNode)?(d===c.documentElement?(a=Dottoro.GetDocScrollLeft(c),c=Dottoro.GetDocScrollTop(c)):d===c.body?c=a=0:(a=d.scrollLeft,c=d.scrollTop),d=b(d),{left:a+d.left,top:c+d.top}):{left:0,top:0}}var c={},d={},e={};Dottoro.GetLeftTopInClient=function(c,d){var e=c.ownerDocument;if(!e||c===e.documentElement)return{left:0,top:0};if(c.getBoundingClientRect){var k=c.getBoundingClientRect(),l=k.left,k=k.top;Dottoro.isIEOlder(8)&&(l-=e.documentElement.clientLeft,
k-=e.documentElement.clientTop,e=Dottoro.GetZoomFactor(e),1!=e&&(l/=e,k/=e));l={left:l,top:k}}else l=a(c),e=b(c),l={left:l.left-e.left,top:l.top-e.top};d||(d=Dottoro.BOX_BORDER);switch(d){case Dottoro.BOX_INNER:case Dottoro.BOX_PADDING:e=c.clientLeft;k=c.clientTop;0==e&&0==k&&c.currentStyle&&!1===c.currentStyle.hasLayout&&(e=Dottoro.GetPixelLength(c,"borderLeftWidth"),k=Dottoro.GetPixelLength(c,"borderTopWidth"));d==Dottoro.BOX_INNER&&(e+=Dottoro.GetPixelLength(c,"paddingLeft"),k+=Dottoro.GetPixelLength(c,
"paddingTop"));l.left+=e;l.top+=k;break;case Dottoro.BOX_SCROLLBAR:l.left+=Dottoro.GetPixelLength(c,"borderLeftWidth");l.top+=Dottoro.GetPixelLength(c,"borderTopWidth");break;case Dottoro.BOX_MARGIN:l.left-=Dottoro.GetPixelLength(c,"marginLeft"),l.top-=Dottoro.GetPixelLength(c,"marginTop")}return l}})();Dottoro.GetBox=function(a,b){var c=Dottoro.GetSize(a,b),d=Dottoro.GetLeftTopInClient(a,b);return{left:d.left,top:d.top,width:c.width,height:c.height,right:d.left+c.width,bottom:d.top+c.height}};
Dottoro.RepairScrollLength={};
Dottoro.GetScrollMax=function(a){var b=a.ownerDocument;if(!b)return{x:0,y:0};var c=Dottoro.GetSize(a,Dottoro.BOX_PADDING),d=Dottoro.GetSize(a,Dottoro.BOX_SCROLLBAR),e=d.height-c.height,d=d.width-c.width;if(!e&&!d)return{x:0,y:0};if(!Dottoro.RepairScrollLength.hasOwnProperty("width")){var f=Dottoro.CreateDummyElem(b,"div");f.style.position="absolute";f.style.overflow="scroll";f.style.width="100px";f.style.height="100px";var g=Dottoro.CreateDummyElem(b,"div");g.style.width="1000px";g.style.height="1000px";
f.appendChild(g);b.body.appendChild(f);var h=Dottoro.GetSize(a,Dottoro.BOX_PADDING),k=Dottoro.GetSize(a,Dottoro.BOX_SCROLLBAR),g=k.height-h.height,h=k.width-h.width;g&&h&&(Dottoro.RepairScrollLength.width=0,0==(f.scrollWidth-1E3)%g&&(Dottoro.RepairScrollLength.width=(f.scrollWidth-1E3)/h),Dottoro.RepairScrollLength.height=0,0==(f.scrollHeight-1E3)%h&&(Dottoro.RepairScrollLength.height=(f.scrollHeight-1E3)/g));b.body.removeChild(f)}b=a.scrollWidth-Dottoro.RepairScrollLength.width*d;a=a.scrollHeight-
Dottoro.RepairScrollLength.height*e;e=e?Math.max(b-c.width,0):0;c=d?Math.max(a-c.height,0):0;return{x:e,y:c}};Dottoro.GetClientWinWidth=function(a){a||(a=document);var b=Dottoro.GetZoomFactor(a);return a.documentElement.clientWidth/b};Dottoro.GetClientWinHeight=function(a){a||(a=document);var b=Dottoro.GetZoomFactor(a);return a.documentElement.clientHeight/b};
Dottoro.GetDocScrollLeft=function(a){a||(a=document);var b=Dottoro.GetWinFromDoc(a);if("pageXOffset"in b)return b.pageXOffset;b=Dottoro.GetZoomFactor(a);return a.documentElement.scrollLeft/b};Dottoro.GetDocScrollTop=function(a){a||(a=document);var b=Dottoro.GetWinFromDoc(a);if("pageYOffset"in b)return b.pageYOffset;b=Dottoro.GetZoomFactor(a);return a.documentElement.scrollTop/b};
Dottoro.GetDocScrollMax=function(a){a||(a=document);var b=Dottoro.GetWinFromDoc(a);if("scrollMaxX"in b){var c=b.scrollMaxX;a=b.scrollMaxY}else c=a.documentElement.scrollWidth-a.documentElement.clientWidth,a=a.documentElement.scrollHeight-a.documentElement.clientHeight;return{x:c,y:a}};
Dottoro.GetMouseClientCoords=function(a,b){var c="clientX"in a?{x:a.clientX,y:a.clientY}:{x:a.pageX-document.body.scrollLeft,y:a.pageY-document.body.scrollTop};if(Dottoro.isIEOlder(8)){b||(b=a.srcElement&&a.srcElement.ownerDocument?a.srcElement.ownerDocument:document);c.x-=b.documentElement.clientLeft;c.y-=b.documentElement.clientTop;var d=Dottoro.GetZoomFactor(b);1!=d&&(c.x/=d,c.y/=d)}return c};
Dottoro.CreateHTTPRequestObject=function(){var a=window.ActiveXObject&&"file:"===location.protocol;if(window.XMLHttpRequest&&!a)return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(b){}return null};Dottoro.IsRequestSuccessful=function(a,b){return 404==a.status&&b?!0:0==a.status||200<=a.status&&300>a.status||304==a.status||1223==a.status};Dottoro.SetText("ajax",{nosupport:"Sorry, your browser does not support this service!",connect_error:"Cannot get data from the server.\n Maybe no connection to the Internet is currently available or the target url is temporarily unavailable.\n\n (status code: %1, status text: %2)"});
Dottoro.Ajax={URLEncodeArray:function(a){var b="",c=!0,d;for(d in a)c||(b+="&"),c=!1,b=Dottoro.IsObject(a[d])?b+(encodeURIComponent(d)+"="+encodeURIComponent(Dottoro.JSONEncode(a[d]))):b+(encodeURIComponent(d)+"="+encodeURIComponent(""+a[d]));return b},PostRequest:function(a,b,c,d){c||(c={});c.method="POST";return Dottoro.Ajax.SendRequest(a,b,c,d)},GetRequest:function(a,b,c,d){c||(c={});c.method="GET";return Dottoro.Ajax.SendRequest(a,b,c,d)},SendRequest:function(a,b,c,d){var e={method:"POST",async:!1,
contentType:"application/x-www-form-urlencoded",headers:{},silent:"soft",callback:null,callbackOnError:null,responseType:"json"};if(c)for(var f in c)e[f]=c[f];f="get"==e.method.toLowerCase();d||(d=Dottoro.CreateHTTPRequestObject());if(!d)return!1===e.silent&&alert(Dottoro.GetText("ajax.nosupport")),Dottoro.Ajax.CallUserFunc(!0,{error:"cannot_create_http"},d,e),null;c=null;b&&(c=Dottoro.IsObject(b)?Dottoro.Ajax.URLEncodeArray(b):b);f&&(c&&(b=a.indexOf("#"),0<=b&&(a=a.substr(0,b)),a=0<=a.indexOf("?")?
a+("&"+c):a+("?"+c)),c=null);b=!0;try{d.open(e.method,a,e.async);d.setRequestHeader("Content-Type",e.contentType);for(var g in e.headers)d.setRequestHeader(g,e.headers[g]);e.async&&(d.onreadystatechange=function(){Dottoro.Ajax.OnReadyStateChanged(d,e)});d.send(c)}catch(h){b=!1}return b?e.async?d:Dottoro.Ajax.GetResponse(d,e):(Dottoro.Ajax.DisplayConnectError(d,e),Dottoro.Ajax.CallUserFunc(!0,{error:"cannot_connect"},d,e),null)},DisplayConnectError:function(a,b){!1===b.silent&&alert(Dottoro.GetTextF("ajax.connect_error",
a.status,a.statusText))},GetResponse:function(a,b){var c=void 0;if(a.responseText)switch(b.responseType){case "xml":c=a.responseXML;break;case "json":c=Dottoro.JSONDecode(a.responseText);break;default:c=a.responseText}if(!Dottoro.IsRequestSuccessful(a,"json"==b.responseType&&c&&c.allow_404)||!a.responseText)return Dottoro.Ajax.DisplayConnectError(a,b),Dottoro.Ajax.CallUserFunc(!0,{error:"no_response"},a,b),null;if("jscript"==b.responseType)return Dottoro.Eval(c),c;if("xml"==b.responseType){if(!c||
!c.documentElement){Dottoro.Ajax.CallUserFunc(!0,{error:"invalid_response"},a,b);return}Dottoro.Ajax.CallUserFunc(!1,c,a,b);return xmlDoc}if("json"==b.responseType){if(void 0!==c){if("error"in c)return Dottoro.Ajax.CallUserFunc(!0,c,a,b),"errordetails"in c&&!0!==b.silent?(alert(c.errordetails),null):c;if("body"in c)return Dottoro.Ajax.CallUserFunc(!1,c.body,a,b),c}Dottoro.Ajax.CallUserFunc(!0,{error:"invalid_response"},a,b)}else return Dottoro.Ajax.CallUserFunc(!1,c,a,b),c},OnReadyStateChanged:function(a,
b){4==a.readyState&&Dottoro.Ajax.GetResponse(a,b)},CallUserFunc:function(a,b,c,d){a?d.callbackOnError&&Dottoro.CallUserFunc(d.callbackOnError,[b,c,d]):d.callback&&Dottoro.CallUserFunc(d.callback,[b,c,d])}};window.onunload||(window.onunload=function(){});
Dottoro.Section=Dottoro.ClassEventsSettings.extend({classID:"section",init:function(){this._super();this.elem=null;this.layers={};this.layerId=0;this.layerListeners={};return this},listenLayers:function(){for(var a in this.layers)this.layerListeners[a]=this.layers[a].AddListener("finished",[this,"onLayerFinished"])},unlistenLayers:function(){for(var a in this.layers)this.layers[a].RemoveListener(this.layerListeners[a]);this.layerListeners={}},onLayerFinished:function(){this.checkFinishedLayers()},
checkFinishedLayers:function(){for(var a in this.layers)if(!this.layers[a].Finished())return;this.layersFinished()},layersFinished:function(){this.unlistenLayers()},notifyParentSection:function(a,b){return Dottoro.NotifyParentSection(this.elem,a,b)},onMessage:function(a,b){this.notifyParentSection(a,b)},Attach:function(a){this.elem=a;Dottoro._setData(a,"section/obj",this)},Detach:function(){this._super();this.unlistenLayers();this.layers={};this.elem&&(Dottoro._removeData(this.elem,"section/obj"),
this.elem=null)},GetSectionNode:function(){return this.elem},AddLayer:function(a){this.layerId++;this.layers[""+this.layerId]=a;return this.layerId},RemoveLayer:function(a){a in this.layers&&delete this.layers[a]}});Dottoro.NotifyParentSection=function(a,b,c){return a&&(a=Dottoro.GetHolderObject(a.parentNode,Dottoro.Section))?(a.onMessage(b,c),!0):!1};
Dottoro.Cookie={Set:function(a,b,c){a=a+"="+encodeURIComponent(b);c||(c={});"expires"in c&&(a+="; expires="+(Dottoro.IsString(c.expires)?c.expires:c.expires.toGMTString()));"path"in c||(c.path="/");null!=c.path&&(a+="; path="+c.path);"domain"in c&&(a+="; domain="+c.domain);document.cookie=a},Get:function(a){return Dottoro.Cookie.GetAll()[a]},GetAll:function(){for(var a={},b=document.cookie.split("; "),c=0;c<b.length;c++){var d=b[c],e=d.indexOf("=");if(0<=e)var f=d.substr(0,e),d=d.substr(e+1);else f=
d,d="";a[f]=decodeURIComponent(d)}return a},Remove:function(a){document.cookie=a+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"},RemoveAll:function(){var a=Dottoro.Cookie.GetAll(),b;for(b in a)Dottoro.Cookie.Remove(b)}};
Dottoro.History={events:new Dottoro.ClassEvents,loc:location.href,onPopState:function(a){Dottoro.History.loc!=location.href&&(Dottoro.History.events.FireEvent([a.type,a]),Dottoro.History.loc=location.href)},PushState:function(a,b,c){if(window.history&&history.pushState)try{history.pushState(a,b,c),Dottoro.History.loc=location.href}catch(d){}},AddListener:function(a,b){return Dottoro.History.events.AddListener(a,b)},RemoveListener:function(a){Dottoro.History.events.RemoveListener(a)}};
Dottoro.AddListener("popstate",Dottoro.History.onPopState,window,!1);
(function(){var a=[],b=null,c=!1,d=function(){c||null!==b&&(!document.body||"complete"!=document.readyState&&"loaded"!=document.readyState)||(c=!0,Dottoro.RemoveListener(a),a=[],null!==b&&(clearInterval(b),b=null),Dottoro.CallContentReadyHandlers(),Dottoro.CallReadyHandlers())};a.push(Dottoro.AddListener("load",d,window));document.addEventListener?a.push(Dottoro.AddListener("DOMContentLoaded",d,document)):document.attachEvent&&(a.push(Dottoro.AddListener("readystatechange",d,document)),b=setInterval(d,
1))})();(function(){if(document.documentElement){var a=["js"];if(!window.Dottoro_NoBrowserCss){var b={isIE:"ie",isFF:"ff",isOP:"opera",isOPMini:"opera_mini",isWK:"webkit",isIPhone:"iphone",isIPad:"ipad",isIPod:"ipod"},c;for(c in b)Dottoro[c]&&a.push("browser_"+b[c]);Dottoro.isIE&&(a.push("browser_ie"+Dottoro.ieVersion),Dottoro.isIEOlder(9)&&a.push("browser_ie8-"))}Dottoro.ModifyCSSClass(document.documentElement,a,"no-js")}})();
(function(){function a(a,b){var c=Dottoro._getData(a,"callbacks");return b?c?c[b]:null:c}function b(b){var c=[],f=a(b);if(f){for(var g in f)for(var h in f[g]){var k=f[g][h].detach;if(k){for(var l=0;l<c.length&&k!==c[l];l++);l==c.length&&(Dottoro.CallUserFunc(k,[b]),c.push(k))}}Dottoro._removeData(b,"callbacks")}}var c=0;Dottoro.StoreCallback=function(a,e,f,g){var h=Dottoro._getData(a,"callbacks");h||(h=Dottoro._setData(a,"callbacks",{}),Dottoro.ContentRemoved(a,b));a=h;a[e]||(a[e]={});h=""+c;a[e][h]=
{callback:f,detach:g};c++;return h};Dottoro.RemoveCallbacks=function(b,c){var f=a(b);f&&f[c]&&delete f[c]};Dottoro.RemoveCallback=function(b,c,f){(b=a(b,c))&&f in b&&delete b[f]};Dottoro.HasCallback=function(b,c,f){b=a(b,c);return f in b};Dottoro.CallCallbacks=function(b,c,f){var g=a(b,c);if(g){for(var h in g)Dottoro.CallUserFunc(g[h].callback,f);Dottoro.RemoveCallbacks(b,c)}}})();
(function(){function a(){if(window.YT&&window.YT.Player)f=!0;else if(!e){e=!0;var a=window.onYouTubePlayerAPIReady;window.onYouTubePlayerAPIReady=function(){f=!0;for(var c=0;c<g.length;c++)b(g[c]);g=[];a&&a()};var c=document.getElementsByTagName("script")[0],d=document.createElement("script");d.src="//www.youtube.com/player_api";c.parentNode.insertBefore(d,c)}}function b(a){if(!Dottoro._hasData(a,"player")){var b=new YT.Player(a,{events:{onReady:function(){var b=Dottoro._getData(a,"player");Dottoro._setData(a,
"ready",!0);Dottoro.CallCallbacks(a,"ready",[b,a]);Dottoro.ContentRemoved(a,c)}}});Dottoro._setData(a,"player",b)}}function c(a){for(var b=g.length-1;0<=b;b--)g[b]==a&&g.splice(b,1);if(b=Dottoro._getData(a,"player")){a.src="";try{b.destroy()}catch(c){}Dottoro._removeData(a,"player")}}function d(d,e){if(Dottoro._getData(d,"ready")){var l=Dottoro._getData(d,"player");Dottoro.CallUserFunc(e,[l,d]);return""}l=Dottoro.StoreCallback(d,"ready",e,c);a();f?b(d):g.push(d);return Dottoro.HasCallback(d,"ready",
l)?l:""}var e=!1,f=!1,g=[];Dottoro.YouTube={Ready:function(a,b){return d(a,b)},Command:function(a,b){d(a,function(a){a[b]()})},Play:function(a){this.Command(a,"playVideo")},Pause:function(a){this.Command(a,"pauseVideo")},Stop:function(a){this.Command(a,"stopVideo")}}})();
(function(){function a(a){if("http://player.vimeo.com"==a.origin){var b="",e=null;try{e=JSON.parse(a.data),b=e.event||e.method}catch(f){}if(b&&"ready"==b){var g=null;e.player_id&&(e=document.getElementById(e.player_id))&&e.contentWindow==a.source&&(g=e);if(!g)for(var e=document.body.getElementsByTagName("iframe"),h=0;h<e.length;h++)if(e[h].contentWindow==a.source){g=e[h];break}g&&"ready"==b&&(Dottoro._setData(g,"ready",!0),Dottoro.CallCallbacks(g,"ready",[g]))}}}function b(a,b){return Dottoro._getData(a,
"ready")?(Dottoro.CallUserFunc(b,[a]),""):Dottoro.StoreCallback(a,"ready",b,null)}window.addEventListener?window.addEventListener("message",a,!1):window.attachEvent("onmessage",a);Dottoro.Vimeo={Ready:function(a,d){return b(a,d)},Command:function(a,d){b(a,function(a){data=JSON.stringify({method:d,value:null});a.contentWindow.postMessage(data,"http://player.vimeo.com")})},Play:function(a){this.Command(a,"play")},Pause:function(a){this.Command(a,"pause")}}})();
(function(){function a(a){var b=Dottoro._getData(a,"type");if(!b){b="normal";if(window.postMessage){var c=a.src;c&&(f.test(c)?0<=c.indexOf("enablejsapi=1")&&(b="youtube"):g.test(c)&&(b="vimeo"))}Dottoro._setData(a,"type",b)}return b}function b(b){switch(a(b)){case "youtube":return Dottoro.YouTube;case "vimeo":return Dottoro.Vimeo}return null}function c(a,b){Dottoro._setData(b,"ready",!0);d(b);Dottoro.CallCallbacks(b,"ready",[b])}function d(a){(a=Dottoro._removeData(a,"readyListener"))&&Dottoro.RemoveListener(a)}
function e(a){d(a)}var f=/^(http(s)?\:)?\/\/www.youtube.com/,g=/^(http(s)?\:)?\/\/player.vimeo.com/;Dottoro.IFrameApi={Ready:function(a,d){var f=b(a);if(f)return f.Ready(a,d);!a.src||"about:blank"==a.src||Dottoro._getData(a,"ready")?(Dottoro.CallUserFunc(d,[a]),f=""):(f=Dottoro.StoreCallback(a,"ready",d,e),Dottoro._hasData(a,"readyListener")||Dottoro._setData(a,"readyListener",Dottoro.AddListener("load",c,a)),f=Dottoro.HasCallback(a,"ready",f)?f:"");return f},Command:function(b,c){switch(a(b)){case "youtube":Dottoro.YouTube.Command(b,
c);break;case "vimeo":Dottoro.Vimeo.Command(b,c)}},Play:function(a){var c=b(a);return c?(c.Play(a),!0):!1},Pause:function(a){var c=b(a);return c?(c.Pause(a),!0):!1}}})();
(function(){function a(a,c,f){Dottoro._setData(f,"ready",!0);b(f);Dottoro.CallCallbacks(f,"ready",[f])}function b(a){(a=Dottoro._removeData(a,"readyListener"))&&Dottoro.RemoveListener(a)}function c(a){b(a)}Dottoro.ImageApi={Ready:function(b,e){var f;if(!b.src||Dottoro._getData(b,"ready"))Dottoro.CallUserFunc(e,[b]),f="";else{f=Dottoro.StoreCallback(b,"ready",e,c);if(!Dottoro._hasData(b,"readyListener")){var g=b;Dottoro.isIE&&(g=new Image,g.src=b.src);var h=[];h.push(Dottoro.AddListener("load",a,b,
{},b));h.push(Dottoro.AddListener("error",a,g,{},b));Dottoro._setData(b,"readyListener",h)}f=Dottoro.HasCallback(b,"ready",f)?f:""}return f}}})();
(function(){function a(b,c){if(b){var d=b.nodeName.toLowerCase();switch(d){case "video":case "audio":if(c in b)return b[c](),!0;break;case "object":case "embed":if("playVideo"in b)try{b["play"==c?"playVideo":"pauseVideo"]()}catch(e){}else if("api"in b)try{b.api("play"==c?"play":"pause")}catch(f){}else{if("object"==d&&(d=b.getElementsByTagName("embed"),d.length))return a(d[0],c);break}return!0;case "iframe":return Dottoro.IFrameApi["play"==c?"Play":"Pause"](b)}}return!1}Dottoro.MediaApi={Play:function(b){return a(b,
"play")},Pause:function(b){return a(b,"pause")},Stop:function(b){return a(b,"stop")},Ready:function(a,c){if("iframe"==a.nodeName.toLowerCase())return Dottoro.IFrameApi.Ready(a,c);Dottoro.CallUserFunc(c,[a]);return""}}})();
(function(){Dottoro.Poster=Dottoro.Class.extend({init:function(a){this.hidden=!1;this.nextChild=null;this.listeners=[];this.collect(a)},collect:function(a){if(a){this.poster=a;Dottoro._setData(a,"poster",this);Dottoro.ContentRemoved(a,[this,"Detach"]);var b=Dottoro.CreateElement("div",a,{className:"poster-button"});this.listeners.push(Dottoro.AddListener("click",[this,"onClickPoster"],b));this.listeners.push(Dottoro.AddListener("click",Dottoro.CancelEvent,a));Dottoro.CreateElement("span",b,{className:"poster-button-icon"});
if(a=Dottoro.NextElementSibling(a)){for(b=a.firstChild;b&&8!=b.nodeType&&3==b.nodeType;)b=b.nextSibling;8==b.nodeType&&(this.owner=a,this.comment=b,Dottoro._setData(a,"poster",this))}}},initCssEx:function(){if(!this.cssEx&&Dottoro.CssEx){var a=Dottoro.CssEx.GetHolderDetails(this.poster);a&&!a.hidden&&(this.cssEx=a.cssEx)}},onClickPoster:function(a){this.HidePoster(!0);Dottoro.CancelEvent(a)},HidePoster:function(a){if(this.hidden==a)return!0;if(!this.poster||!this.owner)return!1;this.initCssEx();if(a&&
this.comment){var b=Dottoro.DecodeCommentNodeText(this.comment);this.comment=null;b&&(Dottoro.SetElemHtml(this.owner,b),Dottoro.CallContentReadyHandlers(this.owner,"zero"),this.cssEx&&this.cssEx.Attach(this.owner,!1),Dottoro.CallContentReadyHandlers(this.owner,"nonzero"))}this.hidden=a;this.cssEx&&this.cssEx.SetChildActive(a?this.owner:this.poster);a?(!this.owner.parentNode!==this.poster&&(this.nextChild?this.poster.parentNode.insertBefore(this.owner,this.nextChild):this.poster.parentNode.appendChild(this.owner)),
Dottoro.ModifyCSSClass(this.poster,"hidden","visible"),Dottoro.ModifyCSSClass(this.owner,"visible","hidden"),this.Start()):(this.nextChild=Dottoro.NextElementSibling(this.owner),a=Dottoro.FirstElementChild(this.owner),Dottoro.MediaApi.Pause(a)?Dottoro.ModifyCSSClass(this.owner,"hidden","visible"):Dottoro.RemoveNode(this.owner),Dottoro.ModifyCSSClass(this.poster,"visible","hidden"));Dottoro.NotifyParentSection(this.owner,"mediacreatedbyposter");this.cssEx?this.cssEx.Update():Dottoro.NotifyParentSection(this.owner,
"contentsizechanged")},Start:function(){if(this.owner){for(var a=null,b=["video","audio","iframe","object","embed"],c=0;c<b.length;c++){var d=this.owner.getElementsByTagName(b[c]);d.length&&(a=d[0])}a&&Dottoro.MediaApi.Play(a)}},Detach:function(){this.comment=this.owner=this.poster=null;Dottoro.RemoveListener(this.listeners);this.listeners=[]}});Dottoro.ContentReady(function(a){a=Dottoro.GetElemsByClass("poster-wrapper",a);for(var b=a.length,c=0;c<b;c++)new Dottoro.Poster(a[c])});Dottoro.ShowPosters=
function(a){a=Dottoro.GetElemsByClass("poster-wrapper",a);for(var b=a.length,c=0;c<b;c++){var d=Dottoro._getData(a[c],"poster");d&&d.HidePoster(!1)}}})();
(function(){var a=Dottoro.Class.extend({init:function(a,c,d){this.holder=c;this.callback=a;this.medias={};this.idx=0;if(d)for(a=0;a<d.length;a++){var e=new Image;this.initMedia(e,"image",!1)&&e.setAttribute("src",d[a])}d=c.getElementsByTagName("img");for(a=0;a<d.length;a++)e=d[a],!e.complete&&e.src&&"about:blank"!=e.src&&0!=e.src.indexOf("data:")&&this.initMedia(e,"image",!0);d=c.getElementsByTagName("iframe");for(a=0;a<d.length;a++)e=d[a],this.initMedia(e,"iframe",!0);this.initialized=!0;Dottoro.IsObjEmpty(this.medias)&&
this.ready()},initMedia:function(a,c,d){var e=""+this.idx;this.medias[e]={media:a};this.idx++;var f=this;"image"==c&&Dottoro.ImageApi.Ready(a,function(){f.onMediaReady(e)});"iframe"==c&&Dottoro.IFrameApi.Ready(a,function(){f.onMediaReady(e)});return e in this.medias?(d&&(f=this,this.medias[e].removeHandler=Dottoro.ContentRemoved(a,function(){f.mediaRemoved(e)})),!0):!1},mediaRemoved:function(a){a in this.medias&&(delete this.medias[a],this.initialized&&Dottoro.IsObjEmpty(this.medias)&&this.ready())},
onMediaReady:function(a){a in this.medias&&(this.medias[a].removeHandler&&Dottoro.RemoveContentRemovedHandler(this.medias[a].removeHandler),delete this.medias[a],this.initialized&&Dottoro.IsObjEmpty(this.medias)&&this.ready())},ready:function(a){Dottoro.CallUserFunc(this.callback,[this.holder])},Destroy:function(){for(var a in this.medias)this.medias[a].removeHandler&&Dottoro.RemoveContentRemovedHandler(this.medias[a].removeHandler);this.medias={};this.readyTimer&&clearTimeout(this.readyTimer)}});
Dottoro.Medias={SetHiddenSrcToSrc:function(a){for(var c="img audio video iframe embed source object".split(" "),d=0;d<c.length;d++)for(var e=a.getElementsByTagName(c[d]),f=0;f<e.length;f++){var g=e[f],h=g.getAttribute("data-dottoro_src_hidden");h&&("img"==c[d]&&(Dottoro._setData(g,"load_listener",Dottoro.AddListener("load",[this,"RemoveLoadingClass"],g)),Dottoro.ModifyCSSClass(g,"loading",""),Dottoro.isIE&&(g.src="",Dottoro._setData(g,"cssex/checkheight",1))),g.src=h,g.removeAttribute("data-dottoro_src_hidden"),
Dottoro._setData(g,"dynamicSrc",h))}},RemoveLoadingClass:function(a,c){Dottoro.ModifyCSSClass(c,"","loading");Dottoro.RemoveListener(Dottoro._getData(c,"load_listener"))},Preload:function(b,c,d){return new a(b,c,d)},Pause:function(a){for(var c=["audio","video","iframe","embed","object"],d=0;d<c.length;d++)for(var e=a.getElementsByTagName(c[d]),f=0;f<e.length;f++)Dottoro.MediaApi.Pause(e[f])},HasMedia:function(a){for(var c=["audio","video","iframe","embed","object"],d=0;d<c.length;d++)if(0<a.getElementsByTagName(c[d]).length)return!0;
return!1}}})();
(function(){function a(){var a=d();g&&Dottoro.ModifyCSSClass(g,"","fullscreen_on");(g=a)?Dottoro.ModifyCSSClass(g,"fullscreen_on"):f&&(Dottoro.RemoveListener(f),f=null)}function b(b){var c=b.requestFullscreen||b.msRequestFullscreen||b.webkitRequestFullscreen||b.mozRequestFullScreen;c&&(null==e&&(e="","onfullscreenchange"in document?e="fullscreenchange":"onmozfullscreenchange"in document?e="mozfullscreenchange":"onwebkitfullscreenchange"in document?e="webkitfullscreenchange":"onmsfullscreenchange"in document&&
(e="MSFullscreenChange")),e&&!f&&(f=Dottoro.AddListener(e,a,document)),c.call(b))}function c(){var a=document.cancelFullscreen||document.exitFullscreen||document.msExitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen;a&&a.call(document)}function d(){return document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement}var e=null,f=null,g=null;Dottoro.FullscreenApi={IsSupported:function(){return document.fullscreenEnabled||
document.msFullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled},Make:function(a){b(a)},Exit:function(a){d()==a&&c()},Toggle:function(a){d()==a?c():b(a)}};document.documentElement&&Dottoro.ModifyCSSClass(document.documentElement,Dottoro.FullscreenApi.IsSupported()?"fullscreen_support":"no_fullscreen_support")})();
(function(){function a(a,b){if(!b.tag)return null;if(b.tag==a)return b;if(Dottoro.IsAncestorOf(b.tag,a)){for(var c=a.parentNode;!Dottoro._hasData(c,"cssex/flexHeight");)c=c.parentNode;return Dottoro._getData(c,"cssex/flexHeight")}return null}function b(a,b,c,d){var e=Dottoro._getData(a,"cssex/flexHeight");if(e)return e;e={tag:a,parentNode:b};Dottoro.Extend(e,d);Dottoro._setData(a,"cssex/flexHeight",e);if(c)for(c=b.firstChild;c;){if(Dottoro.IsAncestorOf(a,c.tag)){d=c.previousSibling;do e.firstChild||
(e.firstChild=c,d=c.previousSibling),c.previousSibling=e.lastChild,c.previousSibling&&(c.previousSibling.nextSibling=c),e.lastChild=c,c.parentNode=e,c=c.nextSibling;while(c&&Dottoro.IsAncestorOf(a,c.tag));e.lastChild.nextSibling=null;d?d.nextSibling=c:b.firstChild=c;c?c.previousSibling=d:b.lastChild=d}c&&(c=c.nextSibling)}b.lastChild?(b.lastChild.nextSibling=e,e.previousSibling=b.lastChild):b.firstChild=e;return b.lastChild=e}function c(c,d,e){var f=Dottoro.GetElemsByClass("js-flex-height",c),g=0;
f[0]&&f[0]==d.tag&&g++;for(var h=d;g<f.length;){for(var k=f[g];!Dottoro.IsAncestorOf(h.tag,k);)h=h.parentNode;h=b(k,h,!1,{flexHeight:!0});g++}for(var h={img:[],video:[],embed:[],object:[],iframe:[]},k=[],l=c;;){if(Dottoro.HasCSSClass(l,"js-flex-height-media-on")){k=[c];break}if(l==e.tag)break;l=l.parentNode}k.length||(k=Dottoro.GetElemsByClass("js-flex-height-media-on",c));for(g=0;g<k.length;g++){e=k[g];var m=e.nodeName.toLowerCase();h[m]&&h[m].push(e);for(m in h)for(f=e.getElementsByTagName(m),l=
0;l<f.length;l++)h[m].push(f[l])}for(m in h)for(f=h[m],g=0;g<f.length;g++){e=f[g];if("object"!=m||!Dottoro._getData(e,"cssex/flexHeightIgnore"))a:if(k=e,l=d,!Dottoro.HasCSSClass(k,"js-no-flex-height")){var n=Dottoro._getData(k,"cssex/mediaHolder");if(n&&(k=n,Dottoro.HasCSSClass(k,"js-no-flex-height")))break a;(l=a(k,l))&&b(k,l,!0,{flexHeight:!0})}"embed"==m&&"object"==e.parentNode.nodeName.toLowerCase()&&Dottoro._setData(e.parentNode,"cssex/flexHeightIgnore",!0)}f=Dottoro.GetElemsByClass("js-flex-height-layer",
c);for(g=0;g<f.length;g++)e=f[g],(m=a(e,d))&&b(e,m,!0,{flexHeight:!1});f=Dottoro.GetElemsByClass("js-set-parent-height",c);for(g=0;g<f.length;g++)if(e=f[g],l=e.parentNode,!Dottoro._getData(l,"cssex/flexHeight")&&(c=a(l,d)))c=b(l,c,!0,{flexHeight:!1}),e=b(e,c,!0,{flexHeight:!1}),c.highlightedChild=e,e.highlighted=!0}function d(a){if(!Dottoro._getData(a.tag,"cssex/disabled"))for(Dottoro._getData(a.tag,"cssex/processed")||Dottoro.CssEx.ResetHeight("cssex_flexheight",a.tag),a=a.firstChild;a;)d(a),a=a.nextSibling}
function e(a,b,c){if(b=Dottoro.CssEx.SetHeight("cssex_flexheight",a.tag,b)){var d=b.child&&b.child.width;if(b.width||d)return Dottoro._setData(a.tag,"cssex/processed",!0),c.push(a.tag),"width_changed"}return"ok"}function f(a,b,c,d){if(a.flexHeight&&!Dottoro._getData(a.tag,"cssex/processed")){var f=b.tag;b=Dottoro._getData(f,"cssex/overflow");void 0==b&&(b=Dottoro.GetVertOverflow(f),Dottoro._setData(f,"cssex/overflow",b),d.push(f));if(0<b&&(f=Dottoro.GetPixelLength(a.tag,"height"),f=Math.max(0,f-b),
b=e(a,f,c),"width_changed"==b))return b}b=g(a,c,d);return"width_changed"==b?b:"ok"}function g(a,b,c){if(Dottoro._getData(a.tag,"cssex/disabled"))return"disabled";if(a.highlightedChild&&!Dottoro._getData(a.tag,"cssex/processed")){var d=f(a.highlightedChild,a.parentNode,b,c);if("width_changed"==d)return d;d=e(a,a.highlightedChild.tag.offsetHeight,b);if("width_changed"==d)return d}for(var g=a.firstChild;g;){if(!g.highlighted&&(d=f(g,a,b,c),"width_changed"==d))return d;g=g.nextSibling}return"ok"}function h(a,
b){var c=Dottoro._getData(a,"cssex/mediaHolder");if(c&&(a=c,Dottoro.HasCSSClass(a,"js-no-aspect-ratio")))return;if(null==Dottoro._getData(a,"cssex/aspectRatio")){var c=a,d=Dottoro._getData(c,"cssex/aspectRatio");if(!d){d=c.getAttribute("data-aspect_ratio");if(!d){var e=parseFloat(c.getAttribute("width")),f=parseFloat(c.getAttribute("height"));0<e&&0<f&&(d=e/f)}e=c.nodeName.toLowerCase();d||"img"!=e||(d=k(c))||(d="wait");d&&(Dottoro._setData(c,"cssex/aspectRatio",d),Dottoro._setData(c,"cssex/aspectRatioUpdateH",
"img"!=e&&"video"!=e||Dottoro.HasCSSClass(c,"js-update-height")))}d&&b.push(a)}}function k(a){var b;if("naturalWidth"in a)b=a.naturalWidth,a=a.naturalHeight;else{var c=new Image;c.src=a.src;b=c.width;a=c.height}return 0<b&&0<a?b/a:0}function l(a){var b=Dottoro._getData(a,"cssex/aspectRatio");"wait"===b&&(b=k(a))&&Dottoro._setData(a,"cssex/aspectRatio",b);return b}function m(a,b){if(Dottoro._getData(a,"cssex/disabled"))return!1;var c=a.parentNode;if(c){for(var d=Dottoro.GetSize(c,Dottoro.BOX_INNER),
e={width:0,height:0},c=Dottoro.FirstElementChild(c);c;){if(c!=a&&!Dottoro.HasCSSClass(c,"clear")&&!Dottoro.HasCSSClass(c,"js-not-col")){var f=Dottoro.GetSize(c);e.width+=f.width;e.height+=f.height}c=Dottoro.NextElementSibling(c)}c=b?"width":"height";d=d[c]-e[c];e=0;0<d&&(e=Dottoro.GetSize(a),d-=e[c],e=Dottoro.GetPixelLength(a,c)+d,0>e&&(e=0));return b?(Dottoro.SetStyle("cssex_fillavailhoriz",a,"width",e+"px"),{width:!0}):Dottoro.CssEx.SetHeight("cssex_fillavailvert",a,e)}return!1}function p(a,b){for(var c=
[],d=0;d<b.length;d++)Dottoro.IsAncestorOf(a,b[d])||c.push(b[d]);return c}function n(a,b,c){for(var d=0;d<b.length;d++)Dottoro.IsAncestorOf(a,b[d])&&Dottoro._setData(b[d],"cssex/disabled",!c)}var q=Dottoro.Class.extend({init:function(){this.root={tag:null}},Build:function(a){this.root.tag=a;Dottoro._setData(a,"cssex/flexHeight",this.root);c(a,this.root,this.root)},Join:function(b){var d=a(b,this.root);d&&c(b,d,this.root)},Remove:function(b){var c=a(b,this.root);if(c)if(c.tag==b)c==this.root?this.root=
{tag:null}:(c.previousSibling?c.previousSibling.nextSibling=c.nextSibling:c.parentNode.firstChild=c.nextSibling,c.nextSibling?c.nextSibling.previousSibling=c.previousSibling:c.parentNode.lastChild=c.previousSibling);else{var d=c.firstChild;if(d){delete c.firstChild;for(delete c.lastChild;d;){if(Dottoro.IsAncestorOf(b,d.tag))Dottoro._removeData(d.tag,"cssex/flexHeight");else{if(d.previousSibling=c.lastChild)c.lastChild.nextSibling=d;c.firstChild||(c.firstChild=d);c.lastChild=d}d=d.nextSibling}c.lastChild&&
(c.lastChild.nextSibling=null)}}},Enable:function(b,c){var d=a(b,this.root);if(d&&d.tag!=b)for(d=d.firstChild;d;)Dottoro.IsAncestorOf(b,d.tag)&&Dottoro._setData(d.tag,"cssex/disabled",!c),d=d.nextSibling},SetHeights:function(a){if(this.root.tag){var b=[];g(this.root,a,b);for(a=0;a<b.length;a++)Dottoro._removeData(b[a],"cssex/overflow")}},Reset:function(){this.root.tag&&d(this.root)}}),r=Dottoro.Class.extend({init:function(){this.filter={tags:{},urls:[]};this.options={uninitializedMediaFix:!0};this.elemIdx=
0;this.elems={}},Filter:function(a,b){a=Dottoro.IsArray(a)?a:[a];for(var c=0;c<a.length;c++)this.filter.tags[a[c]]=1;b=Dottoro.IsArray(b)?b:[b];for(c=0;c<b.length;c++)this.filter.urls.push(Dottoro.IsString(b[c])?new RegExp(b[c]):b[c])},SetOptions:function(a){for(var b in a)this.options[b]=a[b]},IframeMatch:function(a){for(var b=0;b<this.filter.urls.length;b++)if(this.filter.urls[b].test(a))return!0;return!1},Collect:function(a){for(var b=[],c=Dottoro.GetElemsByClass("js-scale-down-to-fit",a),d=0;d<
c.length;d++){var e=c[d],f=e.parentNode;f&&(Dottoro._setData(f,"cssex/aspectRatio","scale"),Dottoro._setData(f,"cssex/scaleElem",e),b.push(f))}c=Dottoro.GetElemsByClass("js-keep-aspect-ratio",a);for(d=0;d<c.length;d++)e=c[d],f=e.className?" "+e.className+" ":"",0>f.indexOf(" js-no-aspect-ratio ")&&h(e,b);for(var g=["img","video","embed","object","iframe"],d=0;d<g.length;d++)for(var k=g[d],c=a.getElementsByTagName(k),l=0;l<c.length;l++)e=c[l],f=e.className?" "+e.className+" ":"",0>f.indexOf(" js-no-aspect-ratio ")&&
0>f.indexOf(" mejs-shim ")&&("img"==k||"video"==k||k in this.filter.tags||"iframe"==k&&this.IframeMatch(e.src))&&h(e,b);return b},Store:function(a){a=Dottoro.IsArray(a)?a:[a];for(var b=0;b<a.length;b++){var c=a[b],d=""+this.elemIdx;this.elemIdx++;this.elems[d]=c;Dottoro._setData(c,"cssex/aspectRatioId",d)}},CollectAndStore:function(a){a=this.Collect(a);this.Store(a);return a},Remove:function(a){var b=[],c;for(c in this.elems)Dottoro.IsAncestorOf(a,this.elems[c])&&b.push(c);for(a=0;a<b.length;a++)this.Detach(this.elems[b[a]])},
Detach:function(a){var b=Dottoro._getData(a,"cssex/aspectRatioId");b&&(Dottoro._removeData(a,"cssex/aspectRatio"),Dottoro._removeData(a,"cssex/aspectRatioId"),delete this.elems[b])},Enable:function(a,b){for(var c in this.elems)Dottoro.IsAncestorOf(a,this.elems[c])&&Dottoro._setData(this.elems[c],"cssex/disabled",!b)},UpdateHeights:function(){for(var a in this.elems)Dottoro.CssEx.UpdateHeight("cssex_aspectratio",this.elems[a],{uninitializedMedia:this.options.uninitializedMediaFix})},UpdateScales:function(){for(var a in this.elems){var b=
this.elems[a];if(!Dottoro._getData(b,"cssex/disabled")&&"scale"==Dottoro._getData(b,"cssex/aspectRatio")){var c=Dottoro._getData(b,"cssex/scaleElem");if(c&&!Dottoro._getData(c,"cssex/disabled")){var b=Dottoro.GetSize(b,Dottoro.BOX_INNER),d=c.offsetWidth;b.width<d&&(b=b.width/d,Dottoro.SetStyle("cssex_aspectratio",c,"trafo",{scale:{x:b,y:b},origin:{x:0,y:0}}))}}}},Reset:function(){for(var a in this.elems)Dottoro.CssEx.ResetHeight("cssex_aspectratio",this.elems[a])}}),t={aspectRatio:{},flexHeight:!0,
fillAvailSpace:!0,setParentWidth:!0,setHeight:!0,vertCenter:!0,initParentWidth:!0,uninitializedMediaFix:!0},s=Dottoro.ClassEvents.extend({init:function(a,b){this._super();this.root=a;this.owner=b;this.flexHeightTree=new q;this.aspectRatio=new r;this.fillAvailHoriz=[];this.fillAvailVert=[];this.initParentWidthElems=[];this.setParentWidthElems=[];this.setHeightElems=[];this.vertCenterElems=[];this.ie8MaxWidthFixElems=[];this.mediaElementJsElems=[];this.options={};for(var c in t)this.options[c]=t[c];
this.hiddenNodes=[]},getElemNaturalWidth:function(a){var b=Dottoro._getData(a,"cssex/naturalWidth")||0;if(b)return b;var c=a.parentNode;if(c){for(var d=c.firstChild;d;)d!=a&&d.style&&(Dottoro._setData(d,"cssex/origDisplay",d.style.display),d.style.display="none"),d=d.nextSibling;var d={width:"auto",maxWidth:"none",minWidth:"0"},e;for(e in d)Dottoro._setData(a,"cssex/orig"+e,a.style[e]),a.style[e]=d[e],Dottoro._setData(c,"cssex/orig"+e,c.style[e]),c.style[e]=d[e];c.style.width="100000px";b=Dottoro.GetPixelLength(a,
"width");Dottoro._setData(a,"cssex/naturalWidth",b);for(e in d)a.style[e]=Dottoro._getData(a,"cssex/orig"+e),c.style[e]=Dottoro._getData(c,"cssex/orig"+e);for(d=c.firstChild;d;)d!=a&&d.style&&(d.style.display=Dottoro._getData(d,"cssex/origDisplay")),d=d.nextSibling}return b},collect:function(a,b,c){b=b||this.options;this.FireEvent(c?"hidden_collect_start":"collect_start",a);for(var d=["embed","object","iframe"],e=Dottoro.GetElemsByClass("js-media-wrapper",a),f=0;f<e.length;f++)for(var g=e[f],f=0;f<
d.length;f++)for(var h=g.getElementsByTagName(d[f]),k=0;k<h.length;k++){var l=h[k];if(!Dottoro._getData(l,"cssex/mediaHolder")){Dottoro._setData(l,"cssex/mediaHolder",g);var m=parseFloat(l.getAttribute("width")),l=parseFloat(l.getAttribute("height"));0<m&&0<l&&g.setAttribute("data-aspect_ratio",m/l)}}if(Dottoro.isIEOlder(9)){d=["img","embed","object","iframe"];e=[];for(f=0;f<d.length;f++)for(h=a.getElementsByTagName(d[f]),k=0;k<h.length;k++)e.push(h[k]);h=Dottoro.GetElemsByClass("js-ie8-maxwfix",
a);for(k=0;k<h.length;k++)e.push(h[k]);d=/^-?\d+(\.\d+)?%$/;for(f=0;f<e.length;f++)l=e[f],h=Dottoro.GetStyle(l,"maxWidth"),d.test(h)&&(h=parseFloat(h)/100,Dottoro._setData(l,"cssex/ie8MaxWidth",h),l.style.maxWidth="none",this.ie8MaxWidthFixElems.push(l))}h=Dottoro.GetElemsByClass("mejs-container",a);for(f=0;f<h.length;f++)this.mediaElementJsElems.push(h[f]);b.flexHeight&&(a==this.root?this.flexHeightTree.Build(this.root):this.flexHeightTree.Join(a));b.aspectRatio&&this.aspectRatio.CollectAndStore(a);
if(b.fillAvailSpace){h=Dottoro.GetElemsByClass("js-fill-avail-horiz-space",a);for(f=0;f<h.length;f++)this.fillAvailHoriz.push(h[f]);h=Dottoro.GetElemsByClass("js-fill-avail-vert-space",a);for(f=0;f<h.length;f++)l=h[f],l.parentNode&&!Dottoro._getData(l.parentNode,"cssex/fillAvailVertChild")&&(this.fillAvailVert.push(l),Dottoro._setData(l.parentNode,"cssex/fillAvailVertChild",l))}if(b.setParentWidth)for(h=Dottoro.GetElemsByClass("js-set-parent-width",a),f=0;f<h.length;f++)this.setParentWidthElems.push(h[f]);
if(b.setHeight)for(h=Dottoro.GetElemsByClass("js-set-height",a),f=0;f<h.length;f++)this.setHeightElems.push(h[f]);if(b.vertCenter)for(h=Dottoro.GetElemsByClass("js-vert-center",a),f=0;f<h.length;f++)this.vertCenterElems.push(h[f]);if(b.initParentWidth)for(h=Dottoro.GetElemsByClass("js-init-parent-width",a),f=0;f<h.length;f++)this.initParentWidthElems.push(h[f]);this.FireEvent(c?"hidden_collect_end":"collect_end",a)},GetOwner:function(){return this.owner},Build:function(a,b,c){if(b)for(var d in this.options)c&&
"aspectRatio"==d||(this.options[d]=!1);if(a)for(d in a)this.options[d]=a[d];this.FireEvent("build_start");a={tags:[],urls:[]};if(this.options.aspectRatio)for(d in this.options.aspectRatio)a[d]=this.options.aspectRatio[d];this.aspectRatio.Filter(a.tags,a.urls);this.aspectRatio.SetOptions({uninitializedMediaFix:this.options.uninitializedMediaFix});this.collect(this.root);this.FireEvent("build_end")},Reset:function(a,b){var c=b?{}:{aspectRatio:!0,flexHeight:!0,fillAvailHorizSpace:!0,fillAvailVertSpace:!0,
setParentWidth:!0,setHeight:!0,vertCenter:!0};if(a)for(var d in a)c[d]=a[d];this.FireEvent("reset_start",c);this.resetMaxWElemSizesIE8();if(c.setParentWidth)for(d=0;d<this.setParentWidthElems.length;d++){var e=this.setParentWidthElems[d];Dottoro._getData(e,"cssex/disabled")||(e=this.setParentWidthElems[d].parentNode)&&Dottoro.RestoreStyle("cssex_setParentWidth",e,"width")}if(c.fillAvailHorizSpace)for(d=0;d<this.fillAvailHoriz.length;d++)e=this.fillAvailHoriz[d],Dottoro._getData(e,"cssex/disabled")||
Dottoro.RestoreStyle("cssex_fillavailhoriz",e,"width");c.aspectRatio&&this.aspectRatio.Reset();if(c.fillAvailVertSpace)for(d=0;d<this.fillAvailVert.length;d++)Dottoro.CssEx.ResetHeight("cssex_fillavailvert",this.fillAvailVert[d]);c.flexHeight&&this.flexHeightTree.Reset();if(c.setHeight)for(d=0;d<this.setHeightElems.length;d++)Dottoro.CssEx.ResetHeight("cssex_setheight",this.setHeightElems[d]);if(c.vertCenter)for(d=0;d<this.vertCenterElems.length;d++)e=this.vertCenterElems[d],Dottoro._getData(e,"cssex/disabled")||
Dottoro.CssEx.RestoreCenter(!1,"vertcenter",e);if(c.aspectRatio)for(d=0;d<this.mediaElementJsElems.length;d++)if(e=this.mediaElementJsElems[d],e.player&&!Dottoro._getData(e,"cssex/disabled")){var f=e.getAttribute("data-dottoro_init_width"),g=e.getAttribute("data-dottoro_init_height");f&&g&&(Dottoro.SetStyle("cssex_mejs",e,"width",f),Dottoro.SetStyle("cssex_mejs",e,"height",g))}this.FireEvent("reset_end",c)},resetMaxWElemSizesIE8:function(){if(Dottoro.isIEOlder(9)){for(var a=0;a<this.ie8MaxWidthFixElems.length;a++){var b=
this.ie8MaxWidthFixElems[a];Dottoro.RestoreStyle("cssex_fiximgsize",b,"width");Dottoro.RestoreStyle("cssex_fiximgsize",b,"height")}this.forceIE8HeightRecalc()}},fixMaxWElemSizesIE8:function(){if(Dottoro.isIEOlder(9)){this.resetMaxWElemSizesIE8();for(var a=0;a<this.ie8MaxWidthFixElems.length;a++){var b=this.ie8MaxWidthFixElems[a];Dottoro.RestoreStyle("cssex_fiximgsize",b,"width");Dottoro.RestoreStyle("cssex_fiximgsize",b,"height");var c=Dottoro._getData(b,"cssex/ie8MaxWidth"),d=Dottoro.GetSize(b.parentNode,
Dottoro.BOX_INNER),e=0;d.width*c<b.offsetWidth?(e=d.width*c,Dottoro.SetStyle("cssex_fiximgsize",b,"width",e+"px")):"img"!=b.nodeName.toLowerCase()||b.complete||(e=b.width);e&&(c=l(b))&&"scale"!=c&&Dottoro.SetStyle("cssex_fiximgsize",b,"height",e/c+"px")}this.forceIE8HeightRecalc()}},forceIE8HeightRecalc:function(){if(Dottoro.isIEOlder(9)){var a=this.root.style.height;this.root.style.height="auto";this.root.style.height=a}},Recalc:function(a){a=Dottoro.Extend({ie8fix:!0,core:!0,core_horiz:!0,core_vert:!0,
postPhase:!0},a);this.FireEvent("recalc_start",a);if(a.ie8fix){this.FireEvent("recalc_ie8fix_start",a);for(var b=/^-?\d+(\.\d+)?%$/,c=this.initParentWidthElems.length-1;0<=c;c--){var d=this.initParentWidthElems[c];if(!Dottoro._getData(d,"cssex/disabled")&&!Dottoro._getData(d,"cssex/naturalWidth")){var e=d.style.width;if(e&&b.test(e)&&(e=parseFloat(e))){var f=this.getElemNaturalWidth(d);0<f&&(d.parentNode.style.width=100*f/e+"px")}}}this.FireEvent("recalc_ie8fix_end",a)}if(a.core){b=[];for(this.FireEvent("recalc_core_start",
a);;){this.FireEvent("recalc_core_loop_start",a);if(a.core_horiz){this.FireEvent("recalc_core_horiz_start",a);this.FireEvent("recalc_setParentWidth_start",a);for(c=this.setParentWidthElems.length-1;0<=c;c--)d=this.setParentWidthElems[c],d.parentNode&&!Dottoro._getData(d,"cssex/disabled")&&(e=Dottoro.GetSize(d),Dottoro.SetStyle("cssex_setParentWidth",d.parentNode,"width",e.width+"px"));this.FireEvent("recalc_setParentWidth_end",a);this.FireEvent("recalc_fillavailhoriz_start",a);for(c=0;c<this.fillAvailHoriz.length;c++)d=
this.fillAvailHoriz[c],m(d,!0);this.FireEvent("recalc_fillavailhoriz_end",a);this.fixMaxWElemSizesIE8();this.FireEvent("recalc_aspectratio_start",a);this.aspectRatio.UpdateHeights();this.FireEvent("recalc_aspectratio_end",a);this.FireEvent("recalc_core_horiz_end",a)}if(a.core_vert){this.FireEvent("recalc_core_vert_start",a,b);for(e=b.length;;){this.FireEvent("recalc_core_vert_loop_start",a,b);this.FireEvent("recalc_fillavailvert_start",a);for(c=0;c<this.fillAvailVert.length;c++)d=this.fillAvailVert[c],
m(d,!1);this.FireEvent("recalc_fillavailvert_end",a);this.FireEvent("recalc_maxheight_start",a,b);this.flexHeightTree.SetHeights(b);this.FireEvent("recalc_maxheight_end",a,b);if(!this.FireEvent("recalc_heightphase_end",a,b))break;this.flexHeightTree.Reset();this.FireEvent("recalc_core_vert_loop_end",a,b)}if(e<b.length){a.core_horiz=!0;this.Reset({setParentWidth:!0,fillAvailHorizSpace:!0},!0);this.flexHeightTree.Reset();continue}this.FireEvent("recalc_core_vert_end",a,b)}this.FireEvent("recalc_core_loop_end",
a,b);break}this.FireEvent("recalc_core_loop_after",a,b);for(c=0;c<b.length;c++)Dottoro._removeData(b[c],"cssex/processed");this.FireEvent("recalc_core_end",a)}if(a.postPhase){this.FireEvent("recalc_postphase_start",a);this.FireEvent("recalc_setheight_start",a);for(c=0;c<this.setHeightElems.length;c++)d=this.setHeightElems[c],d.style.height||Dottoro._getData(d,"cssex/disabled")||Dottoro.CssEx.SetHeight("cssex_setheight",d,Dottoro.GetPixelLength(d,"height"));this.FireEvent("recalc_setheight_end",a);
this.FireEvent("recalc_vertcenter_start",a);for(c=0;c<this.vertCenterElems.length;c++)d=this.vertCenterElems[c],Dottoro._getData(d,"cssex/disabled")||Dottoro.CssEx.Center(!1,"vertcenter",d);this.FireEvent("recalc_vertcenter_end",a);this.FireEvent("recalc_updatescales_start",a);this.aspectRatio.UpdateScales();this.FireEvent("recalc_updatescales_end",a);this.FireEvent("recalc_postphase_end",a);for(c=0;c<this.mediaElementJsElems.length;c++)d=this.mediaElementJsElems[c],d.player&&d.player.dottoroSetPlayerSize&&
!Dottoro._getData(d,"cssex/disabled")&&d.player.dottoroSetPlayerSize()}this.FireEvent("recalc_end",a)},Update:function(a){this.Reset();this.Recalc(a)},HiddenCollect:function(a,b){this.collect(a,b,!0)},Attach:function(a,b){this.collect(a);b&&this.Update();return!0},Detach:function(a){this.flexHeightTree.Remove(a);this.aspectRatio.Remove(a);this.ie8MaxWidthFixElems=p(a,this.ie8MaxWidthFixElems);this.fillAvailHoriz=p(a,this.fillAvailHoriz);this.fillAvailVert=p(a,this.fillAvailVert);this.initParentWidthElems=
p(a,this.initParentWidthElems);this.setParentWidthElems=p(a,this.setParentWidthElems);this.setHeightElems=p(a,this.setHeightElems);this.vertCenterElems=p(a,this.vertCenterElems);for(var b=[],c=0;c<this.hiddenNodes.length;c++){var d=this.hiddenNodes[c];Dottoro.IsAncestorOf(a,d)?Dottoro._removeData(d,"cssex/hidden"):b.push(d)}this.hiddenNodes=b},SetChildActive:function(a){var b=a.parentNode;if(b){var c=Dottoro._getData(b,"cssex/activeChild");if(c){if(c==a)return;this.EnableElem(c,!1)}else for(c=b.firstChild;c;)c!=
a&&this.EnableElem(c,!1),c=c.nextSibling;this.EnableElem(a,!0);Dottoro._setData(b,"cssex/activeChild",a);Dottoro.HasCSSClass(a,"js-scale-down-to-fit")?(Dottoro._setData(b,"cssex/aspectRatio","scale"),Dottoro._setData(b,"cssex/scaleElem",a)):(Dottoro._setData(b,"cssex/aspectRatio",!1),Dottoro._removeData(b,"cssex/scaleElem"))}},EnableElem:function(a,b){Dottoro._setData(a,"cssex/disabled",!b);this.flexHeightTree.Enable(a,b);this.aspectRatio.Enable(a,b);n(a,this.ie8MaxWidthFixElems,b);n(a,this.fillAvailHoriz,
b);n(a,this.fillAvailVert,b);n(a,this.initParentWidthElems,b);n(a,this.setParentWidthElems,b);n(a,this.setHeightElems,b);n(a,this.vertCenterElems,b);n(a,this.mediaElementJsElems,b)},MarkAsHidden:function(a){Dottoro._getData(a,"cssex/hidden")||(Dottoro._setData(a,"cssex/hidden",this),this.hiddenNodes.push(a))}});Dottoro.CssEx={SetDefOptions:function(a){if(a)for(var b in a)t[b]=a[b]},Create:function(a,b){a=a?a:document.body;b=b?b:null;var c=Dottoro._getData(a,"cssex/obj");c||(c=new s(a,b),Dottoro._setData(a,
"cssex/obj",c));return c},GetHolderDetails:function(a){for(;a;){var b=Dottoro._getData(a,"cssex/hidden");if(b)return{cssEx:b,hidden:!0};if(b=Dottoro._getData(a,"cssex/obj"))return{cssEx:b,hidden:!1};a=a.parentNode}return null},Attach:function(a,b){var c=this.GetHolderDetails(a);return c&&!c.hidden?c.cssEx.Attach(a,b):!1},Detach:function(a){var b=this.GetHolderDetails(a);return b&&!b.hidden?b.cssEx.Detach(a):!1},UpdateHeight:function(a,b,c){c=c||{};if(!Dottoro._getData(b,"cssex/disabled")){var d=l(b);
if(d)if("scale"==d){var e=Dottoro._getData(b,"cssex/scaleElem"),d=Dottoro.GetSize(b,Dottoro.BOX_INNER),e=Dottoro.GetSize(e);d.width<e.width&&Dottoro.SetStyle(a,b,"height",d.width/e.width*e.height+"px")}else{var f=Dottoro._getData(b,"cssex/aspectRatioUpdateH");!f&&c.uninitializedMedia&&"img"==b.nodeName.toLowerCase()&&(f=0==b.naturalHeight);c=Dottoro._getData(b,"cssex/checkheight");if(f||c)if(f=Dottoro.isIEOlder(9)?b.clientWidth:Dottoro.GetPixelLength(b,"width"))c&&(e=b.offsetHeight),Dottoro.SetStyle(a,
b,"height",f/d+"px"),c&&e==b.offsetHeight&&Dottoro._removeData(b,"cssex/checkheight"),b.player&&b.player.setControlsSize&&b.player.setControlsSize()}}},SetHeight:function(a,b,c){if(Dottoro._getData(b,"cssex/disabled"))return!1;0>c&&(c=0);Dottoro.SetStyle(a,b,"height",c+"px");var d={height:!0},e=l(b);e&&("scale"==e?(e=Dottoro._getData(b,"cssex/scaleElem"))&&!Dottoro._getData(e,"cssex/disabled")&&(c=Dottoro.GetSize(b,Dottoro.BOX_INNER),e=Dottoro.GetSize(e),c.height<e.height&&(Dottoro.SetStyle(a,b,"width",
c.height/e.height*e.width+"px"),d.width=!0)):(Dottoro.SetStyle(a,b,"width",c*e+"px"),d.width=!0,b.player&&b.player.setControlsSize&&b.player.setControlsSize(),Dottoro.isIEOlder(9)&&b.currentStyle&&(c=/^-?\d+(\.\d+)?%$/,(e=b.currentStyle.maxWidth)&&c.test(e)&&Dottoro.SetStyle(a,b,"maxWidth","none"))));if(a=Dottoro._getData(b,"cssex/fillAvailVertChild"))d.child=m(a,!1),d.child&&(d.child.domNode=a);return d},ResetHeight:function(a,b){if(!Dottoro._getData(b,"cssex/disabled")){var c=l(b);c?("scale"==c&&
(c=Dottoro._getData(b,"cssex/scaleElem"))&&!Dottoro._getData(c,"cssex/disabled")&&Dottoro.RestoreStyle(a,c,"trafo"),Dottoro.RestoreStyle(a,b,["height","width","maxWidth"])):Dottoro.RestoreStyle(a,b,"height")}},CalcCenterPrec:function(a,b,c){var d=0;if(c=c||b.parentNode){c=Dottoro.GetBox(c,Dottoro.BOX_INNER);var d=Dottoro.GetBox(b),e=a?"left":"top",f=a?"right":"bottom",d=(c[e]+c[f])/2-(d[e]+d[f])/2}Dottoro._setData(b,a?"cssex/horizCenterPrec":"cssex/vertCenterPrec",d)},GetCenterPrec:function(a,b){for(var c=
a?"cssex/horizCenterPrec":"cssex/vertCenterPrec";b;){var d=Dottoro._getData(b,c);if(void 0!==d)return d;b=b.parentNode}return 0},Center:function(a,b,c,d,e){d=d||c.parentNode;e=e||(a?"left":"top");if(d){var f=Dottoro.CssEx.GetCenterPrec(a,d);Dottoro.SetStyle(b,c,e,"0px");var g=a?"left":"top",h=a?"right":"bottom",k=Dottoro.GetBox(d),l=Dottoro.GetBox(c),f=(k[g]+k[h])/2+f,l=(l[g]+l[h])/2,k=f-l,m=1;if(a&&"marginLeft"==e){Dottoro.SetStyle(b,c,e,"10px");var n=Dottoro.GetBox(c);5==Math.round(Math.abs(l-(n[g]+
n[h])/2))&&(m=2)}Dottoro.SetStyle(b,c,e,m*k+"px");l=Dottoro.GetBox(c);l=(l[g]+l[h])/2;if(n=f-l)if(.5<=Math.abs(n)).5==Math.abs(n)&&Math.floor(l)!=Math.floor(f)&&Dottoro.SetStyle(b,c,e,m*(k+n)+"px");else for(var p=1;Math.round(l)!=Math.round(f)||Math.floor(l)!=Math.floor(f);)k+=p*n,Dottoro.SetStyle(b,c,e,m*k+"px"),l=Dottoro.GetBox(c),l=(l[g]+l[h])/2,n==f-l?p*=2:(n=f-l,p=1)}Dottoro.CssEx.CalcCenterPrec(a,c,d)},RestoreCenter:function(a,b,c,d){Dottoro.RestoreStyle(b,c,d||(a?"left":"top"));Dottoro._removeData(c,
a?"cssex/horizCenterPrec":"cssex/vertCenterPrec")}}})();
Dottoro.Drag=Dottoro.ClassEventsSettings.extend({init:function(a,b){this._super();this.territory=this.dragElem=null;this.autoTerritory=!0;this.dragElemPos={};this.mouseCoords={};this.sticky=[];this.unsticky=[];this.dropTargets=[];this.mouseDownHandler=null;this.dragEventHandlers=[];this.cached={};this.initSettings();this.SetDragElem(a);this.SetSettings(b)},initSettings:function(){this.settings.minmove=0},updateDropTargets:function(){for(var a=Dottoro.GetBox(this.dragElem),b=0;b<this.dropTargets.length;b++)this.dropTargets[b].Update(this.mouseCoords,
a)},moveDragElem:function(){this.dragElemPos.move.left&&(this.dragElem.style.left=this.dragElemPos.left+"px");this.dragElemPos.move.top&&(this.dragElem.style.top=this.dragElemPos.top+"px");if(this.dragElemPos.move.right||this.dragElemPos.move.bottom){var a=null;if("absolute"==this.dragElemPos.type){var b=this.dragElem.offsetParent;b&&(a=Dottoro.GetSize(b))}a||(a={width:Dottoro.GetClientWinWidth(),height:Dottoro.GetClientWinHeight()});this.dragElemPos.move.right&&(this.dragElem.style.right=a.width-
this.dragElemPos.right+"px");this.dragElemPos.move.bottom&&(this.dragElem.style.bottom=a.height-this.dragElemPos.bottom+"px")}},preMoveProposedPos:function(a,b){var c=this.GetDragElemProposedPos();this.dragElemPos.left=c.left+a;this.dragElemPos.top=c.top+b;this.dragElemPos.right=c.right+a;this.dragElemPos.bottom=c.bottom+b;this.moveDragElem()},onMouseDown:function(a){if(!this.DuringDrag()){for(var b=a.target?a.target:a.srcElement,c=b,d=null;c;){if(c==this.dragElem&&0==this.sticky.length){d=this.dragElem;
break}if(0<=this.FindSticky(c,!0))break;if(0<=this.FindSticky(c)){d=c;break}if(c==this.dragElem)break;c=c.parentNode}d&&(c=Dottoro.GetMouseClientCoords(a,d.ownerDocument),this.FireEvent("drag_mousedown",a,c,d,b)||(this.Start(c),a.preventDefault&&a.preventDefault()))}},onMouseMove:function(a){var b=Dottoro.GetMouseClientCoords(a,this.dragElem.ownerDocument);a.view&&Dottoro.ClientWinToClientWin(b,a.view,this.dragElem.ownerDocument.defaultView);var c=this.mouseCoords.x,d=this.mouseCoords.y;this.mouseCoords.x=
b.x;this.mouseCoords.y=b.y;if(!this.minMovePerformed){var b=this.mouseCoords.x-this.mouseCoords.startX,e=this.mouseCoords.y-this.mouseCoords.startY;Math.sqrt(b*b+e*e)>=this.settings.minmove&&(this.minMovePerformed=!0)}a=this.FireEvent("drag_mousemove",a,c,d);this.minMovePerformed&&(a?this.updateDropTargets():this.RecalculatePos())},onMouseUp:function(a){this.FireEvent("drag_mouseup",a)||this.Stop(!0)},onLoseCapture:function(a){this.FireEvent("drag_losecapture",a);this.Stop(!1)},SetDragElem:function(a){if(this.DuringDrag())return!1;
this.dragElem=Dottoro.GetElement(a);this.autoTerritory&&this.SetTerritory();this.mouseDownHandler&&(ListenMouseDown(!1),ListenMouseDown(!0));return!0},GetDragElem:function(){return this.dragElem},SetTerritory:function(a){var b=this.dragElem&&this.dragElem.ownerDocument?this.dragElem.ownerDocument:document;this.territory=document.documentElement;if(this.autoTerritory=!a){if(!this.dragElem||"fixed"==Dottoro.GetStyle(this.dragElem,"position")||!this.dragElem.offsetParent)return;a=this.dragElem.offsetParent}a=
Dottoro.GetElement(a);this.territory=a==b.body?document.documentElement:a},GetTerritory:function(){return this.territory},GetDragElemPosType:function(){return this.dragElemPos.type},GetDragElemOffset:function(){return this.dragElemOffset},GetDragElemPos:function(){return this.dragElemPos},SetDragElemPos:function(a){this.dragElemPos.left=a.left;this.dragElemPos.top=a.top;this.dragElemPos.right=a.right;this.dragElemPos.bottom=a.bottom;this.moveDragElem();this.updateDropTargets()},GetDragElemProposedPos:function(){var a=
this.GetDragElemProposedClientPos();"absolute"==this.dragElemPos.type&&Dottoro.ClientWinToAbsolute(a,this.dragElem,!1,{left:0,top:0});return a},GetDragElemProposedClientPos:function(){var a=Dottoro.GetSize(this.dragElem),b=this.mouseCoords.x+this.dragElemOffset.x,c=this.mouseCoords.y+this.dragElemOffset.y,d={left:b-this.cached.dragElemMargin.left,top:c-this.cached.dragElemMargin.top};d.right=d.left+a.width;d.bottom=d.top+a.height;if(!this.territory)return d;var e=Dottoro.GetBox(this.territory,Dottoro.BOX_PADDING),
a={left:b,top:c,right:b+a.width,bottom:c+a.height};a.right>e.right&&Dottoro.OffsetCoords(a,e.right-a.right,0);a.left<e.left&&Dottoro.OffsetCoords(a,e.left-a.left,0);a.bottom>e.bottom&&Dottoro.OffsetCoords(a,0,e.bottom-a.bottom);a.top<e.top&&Dottoro.OffsetCoords(a,0,e.top-a.top);d.left+=a.left-b;d.right+=a.left-b;d.top+=a.top-c;d.bottom+=a.top-c;return d},RecalculatePos:function(){var a=this.GetDragElemProposedPos();this.SetDragElemPos(a)},GetMouseCoords:function(){return{x:this.mouseCoords.x,y:this.mouseCoords.y}},
GetStartMouseCoords:function(){return{x:this.mouseCoords.startX,y:this.mouseCoords.startY}},GetMinMovePerformed:function(){return this.minMovePerformed},AddSticky:function(a,b){if(Dottoro.IsArray(a))for(var c=0;c<a.length;c++)this.AddSticky(a[c],b);else c=Dottoro.GetElement(a),b?this.unsticky.push(c):this.sticky.push(c)},SetSticky:function(a,b){this.RemoveAllStickies(b);this.AddSticky(a,b)},GetSticky:function(a,b){return void 0===b||null===b?a?this.unsticky:this.sticky:a?this.unsticky[b]:this.sticky[b]},
FindSticky:function(a,b){for(var c=Dottoro.GetElement(a),d=b?this.unsticky:this.sticky,e=0;e<d.length;e++)if(d[e]==c)return e;return-1},RemoveSticky:function(a,b){if(Dottoro.IsArray(a))for(var c=a.length;0<c;c--)this.RemoveSticky(a[c-1],b);else{var c="number"==typeof a?a:this.FindSticky(a,b),d=b?this.unsticky:this.sticky;0<=c&&c<d.length&&d.splice(c,1)}},RemoveAllStickies:function(a){a?this.unsticky=[]:this.sticky=[]},AddDropTarget:function(a){if(Dottoro.IsArray(a))for(var b=0;b<a.length;b++)this.AddDropTarget(a[b]);
else(a=Dottoro.GetElement(a))&&!a.SetDragObj&&(a=Dottoro._getData(a,"drag/droptarget")),a&&(this.dropTargets.push(a),this.DuringDrag()&&a.SetDragObj(this))},SetDropTarget:function(a){this.RemoveAllDropTargets();this.AddDropTarget()},GetDropTarget:function(a){return void 0===a||null===a?this.dropTargets:this.dropTargets[a]},FindDropTarget:function(a){if(a=Dottoro.GetElement(a)){var b=Dottoro._getData(a,"drag/droptarget");b&&(a=b)}for(b=0;b<this.dropTargets.length;b++)if(this.dropTargets[b]==a)return b;
return-1},RemoveDropTarget:function(a){if(Dottoro.IsArray(a))for(var b=a.length;0<b;b--)this.RemoveDropTarget(a[b-1]);else b="number"==typeof a?a:this.FindDropTarget(a),0<=b&&b<this.dropTargets.length&&(a=this.dropTargets[b],a.RemoveDragObj(this),this.dropTargets.splice(b,1))},RemoveAllDropTargets:function(){for(var a=0;a<this.dropTargets.length;a++)this.dropTargets[a].RemoveDragObj(this);this.dropTargets=[]},ListenMouseDown:function(a){if(!this.dragElem)return!1;a?this.mouseDownHandler||(this.dragElem.addEventListener?
this.mouseDownHandler=Dottoro.AddListener("mousedown",[this,"onMouseDown"],this.dragElem,Dottoro.CAPTURE_ELEM):this.dragElem.setCapture&&(this.mouseDownHandler=Dottoro.AddListener("mousedown",[this,"onMouseDown"],this.dragElem))):this.mouseDownHandler&&(Dottoro.RemoveListener(this.mouseDownHandler),this.mouseDownHandler=null)},IsMouseDownListened:function(){return null!=this.mouseDownHandler},Start:function(a){if(this.DuringDrag()||this.FireEvent("drag_start",a)||!this.dragElem)return!1;this.dragElemPos.type=
Dottoro.GetStyle(this.dragElem,"position");if("absolute"!=this.dragElemPos.type&&"fixed"!=this.dragElemPos.type)return!1;this.mouseCoords.startX=a.x;this.mouseCoords.startY=a.y;this.mouseCoords.x=this.mouseCoords.startX;this.mouseCoords.y=this.mouseCoords.startY;this.minMovePerformed=!1;this.CacheDragElemMargin();var b=Dottoro.GetBox(this.dragElem);this.dragElemOffset={x:b.left-a.x,y:b.top-a.y};for(var c=0;c<this.dropTargets.length;c++)this.dropTargets[c].SetDragObj(this),this.dropTargets[c].Update(a,
b);this.dragElem.addEventListener?(this.dragEventHandlers.push(Dottoro.AddListener("mousemove",[this,"onMouseMove"],this.dragElem,Dottoro.CAPTURE_ALLWINDOW)),this.dragEventHandlers.push(Dottoro.AddListener("mouseup",[this,"onMouseUp"],this.dragElem,Dottoro.CAPTURE_ALLWINDOW))):this.dragElem.setCapture&&(this.dragEventHandlers.push(Dottoro.AddListener("mousemove",[this,"onMouseMove"],this.dragElem)),this.dragEventHandlers.push(Dottoro.AddListener("mouseup",[this,"onMouseUp"],this.dragElem)),this.dragElem.setCapture(),
this.dragEventHandlers.push(Dottoro.AddListener("losecapture",[this,"onLoseCapture"],this.dragElem)));a=this.GetDragElemProposedPos();this.dragElemPos.left=a.left;this.dragElemPos.top=a.top;this.dragElemPos.right=a.right;this.dragElemPos.bottom=a.bottom;a=Dottoro.GetSpecifiedRect(this.dragElem);this.dragElemPos.move={left:"auto"!=a.left,top:"auto"!=a.top,right:"auto"!=a.right,bottom:"auto"!=a.bottom};return!0},Stop:function(a){if(this.DuringDrag()){if(this.FireEvent("drag_end")&&a)return!1;for(a=
0;a<this.dropTargets.length;a++)this.dropTargets[a].StopScrolling();Dottoro.RemoveListener(this.dragEventHandlers);this.dragEventHandlers=[];this.dragElem.releaseCapture&&!this.dragElem.addEventListener&&this.dragElem.releaseCapture()}return!0},DuringDrag:function(){return 0<this.dragEventHandlers.length},CacheDragElemMargin:function(){this.cached.dragElemMargin={left:0,top:0};this.dragElem&&(this.cached.dragElemMargin.left=Dottoro.GetPixelLength(this.dragElem,"marginLeft"),this.cached.dragElemMargin.top=
Dottoro.GetPixelLength(this.dragElem,"marginTop"))},SetSetting:function(a,b){switch(a.toLowerCase()){case "drag":this.SetDragElem(b);break;case "territory":this.SetTerritory(b);break;case "stickies":for(var c=b.split(";"),d=0;d<c.length;d++){var e=Dottoro.Trim(c[d]);this.AddSticky(e)}break;case "unstickies":c=b.split(";");for(d=0;d<c.length;d++)e=Dottoro.Trim(c[d]),this.AddSticky(e,!0);break;case "targets":c=b.split(";");for(d=0;d<c.length;d++)e=Dottoro.Trim(c[d]),this.AddDropTarget(e);break;default:this._super(a,
b)}}});
Dottoro.DropTarget=Dottoro.ClassEventsSettings.extend({init:function(a,b){this._super();this.dragObj=this.target=null;this.droppable=this.scrollAffectsDragElem=!1;this.initSettings();this.scrollTimer=null;this.scrollStep={left:0,top:0,right:0,bottom:0};this.dustRemover=null;this.SetTarget(a);this.SetSettings(b)},initSettings:function(){this.settings.base="elem";this.settings.box="inner";this.settings.scrollleft=30;this.settings.scrollright=30;this.settings.scrolltop=30;this.settings.scrollbottom=30;
this.settings.scrollamountx=10;this.settings.scrollamounty=10;this.settings.scrolldelay=10;this.settings.scrollaccel=1;this.settings.scrollaccelbystep=15;this.settings.scrolldistaccel=1},updateDistance:function(a){var b=this.dragObj.GetDragElem();if(b&&this.target&&this.targetDoc){if(this.targetIsBody)var c=Dottoro.GetClientWinWidth(this.targetDoc),d=Dottoro.GetClientWinHeight(this.targetDoc),c={left:0,top:0,width:c,height:d,right:c,bottom:d};else"inner"===this.settings.box?this.targetIsFrame?(c=
Dottoro.GetClientWinWidth(this.targetDoc),d=Dottoro.GetClientWinHeight(this.targetDoc),c={left:0,top:0,width:c,height:d,right:c,bottom:d}):c=Dottoro.GetBox(this.target,Dottoro.BOX_PADDING):c=Dottoro.GetBox(this.target);if(Dottoro.ClientWinToClientWin(c,this.targetIsFrame&&"inner"!==this.settings.box?this.target.ownerDocument:this.targetDoc,b.ownerDocument)){this.distance={left:-1,top:-1,right:-1,bottom:-1};b=this.droppable;this.droppable=!1;if("mouse"==this.settings.base)Dottoro.IsPointInRect(this.mouseCoords,
c)&&(this.droppable=!0,this.distance.left=c.left+this.settings.scrollleft-1-this.mouseCoords.x,this.distance.right=this.mouseCoords.x-(c.right-this.settings.scrollright),this.distance.top=c.top+this.settings.scrolltop-1-this.mouseCoords.y,this.distance.bottom=this.mouseCoords.y-(c.bottom-this.settings.scrollbottom));else if(Dottoro.IsRectInRect(a,c)){this.droppable=!0;a=Dottoro.Clone(a,!0);if(this.mouseCoords.x<c.left||this.mouseCoords.x>=c.right)a.left=a.right=this.mouseCoords.x;if(this.mouseCoords.y<
c.top||this.mouseCoords.y>=c.bottom)a.top=a.bottom=this.mouseCoords.y;this.distance.left=c.left+this.settings.scrollleft-1-a.left;this.distance.right=a.right-(c.right-this.settings.scrollright);this.distance.top=c.top+this.settings.scrolltop-1-a.top;this.distance.bottom=a.bottom-(c.bottom-this.settings.scrollbottom)}0>this.distance.left&&(this.scrollStep.left=0);0>this.distance.top&&(this.scrollStep.top=0);0>this.distance.right&&(this.scrollStep.right=0);0>this.distance.bottom&&(this.scrollStep.bottom=
0);a=0<=this.distance.left||0<=this.distance.top||0<=this.distance.right||0<=this.distance.bottom;if(this.scrollTimer)a||this.StopScrolling();else if(a){var e=this;this.scrollTimer=setInterval(function(){e.doScroll()},e.settings.scrolldelay)}this.droppable?(b||this.FireEvent("droptarget_enter"),this.FireEvent("droptarget_over")):b&&this.FireEvent("droptarget_leave")}else this.StopScrolling()}else this.StopScrolling()},removeDustRemover:function(){this.dustRemover&&(this.dustRemover.parentNode.removeChild(this.dustRemover),
this.dustRemover=null)},createDustRemover:function(){this.removeDustRemover();var a=this.dragObj.GetDragElem();if(a){var b=a.ownerDocument;b&&(a=Dottoro.GetBox(a),this.dustRemover=Dottoro.CreateDummyElem(b,"div"),this.dustRemover.style.position="fixed",this.dustRemover.style.width=a.width+"px",this.dustRemover.style.height=a.height+"px",this.dustRemover.style.left=a.left+"px",this.dustRemover.style.top=a.top+"px",this.dustRemover.style.visibility="visible",this.dustRemover.style.opacity="0",b.body.appendChild(this.dustRemover))}},
doScroll:function(){var a=0,b=0;if(0<=this.distance.left){var c=this.settings.scrollamountx*Math.pow(this.settings.scrolldistaccel,this.distance.left);0<this.settings.scrollaccelbystep&&(c*=Math.pow(this.settings.scrollaccel,Math.floor(this.scrollStep.left/this.settings.scrollaccelbystep)));a-=c;this.scrollStep.left++}0<=this.distance.right&&(c=this.settings.scrollamountx*Math.pow(this.settings.scrolldistaccel,this.distance.right),0<this.settings.scrollaccelbystep&&(c*=Math.pow(this.settings.scrollaccel,
Math.floor(this.scrollStep.right/this.settings.scrollaccelbystep))),a+=c,this.scrollStep.right++);if(0<=this.distance.top){var d=this.settings.scrollamounty*Math.pow(this.settings.scrolldistaccel,this.distance.top);0<this.settings.scrollaccelbystep&&(d*=Math.pow(this.settings.scrollaccel,Math.floor(this.scrollStep.top/this.settings.scrollaccelbystep)));b-=d;this.scrollStep.top++}0<=this.distance.bottom&&(c=this.settings.scrollamounty*Math.pow(this.settings.scrolldistaccel,this.distance.bottom),0<
this.settings.scrollaccelbystep&&(c*=Math.pow(this.settings.scrollaccel,Math.floor(this.scrollStep.bottom/this.settings.scrollaccelbystep))),b+=c,this.scrollStep.bottom++);a=Math.round(a);b=Math.round(b);if(0!=a||0!=b){if(this.targetIsBody||this.targetIsFrame)var e=Dottoro.GetDocScrollMax(this.targetDoc),c=Dottoro.GetDocScrollLeft(this.targetDoc),d=Dottoro.GetDocScrollTop(this.targetDoc);else e=Dottoro.GetScrollMax(this.target),c=this.target.scrollLeft,d=this.target.scrollTop;c+a>e.x&&(a=e.x-c);0>
c+a&&(a=-c);d+b>e.y&&(b=e.y-d);0>d+b&&(b=-d);if(0!=a||0!=b){if(this.targetIsBody||this.targetIsFrame||this.scrollAffectsDragElem){this.createDustRemover();var f=this;setTimeout(function(){f.removeDustRemover()},1)}this.scrollAffectsDragElem&&this.dragObj.preMoveProposedPos(a,b);this.targetIsBody||this.targetIsFrame?(this.targetDoc.defaultView?this.targetDoc.defaultView:this.targetDoc.parentWindow).scrollBy(a,b):(this.target.scrollLeft+=a,this.target.scrollTop+=b);this.FireEvent("droptarget_scroll");
this.dragObj.RecalculatePos()}}},updateRelation:function(){this.StopScrolling();this.targetIsFrame=this.targetIsBody=this.scrollAffectsDragElem=!1;this.targetDoc=null;if(this.target){var a=this.target.tagName.toLowerCase();(this.targetIsFrame="frame"===a||"iframe"===a)?this.target.contentWindow&&(this.targetDoc=this.target.contentWindow.document):this.targetDoc=this.target.ownerDocument;this.targetIsBody=this.targetDoc.body===this.target;if(this.targetDoc&&this.dragObj){var a=this.dragObj.GetDragElem(),
b=this.dragObj.GetDragElemPosType();if(a&&"absolute"==b)if(this.targetIsBody)this.scrollAffectsDragElem=!0;else for(a=a.offsetParent;a;){if(a===this.target){this.scrollAffectsDragElem=!0;break}a=a.offsetParent}}}},SetTarget:function(a){this.target=Dottoro.GetElement(a);this.updateRelation()},GetTarget:function(){return this.target},SetDragObj:function(a){this.dragObj=a;this.updateRelation()},RemoveDragObj:function(a){this.dragObj==a&&(this.dragObj=null)},GetDragObj:function(){return this.dragObj},
Update:function(a,b){if(!b){var c=this.dragObj.GetDragElem();if(!c)return!1;b=Dottoro.GetBox(c)}a&&(this.mouseCoords=a);this.updateDistance(b);return!0},StopScrolling:function(){this.scrollTimer&&(clearInterval(this.scrollTimer),this.scrollTimer=null)},IsDroppable:function(){return this.droppable},SetSetting:function(a,b){"target"==a.toLowerCase()?this.SetTarget(b):this._super(a,b)}});Dottoro.SetText("dialog",{trans_button_title:"Enable/disable transparent mode"});
Dottoro.Dialog=Dottoro.Section.extend({classID:"dialog",init:function(){this._super();this.ownerDoc=Dottoro.TOPWINDOW.document;this.opacDiv=this.holder=null;this.eventHandlers=[];Dottoro.Extend(this.i18n,Dottoro.GetText("dialog"));this.baseClasses=["dottoro_dialog"];this.settings.profile="dialog";this.settings.profile_anim="dialog_anim";this.settings.holder=null;this.settings.actiononclose="hide";this.settings.autoclose=0;this.autoCloseTimerId="";this.settings.cssclass="";this.settings.css="";this.settings.zindex=
"";this.settings.fullcontent="";this.settings.simplecontent="";this.settings.content="";this.settings.contentw=-1;this.settings.contenth=-1;this.settings.framew=-1;this.settings.frameh=-1;this.settings.framecalcsize=!0;this.settings.framefixsize=!1;this.settings.framesrc="";this.settings.frameexternal=!1;this.settings.framedoccontent="";this.settings.framecontent="";this.settings.framecontentpattern='<!DOCTYPE html><html style="overflow: hidden;"><head><meta charset="utf-8" />%1%2</head><body class="%3" unselectable="on" style="margin: 0px">%4</body></html>';
this.frameCssFiles=[];this.frameJsFiles=[];this.frameBaseClasses=[];this.settings.draggable=!0;this.settings.modal=!1;this.settings.position="custom";this.settings.moveintoview=!0;this.settings.sizelimit="view";this.settings.marginleft=0;this.settings.margintop=0;this.settings.marginright=0;this.settings.marginbottom=0;this.cssEx=null;this.settings.title="";this.settings.createbuttons=!0;this.settings.createclosebutton=!0;this.settings.createokbutton=!0;this.settings.createcancelbutton=!0;this.settings.okbuttontext=
Dottoro.GetText("OK");this.settings.cancelbuttontext=Dottoro.GetText("Cancel");this.settings.closebuttontitle=Dottoro.GetText("Close");this.settings.helpurl="";this.settings.helpbuttontitle=Dottoro.GetText("Help");this.settings.custombuttons=[];this.settings.buttonsalign="right";this.settings.outclickclose=!0;this.settings.closeonesc=!0;this.settings.autofocus=!1;this.settings.fullscreenbutton=!1;this.settings.fullscreen=!1;this.settings.fullscreenbuttontitle=Dottoro.GetText("Fullscreen");this.autoTransButtons=
[];this.settings.transbutton=!1;this.settings.transbuttontitle=this.i18n.trans_button_title;this.trans=this.settings.autotrans=!1;this.settings.mediapreload=!1;this.settings.showanimprops={};this.settings.showanimduration=0;this.settings.showanimeasing="swing";this.showAnim=null;this.destroyAfterHide=!1;this.settings.forceredraw=!0;this.dialArgs=null;this.titleButtons={};this.buttons={}},SetOwnerDoc:function(a){a||(a=Dottoro.TOPWINDOW.document);this.ownerDoc=a},GetOwnerDoc:function(){return this.ownerDoc},
SetOwnerElem:function(a){this.ownerElem=a},GetOwnerElem:function(){return this.ownerElem},SetCustomData:function(a){this.customData=a},GetCustomData:function(){return this.customData},SetDialArgs:function(a){this.dialArgs=a;this.FrameMessage("argschanged");this.FireEvent("argschanged")},GetDialArgs:function(){return this.dialArgs},AddBaseClass:function(a){this.baseClasses.push(a)},ClearBaseClasses:function(){this.baseClasses=[]},AddFrameCssFile:function(a){this.frameCssFiles.push(a)},AddFrameJsFile:function(a){this.frameJsFiles.push(a)},
AddFrameBaseClass:function(a){this.frameBaseClasses.push(a)},Create:function(){var a=Dottoro.GetWinFromDoc(this.ownerDoc);this.eventHandlers.push(Dottoro.AddListener("resize",[this,"onWinResized"],a));var a=this.settings.holder?this.settings.holder:this.ownerDoc.body,b=this.settings.zindex;this.settings.modal&&(this.modalWrapper=Dottoro.CreateElement("div",this.ownerDoc.body,{className:"dottoro_dialog_modal_wrapper"}),this.opacDiv=Dottoro.CreateElement("div",this.modalWrapper,{className:"dottoro_dialog_modal_bg"},
{}),b&&(this.modalWrapper.style.zIndex=b),this.eventHandlers.push(Dottoro.AddListener("click",[this,"onClickOutside"],this.opacDiv)),this.eventHandlers.push(Dottoro.AddListener("mousedown",Dottoro.CancelEvent,this.opacDiv)),a=this.modalWrapper);var c={};this.SetCenteredLT(c);var d=this.baseClasses.join(" ");this.settings.title||this.settings.fullcontent||(d+=" noTitle");d+=this.settings.modal?" modal":" modeless";this.settings.cssclass&&(d+=" "+this.settings.cssclass);this.holder=Dottoro.CreateElement("div",
a,{className:d,tabIndex:-1},c);!this.settings.modal&&b&&(this.holder.style.zIndex=b);Dottoro._setData(this.holder,"dialog/obj",this);this.Attach(this.holder);this.eventHandlers.push(Dottoro.AddListener("click",[this,"onClickInside"],this.holder));this.eventHandlers.push(Dottoro.AddListener("mousedown",[this,"onMouseDownInside"],this.holder));this.eventHandlers.push(Dottoro.AddListener("mouseover",[this,"onMouseOver"],this.holder));this.eventHandlers.push(Dottoro.AddListener("mouseout",[this,"onMouseOut"],
this.holder));this.HideWrapper();if(this.settings.fullcontent)Dottoro.SetElemHtml(this.holder,this.settings.fullcontent),this.collect(),this.settings.framesrc?(a=Dottoro.GetElemsByClass("dottoro_dialog_body",this.holder),a.length&&this.AddFrame(a[0])):this.FinalizeCreate(),this.makeDraggable();else if(this.settings.simplecontent)Dottoro.SetElemHtml(this.holder,this.settings.simplecontent),this.FinalizeCreate();else{this.titleBar=Dottoro.CreateElement("div",this.holder,{className:"dottoro_dialog_title_bar"});
a=this.holder;this.settings.title&&(Dottoro.CreateElement("div",this.titleBar,{className:"dottoro_dialog_title",innerHTML:this.settings.title}),a=this.titleBar);this.settings.createbuttons&&this.settings.createclosebutton&&(d=Dottoro.CreateElement("a",a,{className:"dottoro_dialog_close_button",title:this.settings.closebuttontitle}),this.eventHandlers.push(Dottoro.AddListener("click",[this,"onClickClose"],d)),this.addToTitleBarButtons("close",d));this.settings.fullscreenbutton&&Dottoro.FullscreenApi.IsSupported()&&
(d=Dottoro.CreateElement("a",a,{className:"dottoro_dialog_toggle_fullscreen",title:this.settings.fullscreenbuttontitle}),this.addFullScreenButton(d,"toggle"));this.settings.helpurl&&(d=Dottoro.CreateElement("a",a,{className:"dottoro_dialog_help_button",title:this.settings.helpbuttontitle}),this.eventHandlers.push(Dottoro.AddListener("click",[this,"onClickHelp"],d)),this.addToTitleBarButtons("help",d));this.settings.transbutton&&(d=Dottoro.CreateElement("a",a,{className:"dottoro_dialog_trans_button "+
(this.settings.autotrans?"on":"off"),title:this.settings.transbuttontitle}),this.eventHandlers.push(Dottoro.AddListener("click",[this,"onClickAutoTrans"],d)),this.addToTitleBarButtons("trans",d),this.autoTransButtons.push(d));this.addTitleButtonClasses();b=0<this.settings.custombuttons.length||this.settings.createbuttons&&(this.settings.createokbutton||this.settings.createcancelbutton);d="dottoro_dialog_body";d=b?d+(" hasButtons"+("right"==this.settings.buttonsalign?" buttonsRight":" buttonsBottom")):
d+" noButtons";this.body=a=Dottoro.CreateElement("div",this.holder,{className:d});if(b){var d=Dottoro.CreateElement("table",a,{cellPadding:"0px",cellSpacing:"0px",className:"dottoro_dialog_table"}),b=Dottoro.CreateElement("tbody",d),c=Dottoro.CreateElement("tr",b),e=Dottoro.CreateElement("td",c,{className:"dottoro_dialog_body_cell",vAlign:"top"}),a=Dottoro.CreateElement("div",e,{className:"dottoro_dialog_table_body"});this.bodyTable=d;this.tableBody=a;"right"!=this.settings.buttonsalign&&(c=Dottoro.CreateElement("tr",
b,{className:"dottoro_dialog_buttons_row"}));e=Dottoro.CreateElement("td",c,{className:"dottoro_dialog_buttons_cell",vAlign:"bottom"});b=Dottoro.CreateElement("div",e,{className:"dottoro_dialog_buttons_holder"});for(c=0;c<this.settings.custombuttons.length;c++){var f=this.settings.custombuttons[c],e="innerHTML"in f?f.innerHTML:"",d="dottoro_dialog_button customButton";"className"in f&&(d+=" "+f.className);var f="id"in f?f.id:"customButton_"+(c+1),g=Dottoro.CreateElement("div",b,{className:"dottoro_dialog_button_holder"}),
d=Dottoro.CreateElement("a",g,{innerHTML:e,className:d});this.eventHandlers.push(Dottoro.AddListener("click",[this,"onButton"],d,{},f));this.buttons[f]={html:d,enabled:!0}}this.settings.createokbutton&&(g=Dottoro.CreateElement("div",b,{className:"dottoro_dialog_button_holder"}),d=Dottoro.CreateElement("a",g,{innerHTML:this.settings.okbuttontext,className:"dottoro_dialog_button okButton"}),this.eventHandlers.push(Dottoro.AddListener("click",[this,"onButton"],d,{},"ok")),this.buttons.ok={html:d,enabled:!0});
this.settings.createcancelbutton&&(g=Dottoro.CreateElement("div",b,{className:"dottoro_dialog_button_holder"}),d=Dottoro.CreateElement("a",g,{innerHTML:this.settings.cancelbuttontext,className:"dottoro_dialog_button cancelButton"}),this.eventHandlers.push(Dottoro.AddListener("click",[this,"onButton"],d,{},"cancel")),this.buttons.cancel={html:d,enabled:!0})}this.settings.content?(Dottoro.SetElemHtml(a,this.settings.content),0<=this.settings.contentw&&(a.style.width=this.settings.contentw+"px"),0<=
this.settings.contenth&&(a.style.height=this.settings.contenth+"px"),this.FinalizeCreate()):this.AddFrame(a);this.makeDraggable()}},AddFrame:function(a){this.iframe=Dottoro.CreateElement("iframe",a,{className:"bodyFrame",border:"0",frameBorder:"0",marginWidth:"0",marginHeight:"0",leftMargin:"0",topMargin:"0",allowTransparency:"allowtransparency"});Dottoro._setData(this.iframe,"dialog/obj",this);this.eventHandlers.push(Dottoro.AddListener("load",[this,"onFrameLoad"],this.iframe));this.settings.framesrc?
this.LoadFrame():this.CreateFrame()},addFullScreenButton:function(a,b){Dottoro.FullscreenApi.IsSupported()?(this.eventHandlers.push(Dottoro.AddListener("click",[this,"onClickFullScreen"],a,!1,b)),this.titleBar&&Dottoro.IsAncestorOf(this.titleBar,a)&&this.addToTitleBarButtons("fullscreen",a,b)):Dottoro.ModifyCSSClass(a,"disabled")},collect:function(){this.titleBar=Dottoro.GetElemsByClass("dottoro_dialog_title_bar",this.holder)[0];for(var a=Dottoro.GetElemsByClass("dottoro_dialog_close_button",this.holder),
b=0;b<a.length;b++){var c=a[b];this.eventHandlers.push(Dottoro.AddListener("click",[this,"onClickClose"],c));this.titleBar&&Dottoro.IsAncestorOf(this.titleBar,c)&&this.addToTitleBarButtons("close",c)}a=Dottoro.GetElemsByClass("dottoro_dialog_toggle_fullscreen",this.holder);for(b=0;b<a.length;b++)this.addFullScreenButton(a[b],"toggle");a=Dottoro.GetElemsByClass("dottoro_dialog_go_fullscreen",this.holder);for(b=0;b<a.length;b++)this.addFullScreenButton(a[b],"go");a=Dottoro.GetElemsByClass("dottoro_dialog_exit_fullscreen",
this.holder);for(b=0;b<a.length;b++)this.addFullScreenButton(a[b],"exit");a=Dottoro.GetElemsByClass("dottoro_dialog_help_button",this.holder);for(b=0;b<a.length;b++)c=a[b],this.eventHandlers.push(Dottoro.AddListener("click",[this,"onClickHelp"],c)),this.titleBar&&Dottoro.IsAncestorOf(this.titleBar,c)&&this.addToTitleBarButtons("help",c);a=Dottoro.GetElemsByClass("dottoro_dialog_trans_button",this.holder);for(b=0;b<a.length;b++)c=a[b],this.eventHandlers.push(Dottoro.AddListener("click",[this,"onClickAutoTrans"],
c)),this.titleBar&&Dottoro.IsAncestorOf(this.titleBar,c)&&this.addToTitleBarButtons("help",c),Dottoro.AddRemoveCSSClass(c,this.settings.autotrans,"on","off");this.addTitleButtonClasses();this.body=Dottoro.GetElemsByClass("dottoro_dialog_body",this.holder)[0]},addToTitleBarButtons:function(a,b,c){this.titleButtons[a]=this.titleButtons[a]||[];this.titleButtons[a].push({button:b,data:c})},addTitleButtonClasses:function(){var a=[],b=0,c;for(c in this.titleButtons)a.push("hastitlebutton_"+c),b+=this.titleButtons[c].length;
b&&(a.push("titlebuttons_"+b),Dottoro.ModifyCSSClass(this.holder,a))},makeDraggable:function(){this.settings.draggable&&this.titleBar&&(this.dragObj=new Dottoro.Drag,this.dragObj.SetTerritory(this.ownerDoc.documentElement),this.dragObj.SetSetting("cursor","pointer"),this.dragObj.SetDragElem(this.holder),this.dragObj.AddSticky(this.titleBar),this.dragObj.ListenMouseDown(!0),this.dragObj.AddListener("drag_mousedown",[this,"onTitleDragMouseDown"]),this.dragObj.AddListener("drag_start",[this,"onTitleDragStart"]))},
InsertCSS:function(){if(!this.iframe&&this.settings.css){var a=document.getElementsByTagName("head")[0];if(a){var b=document.createElement("style");a.appendChild(b);"textContent"in b?b.textContent=this.settings.css:(b.sheet?b.sheet:b.styleSheet).cssText=this.settings.css;this.styleTag=b}}},GetInnerElem:function(){for(var a=["iframe","tableBody","body","holder"],b=0;b<a.length;b++){var c=a[b];if(this[c])return this[c]}return null},FinalizeCreate:function(){this.InsertCSS();if(!this.iframe){var a=this.GetInnerElem();
Dottoro.CssEx&&(this.cssEx=Dottoro.CssEx.Create(a,this),this.buildCssExHandler=Dottoro.ContentReady([this,"BuildCssEx"],25));Dottoro.CallContentReadyHandlers(this.holder)}this.SetIframeSize();this.FrameMessage("created");this.FireEvent("created")},BuildCssEx:function(a){a==this.holder&&(Dottoro.RemoveContentReadyHandler(this.buildCssExHandler),delete this.buildCssExHandler,this.cssEx.Build())},Destroy:function(){this.CancelAutoClose();this.destroyAfterHide=!0;this.Hide()},DestroyAfterHide:function(){this.destroyAfterHide=
!1;Dottoro.RemoveListener(this.eventHandlers);this.eventHandlers=[];Dottoro._removeData(this.holder,"dialog/obj");this.iframe&&Dottoro._removeData(this.iframe,"dialog/obj");Dottoro.RemoveNode(this.modalWrapper);Dottoro.RemoveNode(this.opacDiv);this.opacDiv=null;this.buttons={};Dottoro.RemoveNode(this.styleTag);this.styleTag=null;this.cssEx&&this.cssEx.Detach(this.holder);this.iframe||Dottoro.CallContentRemovedHandlers(this.holder);for(var a=this.holder.getElementsByTagName("video"),b=a.length,c=0;c<
b;c++)a[c].src="";Dottoro.RemoveNode(this.holder);this.modalWrapper=this.holder=null;this.FireEvent("destroyed");this.Detach()},IsCreated:function(){return null!=this.holder},MoveWindow:function(a,b){var c={left:1,top:1,right:1,bottom:1};if(this.IsVisible()){for(var d in c)d in a&&(this.holder.style[d]=a[d]+"px");b&&this.MoveIntoView();this.dragged=!1}else{this.posOnShow||(this.posOnShow={});for(d in c)d in a&&(this.posOnShow[d]=a[d]);this.posOnShow.moveIntoView=b}},MoveIntoView:function(a){var b=
this.settings.position;a=Dottoro.Extend({horiz:"centered"!=b&&"centered-horiz"!=b,vert:"centered"!=b&&"centered-vert"!=b},a);if(this.IsCreated()){var b=this.GetDialSize(!0),c=Dottoro.GetLeftTopInClient(this.holder);b.left=c.left-this.settings.marginleft;b.top=c.top-this.settings.margintop;b.right=b.left+b.width;b.bottom=b.top+b.height;var d=c=0;if(a.horiz){var e=Dottoro.GetClientWinWidth(this.ownerDoc);b.right>e&&(c=e-b.right);0>b.left+c&&(c=-1*b.left)}a.vert&&(a=Dottoro.GetClientWinHeight(this.ownerDoc),
b.bottom>a&&(d=a-b.bottom),0>b.top+d&&(d=-1*b.top));if(c||d)b={},a=Dottoro.GetSpecifiedRect(this.holder),c&&("auto"!=a.left&&(b.left=Dottoro.GetPixelLength(this.holder,"left")+c),"auto"!=a.right&&(b.right=Dottoro.GetPixelLength(this.holder,"right")-c)),d&&("auto"!=a.top&&(b.top=Dottoro.GetPixelLength(this.holder,"top")+d),"auto"!=a.bottom&&(b.bottom=Dottoro.GetPixelLength(this.holder,"bottom")-d)),this.MoveWindow(b,!1)}},HideWrapper:function(a){this.modalWrapper&&!a&&Dottoro.SetStyle(this.settings.profile,
this.modalWrapper,{width:"0px",height:"0px",right:"auto",bottom:"auto"});Dottoro.SetStyle(this.settings.profile,this.holder,{left:"-10000px",top:"-10000px",right:"auto",bottom:"auto",maxWidth:"9000px",maxHeight:"9000px"});this.visible=!1;this.posOnShow&&delete this.posOnShow},ShowWrapper:function(){this.modalWrapper&&Dottoro.RestoreStyle(this.settings.profile,this.modalWrapper);Dottoro.RestoreStyle(this.settings.profile,this.holder);this.visible=!0;this.settings.fullscreen&&Dottoro.FullscreenApi.Make(this.modalWrapper?
this.modalWrapper:this.holder);this.posOnShow&&(this.MoveWindow(this.posOnShow,this.posOnShow.moveIntoView),delete this.posOnShow)},Show:function(){if(this.IsCreated())if(this.IsVisible())this.showAnim&&this.showAnim.IsRunning()&&(this.destroyAfterHide=!1,this.showAnim.Start());else if(this.mediasLoaded||!this.settings.mediapreload||this.iframe){this.ShowWrapper();this.FrameMessage("beforeshow");this.FireEvent("beforeshow");var a=null;0<this.settings.showanimduration&&(a=Dottoro.Clone(this.settings.showanimprops,
!0),Dottoro.GetCssTransformSupport()||"trafo"in a&&delete a.trafo);if(!a||Dottoro.IsObjEmpty(a))this.UpdatePlacement();else{var b=this.settings.moveintoview;this.settings.moveintoview=!1;this.UpdatePlacement();this.settings.moveintoview=b;var a=[{elem:this.holder,props:a}],c={profile:this.settings.profile_anim,easing:this.settings.showanimeasing,callback:[this,"onShowAnim"],forceRedraw:this.settings.forceredraw};b&&(c.skipFirst=!0);this.showAnim=new Dottoro.Anim(a,this.settings.showanimduration,c);
b&&(this.showAnim.Reset(!0),this.MoveIntoView(),this.showAnim.Reset(!1))}this.SetTrans(!1);if(!this.showAnim)this.onShowFinished()}else this.preload||(this.ShowWrapper(),this.UpdatePlacement(),this.HideWrapper(!0),this.opacDiv&&(this.preloaderAnim=new Dottoro.PreloaderAnim(this.opacDiv,0,"nobg")),b=this.GetInnerElem(),this.preload=Dottoro.Medias.Preload([this,"onMediasReady"],b))},Hide:function(){"hide"==this.settings.actiononclose&&this.CancelAutoClose();if(this.IsVisible()||this.preload)if(this.showAnim)this.showAnim.Start({back:!0});
else this.onHideFinished()},Close:function(){this.settings.fullscreen&&Dottoro.FullscreenApi.Exit(this.modalWrapper?this.modalWrapper:this.holder);"hide"==this.settings.actiononclose?this.Hide():this.Destroy()},CancelAutoClose:function(){this.autoCloseTimerId&&(Dottoro.Timer.Remove(this.autoCloseTimerId),this.autoCloseTimerId="")},IsVisible:function(){return this.IsCreated()?this.visible:!1},SetButtonState:function(a,b){a in this.buttons&&((this.buttons[a].enabled=b)?Dottoro.ModifyCSSClass(this.buttons[a].html,
null,"disabled"):Dottoro.ModifyCSSClass(this.buttons[a].html,"disabled"))},GetFrameWindow:function(){var a=null;if(this.iframe)try{a=this.iframe.contentWindow}catch(b){}return a},GetFrameDoc:function(){var a=null,b=this.GetFrameWindow();if(b)try{a=b.document}catch(c){}return a},SetFrameContents:function(a){var b=this.GetFrameDoc();b&&(b.open(),b.write(a),b.close())},LoadFrame:function(){this.iframe&&(this.iframe.src=this.settings.framesrc)},CreateFrame:function(){if(this.settings.framedoccontent)var a=
this.settings.framedoccontent;else{for(var b=a="",c=0;c<this.frameCssFiles.length;c++)a+='<link rel="stylesheet" type="text/css" href="'+this.frameCssFiles[c]+'"></link>';for(c=0;c<this.frameJsFiles.length;c++)b+='<script type="text/javascript" src="'+this.frameJsFiles[c]+'">\x3c/script>';this.frameBaseClasses.join(" ");a=Dottoro.Sprintf(this.settings.framecontentpattern,a,b,this.frameBaseClasses.join(" "),this.settings.framecontent)}this.SetFrameContents(a)},GetDialSize:function(a){var b=Dottoro.GetSize(this.holder);
a&&(b.width+=this.settings.marginleft+this.settings.marginright,b.height+=this.settings.margintop+this.settings.marginbottom);return b},GetMaxDialSize:function(){var a={width:Dottoro.GetClientWinWidth(this.ownerDoc),height:Dottoro.GetClientWinHeight(this.ownerDoc)};a.width-=this.settings.marginleft+this.settings.marginright;a.height-=this.settings.margintop+this.settings.marginbottom;return a},GetExtraMargin:function(){var a={x:0,y:0};if("view"==this.settings.sizelimit){var b=Dottoro.GetClientWinWidth(this.ownerDoc),
c=Dottoro.GetClientWinHeight(this.ownerDoc),d=this.GetDialSize(!0),e=this.settings.marginleft-this.settings.marginright,b=d.width+Math.abs(e)-b;0!=e&&0<b&&(a.x+=0>e?b:-b);e=this.settings.margintop-this.settings.marginbottom;c=d.height+Math.abs(e)-c;0!=e&&0<c&&(a.y+=0>e?c:-c)}return a},UpdatePosition:function(){var a=this.GetDialSize(!1);switch(this.settings.position){case "centered":var b=this.GetExtraMargin();Dottoro.SetStyle(this.settings.profile,this.holder,"marginLeft",-.5*(a.width+b.x)+"px");
Dottoro.SetStyle(this.settings.profile,this.holder,"marginTop",-.5*(a.height+b.y)+"px");break;case "centered-horiz":b=this.GetExtraMargin();Dottoro.SetStyle(this.settings.profile,this.holder,"marginLeft",-.5*(a.width+b.x)+"px");break;case "centered-vert":b=this.GetExtraMargin(),Dottoro.SetStyle(this.settings.profile,this.holder,"marginTop",-.5*(a.height+b.y)+"px")}},UpdateSize:function(){if(this.body){var a=this.body.style.overflow;this.body.style.overflow="visible"}for(var b=["holder","body","tableBody",
"iframe"],c=0;c<b.length;c++)this[b[c]]&&Dottoro.RestoreStyle(this.settings.profile,this[b[c]]);this.cssEx&&this.cssEx.Reset();if("view"==this.settings.sizelimit){var d=this.GetMaxDialSize(),e=Dottoro.GetSize(this.holder),f=d.width-e.width,e=d.height-e.height;if(0>f||0>e){d=Dottoro.GetSize(this.holder,Dottoro.BOX_INNER);f=0>f?d.width+f:0;e=0>e?d.height+e:0;0<f&&Dottoro.SetStyle(this.settings.profile,this.holder,"maxWidth",f+"px");0<e&&Dottoro.SetStyle(this.settings.profile,this.holder,"maxHeight",
e+"px");for(var g=Dottoro.GetVertOverflow(this.holder),b=["body","tableBody","iframe"],c=0;c<b.length;c++){var h=this[b[c]];h&&(e=Dottoro.GetSize(h),d=Dottoro.GetSize(h,Dottoro.BOX_INNER),0<f&&e.width>f&&(f=Math.max(0,d.width+(f-e.width)),0<f&&Dottoro.SetStyle(this.settings.profile,h,"maxWidth",f+"px")),0<g&&(e=Math.max(0,d.height-g),Dottoro.SetStyle(this.settings.profile,h,"maxHeight",e+"px")),g=Dottoro.GetVertOverflow(h))}}}this.cssEx&&this.cssEx.Recalc();Dottoro.isIEOlder(9)&&this.body&&(f=this.body.style.position,
this.body.style.position="absolute",this.body.style.position=f);this.body&&(this.body.style.overflow=a)},SetCenteredLT:function(a,b){var c=b?"0px":"50%",d=this.settings.position;if("centered"==d||"centered-horiz"==d||"centered-vert"==d)switch(d){case "centered":a.left=c;a.top=c;break;case "centered-horiz":a.left=c;break;case "centered-vert":a.top=c}},UpdatePlacement:function(){this.IsVisible()&&("view"==this.settings.sizelimit&&this.SetCenteredLT(this.holder.style,!0),this.UpdateSize(),this.UpdatePosition(),
"view"==this.settings.sizelimit&&this.SetCenteredLT(this.holder.style),this.settings.moveintoview&&this.MoveIntoView())},SetIframeSize:function(){if(this.iframe){var a=this.settings.framecalcsize&&(0>this.settings.framew||0>this.settings.frameh)?this.GetFrameDoc():null;0<=this.settings.framew?this.iframe.style.width=this.settings.framew+"px":a&&(this.iframe.style.width=a.documentElement.scrollWidth+"px");0<=this.settings.frameh?this.iframe.style.height=this.settings.frameh+"px":a&&(this.iframe.style.height=
a.documentElement.scrollHeight+"px")}},SetTrans:function(a){this.trans!=a&&(a?Dottoro.ModifyCSSClass(this.holder,"trans"):Dottoro.ModifyCSSClass(this.holder,"","trans"),this.trans=a)},EnableAutoTrans:function(a){if(this.settings.autotrans!==a){this.settings.autotrans=a;this.settings.autotrans||this.SetTrans(!1);for(a=0;a<this.autoTransButtons.length;a++)Dottoro.AddRemoveCSSClass(this.autoTransButtons[a],this.settings.autotrans,"on","off");this.FrameMessage("autotranschanged",{state:this.settings.autotrans});
this.FireEvent("autotranschanged",{state:this.settings.autotrans})}},onMessage:function(a,b){switch(a){case "contentsizechanged":this.UpdatePlacement();return}this._super(a,b)},FrameMessage:function(a,b){if(this.iframe){var c=this.GetFrameWindow();if(c)if(this.settings.frameexternal)c.postMessage&&c.postMessage(Dottoro.JSONEncode({type:a,data:b}),"*");else try{if("Dottoro_dialog_message"in c)return c.Dottoro_dialog_message.apply(null,[a,b])}catch(d){}}return null},hidePreloader:function(){this.preloaderAnim&&
(this.preloaderAnim.Stop(),this.preloaderAnim=null)},onFrameLoad:function(a,b){this.FinalizeCreate();this.FrameMessage("frameload");this.FireEvent("frameload")},onMediasReady:function(){this.mediasLoaded=!0;delete this.preload;this.hidePreloader();this.Show()},onButton:function(a,b,c){if(!(c in this.buttons)||this.buttons[c].enabled)switch(c){case "ok":this.onOk();break;case "cancel":this.onCancel();break;default:this.onCustomButton(a,b,c)}},onCustomButton:function(a,b,c){!1!==this.FrameMessage("custombutton",
{id:c})&&this.FireEvent("custombutton")},onOk:function(){!1!==this.FrameMessage("ok")&&(this.FireEvent("ok")||this.Close())},onCancel:function(){!1!==this.FrameMessage("cancel")&&(this.FireEvent("cancel")||this.Close())},onClickClose:function(a){this.onCancel();Dottoro.StopPropagation(a)},onClickFullScreen:function(a,b,c){b=this.modalWrapper?this.modalWrapper:this.holder;switch(c){case "toggle":Dottoro.FullscreenApi.Toggle(b);this.settings.fullscreen=!this.settings.fullscreen;break;case "go":Dottoro.FullscreenApi.Make(b);
this.settings.fullscreen=!0;break;case "exit":Dottoro.FullscreenApi.Exit(b),this.settings.fullscreen=!1}Dottoro.StopPropagation(a)},onClickInside:function(a){Dottoro.StopPropagation(a)},onMouseDownInside:function(a){Dottoro.StopPropagation(a)},onTitleDragMouseDown:function(a,b,c,d,e,f){for(var g in this.titleButtons)for(a=0;a<this.titleButtons[g].length;a++)if(Dottoro.IsAncestorOf(this.titleButtons[g][a].button,f))return c.preventDefault&&c.preventDefault(),!1},onTitleDragStart:function(a,b,c){this.dragged=
!0},onMouseOver:function(a){this.SetTrans(!1)},onMouseOut:function(a){if(this.settings.autotrans&&(!this.dragObj||!this.dragObj.DuringDrag())){a=Dottoro.GetMouseClientCoords(a);var b=Dottoro.GetBox(this.holder);Dottoro.IsPointInRect(a,b)||this.SetTrans(!0)}},onClickOutside:function(a){if(this.settings.outclickclose)this.onCancel();return Dottoro.CancelEvent(a)},onClickHelp:function(a){this.settings.helpurl&&window.open(this.settings.helpurl,"_blank")},onClickAutoTrans:function(a){this.EnableAutoTrans(!this.settings.autotrans)},
onKeyDown:function(a){if(27==a.keyCode)return this.onCancel(),Dottoro.CancelEvent(a)},onShowAnim:function(a,b,c){if(0>c)if(Dottoro.Timer.IsBack(b))Dottoro.RestoreStyle(this.settings.profile_anim,this.holder),this.showAnim=null,this.onHideFinished();else this.onShowFinished()},onShowFinished:function(){if(this.settings.autofocus){var a=Dottoro.GetElemsByClass("js-autofocus",this.holder);(0<a.length?a[0]:this.holder).focus()}this.settings.closeonesc&&this.eventHandlers.push(Dottoro.AddListener("keydown",
[this,"onKeyDown"],this.holder));0<this.settings.autoclose&&(this.autoCloseTimerId=Dottoro.SetTimeout([this,"Close"],this.settings.autoclose));this.FrameMessage("show");this.FireEvent("show")},onHideFinished:function(){this.HideWrapper();this.preload&&(this.preload.Destroy(),delete this.preload);this.hidePreloader();this.FrameMessage("hide");this.FireEvent("hide");this.destroyAfterHide&&this.DestroyAfterHide()},onWinResized:function(){this.UpdatePlacement()}});
Dottoro.Dialog.GetOwnerDialog=function(a){return Dottoro.GetHolderObject(a,Dottoro.Dialog)};
Dottoro.Overlay=Dottoro.Section.extend({init:function(a){this._super();this.initSettings();this.overlayWrapper=null;this.eventHandlers=[];this.visible=!1},initSettings:function(){this.settings.width=0;this.settings.height=0;this.settings.ownerelem=null;this.settings.overlayelem=null;this.settings.galleryobj=null;this.settings.galleryiconclass="";this.settings.onclick="auto";this.settings.visibility="on_hover";this.settings.boxpos="padding";this.settings.smallwidth=130;this.settings.smallheight=130},
getDirection:function(a,b){var c=Dottoro.GetMouseClientCoords(a,b.ownerDocument),d=Dottoro.GetBox(b),e=(c.x-d.right)*d.height+(c.y-d.top)*d.width;return 0<(c.x-d.left)*d.height-(c.y-d.top)*d.width?0<e?"right":"top":0<e?"bottom":"left"},checkFocus:function(){var a=document.activeElement,b=this.settings.ownerelem;a&&Dottoro.IsAncestorOf(b,a)||(Dottoro.Timer.Remove(this.timerId,!0),delete this.timerId,this.touchOpen=!1,this.showHide(!1,""))},onTouchStart:function(a,b){!this.touchOpen&&"pointerType"in
a&&"mouse"!==a.pointerType&&4!==a.pointerType&&a.buttons&&1==a.buttons&&(this.touchOpen=!0,this.showHide(!0,""),this.timerId=Dottoro.Timer.Add([this,"checkFocus"],{duration:-1}),this.skipClick=!0)},onMouseEnter:function(a,b){if(!("pointerType"in a&&"mouse"!==a.pointerType&&4!==a.pointerType||this.touchOpen)){var c=this.getDirection(a,b);this.showHide(!0,c)}},onMouseLeave:function(a,b){if(!("pointerType"in a&&"mouse"!==a.pointerType&&4!==a.pointerType||this.touchOpen)){var c=this.getDirection(a,b);
this.showHide(!1,c)}},showHide:function(a,b){this.visible!=a&&((this.visible=a)?this.Show(b,!0):this.Hide(b))},initOverlayElem:function(){this.overlayWrapper||this.generateOverlay()&&"always"==this.settings.visibility&&this.Show("",!1)},generateOverlay:function(){if(!this.settings.ownerelem||!this.settings.overlayelem)return!1;var a=Dottoro.GetStyle(this.settings.ownerelem,"position");"absolute"!=a&&"fixed"!=a&&"relative"!=a&&(this.settings.ownerelem.style.position="relative");this.overlayWrapper=
Dottoro.CreateElement("div",this.settings.ownerelem,{className:"dottoro_overlay_wrapper"},{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",display:"none"});a=Dottoro.CreateElement("div",this.overlayWrapper,{},{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",background:"#fff",zIndex:1});Dottoro.SetOpacity(a,0);this.overlayWrapper.appendChild(this.settings.overlayelem);a=this.settings.overlayelem.style;a.display="block";a.position="absolute";a.zIndex=2;a.left="0";a.top="0";a.right=
"0";a.bottom="0";return!0},onClick:function(a){if(!this.duringClick)if(this.skipClick)delete this.skipClick;else if("auto"==this.settings.onclick){for(var b=null,c=this.overlayWrapper.getElementsByTagName("a"),d=0;d<c.length;d++){var e=c[d],f=e.getAttribute("href");if(f&&"#"!=f||Dottoro.HasCSSClass(e,"overlay_button")){if(b){b=null;break}b=e}}if(b&&!Dottoro.IsAncestorOf(b,a.target?a.target:a.srcElement))return this.duringClick=!0,b.click(),this.duringClick=!1,Dottoro.PreventDefault(a)}},layersFinished:function(){this._super();
this.overlayWrapper.style.display="none";this.FireEvent("afterhide")},Show:function(a,b){if(!this.overlayWrapper)return!1;this.overlayWrapper.style.visibility="hidden";this.overlayWrapper.style.display="block";this.refreshOverlay();this.FireEvent("beforeshow",{mousedir:a});this.overlayWrapper.style.visibility="visible";b&&this.FireEvent("aftershow")},refreshOverlay:function(){this.overlayWrapper&&(this.refreshPositions(),this.refreshCSSClasses())},refreshCSSClasses:function(){var a=Dottoro.GetSize(this.overlayWrapper);
a.width<this.settings.smallwidth||a.height<this.settings.smallheight?Dottoro.ModifyCSSClass(this.overlayWrapper,"small",""):Dottoro.ModifyCSSClass(this.overlayWrapper,"","small")},refreshPositions:function(){var a=Dottoro.BOX_PADDING,b={border:Dottoro.BOX_BORDER,content:Dottoro.BOX_INNER};this.settings.boxpos in b&&(a=b[this.settings.boxpos]);var c=b=0,d=0,e=0;a!=Dottoro.BOX_PADDING&&(a=Dottoro.GetBox(this.settings.ownerelem,a),e=Dottoro.GetBox(this.settings.ownerelem,Dottoro.BOX_PADDING),b=a.left-
e.left,c=a.top-e.top,d=e.right-a.right,e=e.bottom-a.bottom);a=this.overlayWrapper.style;a.left=b+"px";a.top=c+"px";a.right=d+"px";a.bottom=e+"px"},Hide:function(a){this.refreshOverlay();this.FireEvent("beforehide",{mousedir:a});"on_hover"==this.settings.visibility&&(this.listenLayers(),this.checkFinishedLayers())},Attach:function(){this.settings.overlayelem&&this._super(this.settings.overlayelem)},Activate:function(){if(this.settings.ownerelem){var a=this.settings.ownerelem;a.tabIndex=-1;a.getAttribute("href")&&
a.removeAttribute("href");var b=Dottoro.SupportTouchPoints();b&&Dottoro.AddTouchListener("start",[this,"onTouchStart"],a);b=b?{enter:"pointerenter",leave:"pointerleave"}:{enter:"mouseenter",leave:"mouseleave"};this.eventHandlers.push(Dottoro.AddListener(b.enter,[this,"onMouseEnter"],a));this.eventHandlers.push(Dottoro.AddListener(b.leave,[this,"onMouseLeave"],a));this.eventHandlers.push(Dottoro.AddListener("click",[this,"onClick"],a));this.initOverlayElem()}},Detach:function(){Dottoro.RemoveNode(this.overlayWrapper);
Dottoro.RemoveListener(this.eventHandlers);this.eventHandlers=[];this._super()}});
(function(){Dottoro.RegisterTagParser("overlay",function(b,c,d){c=new Dottoro.Overlay;var e=b.getAttribute("data-dottoro_params");b.removeAttribute("href");b.style.cursor="default";c.ReadSettings(e);e=c.GetSetting("ownerelem");e||(e=b,c.SetSetting("ownerelem",e));c.Attach();Dottoro.ContentRemoved(e,[c,"Detach"]);a[d]=a[d]||[];a[d].push(c)});Dottoro.ContentReady(function(b,c){if(a[c]){for(var d=0;d<a[c].length;d++)a[c][d].Activate();delete a[c]}},30);var a={}})();
Dottoro.Layer=Dottoro.ClassEventsSettings.extend({init:function(){this._super();this.initSettings();this.layer=null;this.finished=!1;this.sectionListeners=[]},initSettings:function(){this.settings.layer=null;this.settings.startevent="after_show";this.settings.starttime=1E3;this.settings.startduration=20;this.settings.duration=4E3;this.settings.start="";this.settings.starteasing="ease";this.settings.on="";this.settings.showonce=!1;this.settings.endasstarted=!1;this.settings.breakanim=!1;for(var a=
["start","starttime","startduration","starteasing","on"],b=["left","top","right","bottom"],c=0;c<a.length;c++)for(var d=Dottoro.TypeOf(this.settings[a[c]]),e=0;e<b.length;e++)this.settingsProp[a[c]+"_"+b[e]]={type:d};this.settingsProp.end={type:Dottoro.TypeOf(this.settings.start)};this.settingsProp.endduration={type:Dottoro.TypeOf(this.settings.startduration)};this.settingsProp.endeasing={type:Dottoro.TypeOf(this.settings.starteasing)};a=["end","endduration","endeasing"];for(c=0;c<a.length;c++)for(e=
0;e<b.length;e++)this.settingsProp[a[c]+"_"+b[e]]={type:this.settingsProp[a[c]].type}},initLayer:function(){this.layer=Dottoro.GetElement(this.settings.layer);this.start=this.parseProps(this.settings.start);this.on=this.parseProps(this.settings.on);"end"in this.settings&&(this.end=this.parseProps(this.settings.end));for(var a=["start","on","end"],b=["left","top","right","bottom"],c=0;c<a.length;c++)for(var d=0;d<b.length;d++){var e=a[c]+"_"+b[d];e in this.settings&&(this[e]=this.parseProps(this.settings[e]))}},
parseProps:function(a){return Dottoro.SplitSettings(a,!0)},createProps:function(a,b,c){for(var d in a){d in b||(b[d]={});var e=b[d],f=a[d];if(Dottoro.IsObject(f))for(var g in f)"originX"==g||"originY"==g?g in e||(e[g]=f[g]):(g in e||(e[g]={}),e[g][c]=f[g]);else e[c]=f}},createFromToProps:function(a,b){var c={};a&&this.createProps(a,c,"from");this.createProps(b,c,"to");return c},onBeforeShow:function(a,b,c){a=c&&"mousedir"in c?c.mousedir:"";b="before_"==this.settings.startevent.substr(0,7);this.startShowLayer(b,
a)},onShow:function(){this.startShowAfter&&(this.startAnim&&this.startAnim.Start({startDelay:this.startShowDelay}),this.startShowAfter=!1)},onHide:function(a,b,c){if(this.startAnim){if(this.startAnim.IsRunning())if(this.settings.breakanim)this.startAnim.Stop(!0);else{this.startAnim.Start({back:!0});return}this.startHideLayer(0,c&&"mousedir"in c?c.mousedir:"")}},onHideEnd:function(){this.startAnim&&this.startAnim.IsRunning()&&this.startAnim.Stop(!0);this.endAnim&&this.endAnim.IsRunning()&&this.endAnim.Stop(!0);
Dottoro.ModifyCSSClass(this.layer,"","visible")},startShowLayer:function(a,b){this.startShowAfter=!1;if(!this.skipShow)if(this.startAnim&&this.startAnim.IsRunning())this.startAnim.Start();else{var c=!1;if(this.endAnim&&this.endAnim.IsRunning())if(this.settings.breakanim)this.endAnim.Stop(!0),c=!0;else{this.endAnim.Start({back:!0});return}var d=this.start;b&&"start_"+b in this&&(d=Dottoro.Extend(Dottoro.Clone(d),this["start_"+b]));var e=this.on;b&&"on_"+b in this&&(e=Dottoro.Extend(Dottoro.Clone(e),
this["on_"+b]));var f={easing:"starteasing",delay:"starttime",duration:"startduration"},g;for(g in f){var h=f[g]+"_"+b;f[g]=b&&h in this.settings?this.settings[h]:this.settings[f[g]]}this.startCur={from:d,easing:f.easing,delay:f.delay,duration:f.duration};this.onCur=Dottoro.Extend(Dottoro.Clone(d),e);c=this.createFromToProps(c?null:d,e);d={easing:f.easing,callback:[this,"onStartAnim"]};a?d.startDelay=f.delay:(this.startShowAfter=!0,this.startShowDelay=f.delay,d.start=0);Dottoro.ModifyCSSClass(this.layer,
"visible");this.startAnim=new Dottoro.Anim({elem:this.layer,props:c},f.duration,d);a||this.startAnim.Reset();this.finished=!1}},onStartAnim:function(a,b,c){0>c&&(this.settings.showonce&&(this.skipShow=!0),Dottoro.Timer.IsBack(b)?(this.finished=!0,this.FireEvent("finished")):0<this.settings.duration&&this.startHideLayer(this.settings.duration))},startHideLayer:function(a,b){if(this.endAnim&&this.endAnim.IsRunning())this.endAnim.Start();else if(!this.finished){var c="end"in this?this.end:null;b&&"end_"+
b in this&&(c=Dottoro.Extend(Dottoro.Clone(c),this["end_"+b]));c||(this.settings.endasstarted?c=this.startCur.from:(c=this.start,b&&"start_"+b in this&&(c=Dottoro.Extend(Dottoro.Clone(c),this["start_"+b]))));var d={easing:"endeasing",duration:"endduration"},e={easing:"starteasing",duration:"startduration"},f;for(f in d){var g=d[f]+"_"+b;b&&g in this.settings?d[f]=this.settings[g]:d[f]in this.settings?d[f]=this.settings[d[f]]:this.settings.endasstarted?d[f]=this.startCur[f]:(g=e[f]+"_"+b,d[f]=b&&g in
this.settings?this.settings[g]:this.settings[e[f]])}c=this.createFromToProps(this.settings.breakanim?null:this.onCur,c);this.endAnim=new Dottoro.Anim({elem:this.layer,props:c},d.duration,{startDelay:a,easing:d.easing,callback:[this,"onHideAnim"]})}},onHideAnim:function(a,b,c){0>c&&!Dottoro.Timer.IsBack(b)&&(this.finished=!0,this.FireEvent("finished"))},Activate:function(){this.initLayer()},Deactivate:function(){},Detach:function(){this.section&&(this.startAnim&&(this.startAnim.Stop(),this.startAnim=
null),this.endAnim&&(this.endAnim.Stop(),this.endAnim=null),this.section.RemoveListener(this.sectionListeners),this.sectionListeners=[],this.sectionId&&(this.section.RemoveLayer(this.sectionId),this.sectionId=null),this.section=null)},Connect:function(){if(this.layer){var a=Dottoro.GetHolderObject(this.layer.parentNode,Dottoro.Section);if(a&&a.AddListener){this.section=a;a.AddLayer&&(this.sectionId=a.AddLayer(this));var b=[],b="before_activate"==this.settings.startevent||"after_activate"==this.settings.startevent?
["beforeactivate","afteractivate","beforeinactivate","afterinactivate"]:"before_show_inner"==this.settings.startevent||"after_show_inner"==this.settings.startevent?["beforeshow_inner","aftershow_inner","beforehide_inner","afterhide_inner"]:["beforeshow","aftershow","beforehide","afterhide"];this.sectionListeners.push(a.AddListener(b[0],[this,"onBeforeShow"]));this.sectionListeners.push(a.AddListener(b[1],[this,"onShow"]));this.sectionListeners.push(a.AddListener(b[2],[this,"onHide"]));this.sectionListeners.push(a.AddListener(b[3],
[this,"onHideEnd"]))}else this.startShowLayer(!0)}},Finished:function(){return this.finished}});(function(){Dottoro.RegisterTagParser("layer",function(b,c,d){c=new Dottoro.Layer;var e=b.getAttribute("data-dottoro_params");c.ReadSettings(e);e=c.GetSetting("layer");e||(e=b,c.SetSetting("layer",e));c.Activate();Dottoro.ContentRemoved(e,[c,"Detach"]);a[d]=a[d]||[];a[d].push(c)});Dottoro.ContentReady(function(b,c){if(a[c]){for(var d=0;d<a[c].length;d++)a[c][d].Connect();delete a[c]}},20);var a={}})();
Dottoro.Menu=Dottoro.ClassEventsSettings.extend({init:function(){this._super();this.settings={profile:"menu",open_event:"hover",first_level_open:!1,detect_open:!1,auto_deactivate:!1,anim_duration:500,fade:!0,growing:!0,slide:!0,opacFilters:!0,compressed:!1,custom_compressed:!1,compressed_under:600,move_into_view:!0,move_into_view_compressed:!0};this.openMenus={normal:{},compressed:{},normalNum:0,compressedNum:0};this.compressedInit=this.compressed=!1;this.openedULs=[];this.activated=this.onAnim=!1;
this.listeners={outside:[]};return this},initSubmenuSections:function(a){for(var b=0;b<a.length;b++){var c=a[b];(new Dottoro.SubMenu).Attach(c)}},listenOutsideClick:function(){this.listeners.outside.length||this.listeners.outside.push(Dottoro.AddListener("click",[this,"onClickOutside"],document.documentElement))},unlistenOutsideClick:function(){this.listeners.outside.length&&(Dottoro.RemoveListener(this.listeners.outside),this.listeners.outside=[])},initItems:function(){var a=Dottoro.SupportTouchPoints();
if(Dottoro.SupportTouch())for(var b=0;b<this.items.all.length;b++){var c=this.items.all[b];Dottoro._setData(c,"menu/obj",this);this.hasSubmenu(c)?(Dottoro.AddTouchListener("start",[this,"onFolderTouchStart"],c),Dottoro.AddTouchListener("end",[this,"onFolderTouchEnd"],c),Dottoro.AddTouchListener("cancel",[this,"onFolderTouchCancel"],c),a&&Dottoro.AddListener("click",[this,"onItemSkipTouchClick"],c)):Dottoro.AddListener("click",[this,"onLeafTouchClick"],c)}var a=a?{down:"pointerdown",enter:"pointerenter",
leave:"pointerleave"}:{down:"mousedown",enter:"mouseenter",leave:"mouseleave"},d=this.settings.open_event;if("activate-hover"==d)for(b=0;b<this.items.main.length;b++)c=this.items.main[b],Dottoro.AddListener(a.down,[this,"onItemActivate"],c),Dottoro.AddListener("click",[this,"onItemSkipMouseClick"],c);if("click-hover"==d)for(b=0;b<this.items.main.length;b++)c=this.items.main[b],this.hasSubmenu(c)?(Dottoro.AddListener(a.down,[this,"onFolderMouseDown"],c),Dottoro.AddListener("click",[this,"onItemSkipMouseClick"],
c)):Dottoro.AddListener("click",[this,"onLeafMouseClick"],c);for(b=0;b<this.items.all.length;b++)c=this.items.all[b],Dottoro._setData(c,"menu/obj",this),"click"==d?this.hasSubmenu(c)?(Dottoro.AddListener(a.down,[this,"onFolderMouseDown"],c),Dottoro.AddListener("click",[this,"onItemSkipMouseClick"],c)):Dottoro.AddListener("click",[this,"onLeafMouseClick"],c):!this.hasSubmenu(c)||"click-hover"==d&&c.parentNode==this.mainMenu||(Dottoro.AddListener(a.enter,[this,"onItemEnter"],c),Dottoro.AddListener(a.leave,
[this,"onItemLeave"],c));if(this.settings.detect_open)for(b=0;b<this.items.main.length;b++)c=this.items.main[b],(a=this.getSubmenu(c))&&0<a.offsetHeight&&this.show("now",c);if(this.settings.first_level_open&&0==this.openMenus.normalNum)for(b=0;b<this.items.main.length;b++)if(c=this.items.main[b],this.getSubmenu(c)){this.show("now",c);break}},registerCompressedListeners:function(){this.compressedBack&&Dottoro.AddListener("click",[this,"onBackClick"],this.compressedBack);var a=this.compressedLI.getElementsByTagName("li");
a.length&&a[0]==this.compressedLI||Dottoro.AddListener("click",[this,"onCompressedItemClick"],this.compressedLI);for(var b=0;b<a.length;b++){var c=a[b];this.hasSubmenu(c)?Dottoro.AddListener("click",[this,"onCompressedItemClick"],c):Dottoro.AddListener("click",[this,"onLeafMouseClick"],c)}},isActivated:function(){return"activate-hover"!=this.settings.open_event||this.activated},getSubmenu:function(a){var b=Dottoro._getData(a,"menu/submenuElem");if(void 0===b){for(var b=null,c=a.firstChild;c;){if(c.className&&
0<=(" "+c.className+" ").indexOf(" sub-menu ")){b=c;break}c=c.nextSibling}Dottoro._setData(a,"menu/submenuElem",b)}return b},hasSubmenu:function(a){return!!this.getSubmenu(a)},getMenuElems:function(a,b,c){b=b?b:{mainitems:[],items:[],submenus:[]};if(a.className){var d=" "+a.className+" ";if(0<=d.indexOf(" dottoro_mega_submenu "))return b}for(a=a.firstChild;a;)a.className&&(d=" "+a.className+" ",0<=d.indexOf(" menu-item ")&&(b.items.push(a),c||b.mainitems.push(a),d=this.getSubmenu(a)))&&(b.submenus.push(d),
this.getMenuElems(d,b,!0)),a=a.nextSibling;return b},addToOpenMenus:function(a,b){Dottoro._setData(a,"menu/submenuOpen",b);Dottoro.AddRemoveCSSClass(a,b,"open");var c=this.openMenus[this.compressed?"compressed":"normal"],d=this.compressed?"compressedNum":"normalNum";if(b){var e=Dottoro._getData(a,"menu/submenuId");e||(this.nextMenuId?this.nextMenuId++:this.nextMenuId=1,e=""+this.nextMenuId,Dottoro._setData(a,"menu/submenuId",e));e in c||(c[e]=a,this.openMenus[d]++)}else(e=Dottoro._getData(a,"menu/submenuId"))&&
e in c&&(delete c[e],this.openMenus[d]--);this.updateListeners()},updateListeners:function(){this.openMenus[this.compressed?"compressedNum":"normalNum"]<=(this.settings.first_level_open&&!this.compressed?1:0)?this.unlistenOutsideClick():(this.compressed||Dottoro.SupportTouch()||"click-hover"==this.settings.open_event&&!this.settings.first_level_open||"click"==this.settings.open_event)&&this.listenOutsideClick()},animNext:function(a,b,c){if(0>c){a=a.GetUserData();if(b=Dottoro.Timer.IsBack(b))Dottoro._removeData(a,
"menu/anim"),a.style.display="none",Dottoro.RestoreStyle(this.settings.profile,a);this.compressed&&(b&&this.afterCompressedSubmenuClosed(a),this.updateCompressedBackButton(),this.onAnim=!1);if(a=Dottoro._getData(a,"submenu"))if(a.FireEvent(b?"afterhide":"aftershow"),b)this.onAfterItemClosed()}},show:function(a,b){var c="now"==a;a=!!a;if(this.beforeShowHide(a,b)){var d=this.getSubmenu(b);if(d&&!Dottoro._getData(d,"menu/blockedShow")){this.addToOpenMenus(b,a);var e=Dottoro._getData(d,"submenu"),f=Dottoro._getData(d,
"menu/anim");if(f){if(f.IsRunning()||!a)e&&a!=f.IsBack()&&e.FireEvent(a?"beforeshow":"beforehide"),f.Start({back:!a})&&this.compressed&&(this.onAnim=!0)}else{if(!a){e&&e.FireEvent("beforehide");d.style.display="none";this.compressed&&(this.afterCompressedSubmenuClosed(d),this.updateCompressedBackButton());e&&e.FireEvent("afterhide");this.onAfterItemClosed();return}if(0<d.offsetHeight&&!c)return;var g=Dottoro.GetClientWinWidth(d.ownerDocument),h=Dottoro.GetClientWinHeight(d.ownerDocument);d.style.display=
"block";e&&e.FireEvent("beforeshow");var k=Dottoro.GetBox(b),l=Dottoro.GetBox(d),m=Dottoro.GetSpecifiedRect(d),p={};if(this.compressed&&0<this.openedULs.length){for(var k=this.openedULs[0],m=["left","right","top","bottom"],n=0;n<m.length;n++)Dottoro.SetStyle(this.settings.profile,d,m[n],k.style[m[n]]);p.clip={right:{from:0,to:"auto"}};k="pixelLeft"in k.style&&!Dottoro.IsString(k.style.pixelLeft)?k.style.pixelLeft:Dottoro.GetPixelLength(k,"left");p.left={from:k+l.width,to:k};this.onAnim=!0}else{f=
{};f.fade=this.settings.fade&&(this.settings.opacFilters||"opacity"in d.style);f.growing=this.settings.growing;f.slide=this.settings.slide;var q={right:k.right-l.left,left:l.right-k.left,bottom:k.bottom-l.top,top:l.bottom-k.top},r=null,t;for(t in q)if(!r||r.dist>q[t])r={prop:t,dist:q[t]};q=r={left:"leftward",top:"upward",right:"rightward",bottom:"downward"}[r.prop];if(this.compressed?this.settings.move_into_view_compressed:this.settings.first_level_open&&b.parentNode==this.mainMenu?0:this.settings.move_into_view){var s;
switch(r){case "leftward":0>l.left&&k.right+l.width<=g&&(q="rightward");break;case "rightward":l.right>g&&0<=k.left-l.width&&(q="leftward");break;case "upward":case "downward":g=Math.min(0,g-l.right),0>l.left+g&&(g=-1*l.left),0!=g&&(n=g)}switch(r){case "upward":0>l.top&&k.bottom+l.height<=h&&(q="downward");break;case "downward":l.bottom>h&&0<=k.top-l.height&&(q="upward");break;case "leftward":case "rightward":h=Math.min(0,h-l.bottom),0>l.top+h&&(h=-1*l.top),0!=h&&(s=h)}if(n||s)h={},n&&("auto"!=m.left&&
(h.left=Dottoro.GetPixelLength(d,"left")+n+"px"),"auto"!=m.right&&(h.right=Dottoro.GetPixelLength(d,"right")+n+"px")),s&&("auto"!=m.top&&(h.top=Dottoro.GetPixelLength(d,"top")+s+"px"),"auto"!=m.bottom&&(h.bottom=Dottoro.GetPixelLength(d,"bottom")+s+"px")),Dottoro.SetStyle(this.settings.profile,d,h),Dottoro.OffsetCoords(l,n,s)}if(q!=r)switch(q){case "leftward":Dottoro.SetStyle(this.settings.profile,d,{left:"auto",right:"100%"});break;case "rightward":Dottoro.SetStyle(this.settings.profile,d,{left:"100%",
right:"auto"});break;case "upward":Dottoro.SetStyle(this.settings.profile,d,{top:"auto",bottom:"100%"});break;case "downward":Dottoro.SetStyle(this.settings.profile,d,{top:"100%",bottom:"auto"})}f.fade&&(p.opacity={from:0,to:1});if(f.growing){switch(q){case "leftward":p.clip={left:{from:-1,to:"auto"}};break;case "rightward":p.clip={right:{from:0,to:"auto"}};break;case "upward":p.clip={top:{from:-1,to:"auto"}};break;case "downward":p.clip={bottom:{from:0,to:"auto"}}}if("leftward"==q||"rightward"==
q)n=k.top-l.top,0>=n?p.clip.bottom={from:0,to:"auto"}:n>l.height?p.clip.top={from:-1,to:"auto"}:(p.clip.top={from:n,to:"auto"},p.clip.bottom={from:n,to:"auto"})}if(f.slide)switch(q){case "leftward":p.clip={right:{from:0,to:"auto"}};"auto"!=m.left&&(p.left={from:0,to:-1*l.width});"auto"!=m.right&&(p.right={from:k.width-l.width,to:k.width});break;case "rightward":p.clip={left:{from:-1,to:"auto"}};"auto"!=m.left&&(p.left={from:k.width-l.width,to:k.width});"auto"!=m.right&&(p.right={from:0,to:-1*l.width});
break;case "upward":p.clip={bottom:{from:0,to:"auto"}};"auto"!=m.top&&(p.top={from:0,to:-1*l.height});"auto"!=m.bottom&&(p.bottom={from:k.height-l.height,to:k.height});break;case "downward":p.clip={top:{from:-1,to:"auto"}},"auto"!=m.top&&(p.top={from:k.height-l.height,to:k.height}),"auto"!=m.bottom&&(p.bottom={from:0,to:-1*l.height})}}Dottoro.IsObjEmpty(p)||(f=new Dottoro.Anim({elem:d,props:p},this.settings.anim_duration,{profile:this.settings.profile,start:c?0:a?1:-1,callback:[this,"animNext"],userData:d}),
Dottoro._setData(d,"menu/anim",f),c&&f.Start({duration:0}));!f&&e&&e.FireEvent("aftershow")}if(a||!this.compressed||0==this.openedULs.length)c=a?"1001":"1000",d.style.zIndex=c,Dottoro.isIEOlder(8)&&(d.parentNode.style.zIndex=c)}}},onCompressedItemClick:function(a,b){if(this.onAnim)return!1;if(b==this.compressedLI)for(var c=a.target||a.srcElement;c&&c!=b;){if("ul"==c.nodeName.toLowerCase())return!1;c=c.parentNode}if((c=this.getSubmenu(b))&&!Dottoro._getData(c,"menu/blockedShow"))if(Dottoro._getData(c,
"menu/anim")||Dottoro._getData(b,"menu/submenuOpen"))b==this.compressedLI&&this.closeAllMenus();else{if(0<this.openedULs.length){var d=this.openedULs[this.openedULs.length-1];Dottoro.ModifyCSSClass(d,"inactive","active");Dottoro._setData(c,"menu/origParent",c.parentNode);d.parentNode.appendChild(c)}Dottoro.ModifyCSSClass(c,"active","inactive");this.show(!0,b);this.openedULs.push(c)}return!1},afterCompressedSubmenuClosed:function(a){Dottoro.ModifyCSSClass(a,"inactive","active");this.openedULs.pop();
var b=Dottoro._getData(a,"menu/origParent");b&&b.appendChild(a);0<this.openedULs.length&&Dottoro.ModifyCSSClass(this.openedULs[this.openedULs.length-1],"active","inactive")},updateCompressedBackButton:function(){this.compressedBack&&(this.compressedBack.style.display=1<this.openedULs.length?"block":"none")},onBackClick:function(){if(0<this.openedULs.length){var a=this.openedULs[this.openedULs.length-1],a=Dottoro._getData(a,"menu/origParent")||a.parentNode;this.show(!1,a)}},beforeShowHide:function(a,
b){if(this.forceShowHide||this.compressed||!this.settings.first_level_open||b.parentNode!=this.mainMenu)return!0;if(!a)return!1;var c=this.forceShowHide;this.forceShowHide=!0;for(var d=0;d<this.items.main.length;d++){var e=this.items.main[d];Dottoro._getData(e,"menu/submenuOpen")&&e!=b&&this.show(!1,e)}this.forceShowHide=c;return!0},onAfterItemClosed:function(){if(this.settings.auto_deactivate&&"activate-hover"==this.settings.open_event&&!this.compressed&&this.activated&&0==this.openMenus.normalNum){for(var a=
0;a<this.items.all.length;a++){var b=this.getSubmenu(this.items.all[a]);if(b&&(b=Dottoro._getData(b,"menu/anim"))&&b.IsRunning())return}this.activated=!1;this.closeAllMenus()}},closeAllMenus:function(a){if(this.compressed){for(var b=this.openedULs.length-1;0<=b;b--){var c=this.openedULs[b],d=Dottoro._getData(c,"menu/origParent")||c.parentNode;this.show(!1,d);a&&(c=Dottoro._getData(c,"menu/anim"))&&c.Stop()}this.openedULs=[]}else for(b in a=this.openMenus.normal,a)this.show(!1,a[b])},checkEventSource:function(a,
b){var c=this.getSubmenu(b);if(c){var d=a.target||a.srcElement;if(d&&Dottoro.IsAncestorOf(c,d))return!1}return!0},onClickOutside:function(a){(a=a.target||a.srcElement)&&Dottoro.IsAncestorOf(this.mainMenu,a)||this.closeAllMenus()},onFolderTouchEnd:function(a,b){"pointerType"in a&&("mouse"===a.pointerType||4===a.pointerType)||!this.checkEventSource(a,b)||(this.duringTouch=!1,!Dottoro._getData(b,"menu/submenuOpen")&&a.target&&a.target.click())},onFolderTouchCancel:function(a,b){"pointerType"in a&&("mouse"===
a.pointerType||4===a.pointerType)||!this.checkEventSource(a,b)||(this.duringTouch=!1)},onFolderTouchStart:function(a,b){if("pointerType"in a){if("mouse"===a.pointerType||4===a.pointerType||!a.buttons||1!=a.buttons||this.duringTouch)return}else if(!a.touches||1!=a.touches.length||this.duringTouch)return;this.checkEventSource(a,b)&&(this.duringTouch=!0,Dottoro.PreventDefault(a),this.onFolderDown(a,b))},onFolderMouseDown:function(a,b){if(!("pointerType"in a&&"mouse"!==a.pointerType&&4!==a.pointerType||
this.duringTouch)&&this.checkEventSource(a,b))this.onFolderDown(a,b)},onFolderDown:function(a,b){if(!this.compressed){var c=!Dottoro._getData(b,"menu/submenuOpen"),d;for(d in this.openMenus.normal){var e=this.openMenus.normal[d],f=!1;Dottoro.IsAncestorOf(b,e)?f=c:Dottoro.IsAncestorOf(e,b)&&(f=!0);f||this.show(!1,e)}Dottoro._setData(b,"menu/skipClick",c);c&&this.show(!0,b)}},onItemSkipTouchClick:function(a,b){this.onItemSkipClick(a,b)},onItemSkipMouseClick:function(a,b){if(!this.duringTouch)this.onItemSkipClick(a,
b)},onItemSkipClick:function(a,b){!this.compressed&&this.checkEventSource(a,b)&&Dottoro._getData(b,"menu/skipClick")&&(Dottoro.PreventDefault(a),Dottoro._setData(b,"menu/skipClick",!1))},onLeafTouchClick:function(a,b){this.closeAllMenus()},onLeafMouseClick:function(a,b){(this.compressed||!this.duringTouch)&&this.checkEventSource(a,b)&&this.closeAllMenus()},onItemActivate:function(a,b){"pointerType"in a&&"mouse"!==a.pointerType&&4!==a.pointerType||this.duringTouch||this.compressed||!this.checkEventSource(a,
b)||(this.activated=!this.activated,this.hasSubmenu(b)&&Dottoro._setData(b,"menu/skipClick",this.activated),this.activated?this.show(!0,b):this.closeAllMenus())},onItemEnter:function(a,b){this.duringTouch||"pointerType"in a&&"mouse"!==a.pointerType&&4!==a.pointerType||this.compressed||this.isActivated()&&this.show(!0,b)},onItemLeave:function(a,b){this.duringTouch||"pointerType"in a&&"mouse"!==a.pointerType&&4!==a.pointerType||this.compressed||this.isActivated()&&this.show(!1,b)},onWinResize:function(){Dottoro.GetClientWinWidth()<
this.settings.compressed_under?this.Compress():this.compressed&&this.UnCompress()},Build:function(a,b,c){this.menu=Dottoro.GetElement(a);if(!this.menu)return!1;Dottoro._setData(this.menu,"menu/obj",this);Dottoro.Menu_Helper.AddMenuHolder(this.menu);Dottoro.ModifyCSSClass(this.menu,"js-menu","css-menu");this.compressedUL=b?Dottoro.GetElement(b):null;this.compressedClass=c?c:"compressed_menu_"+a;a=this.menu.getElementsByTagName("ul");0<a.length&&(this.normalMenu=this.mainMenu=a[0],a=this.getMenuElems(this.mainMenu),
this.initSubmenuSections(a.submenus),this.items={main:a.mainitems,all:a.items},this.initItems());this.settings.compressed&&this.compressedUL&&this.normalMenu&&(this.compressedBack=Dottoro.GetElement(b+"_item_back"),this.compressedLI=Dottoro.GetElement(b+"_item_menu"))&&(Dottoro.AddListener("resize",[this,"onWinResize"],window),this.onWinResize());return!0},ChangeClickableFolders:function(a){a=a.getElementsByTagName("li");for(var b=0;b<a.length;b++){var c=a[b],d=c.getElementsByTagName("ul");if(d.length){var e=
Dottoro.FirstElementChild(c,"a");if(e&&e.href){var f=Dottoro.FirstElementChild(d[0],"li");if(f){var g=Dottoro.FirstElementChild(f,"a");g&&g.href!=e.href&&(c=Dottoro.CloneNode(c,!1),c.removeAttribute("id"),Dottoro.ReplaceCSSClass(c,"folder","leaf"),Dottoro.ModifyCSSClass(c,"","current-menu-ancestor"),c.appendChild(Dottoro.CloneNode(e,!0)),d[0].insertBefore(c,f))}e.removeAttribute("href")}}}},Compress:function(){if(this.compressedUL&&!this.compressed){if(!this.compressedInit){var a=null;if(this.settings.custom_compressed){var b=
this.compressedLI.getElementsByTagName("ul");b.length&&(a=b[0])}var c=!a;if(c){for(var b=this.normalMenu.getElementsByTagName("ul"),d=0;d<b.length;d++)(a=Dottoro._getData(b[d],"menu/anim"))&&a.Stop();a=Dottoro.CloneNode(this.normalMenu,!0);b=Dottoro.GetElemsByClass("dottoro_mega_submenu",a);for(d=b.length-1;0<=d;d--)Dottoro.ModifyCSSClass(b[d].parentNode,"leaf","folder"),Dottoro.RemoveNode(b[d]);b=Dottoro.GetElemsByClass("compressed-sub-menu",a);for(d=b.length-1;0<=d;d--)Dottoro.ModifyCSSClass(b[d].parentNode,
"folder","leaf"),Dottoro.ModifyCSSClass(b[d],"sub-menu","compressed-sub-menu");b=Dottoro.GetElemsByClass("sub-menu",a);for(d=b.length-1;0<=d;d--){var e=b[d];e.style.display="none";Dottoro.ModifyCSSClass(e.parentNode,"","open")}}a.className="sub-menu";a.style.display="none";c&&this.compressedLI.appendChild(a);this.ChangeClickableFolders(this.compressedLI);this.registerCompressedListeners();this.compressedInit=!0}this.normalMenu&&(this.closeAllMenus(!0),this.mainMenu=this.compressedUL,c=this.normalMenu.parentNode,
Dottoro.RemoveNode(this.normalMenu),c.appendChild(this.compressedUL),this.compressedUL.style.display="table",Dottoro.ModifyCSSClass(document.documentElement,this.compressedClass),this.compressed=!0,this.updateListeners())}},UnCompress:function(){if(this.compressedUL&&this.compressed&&this.normalMenu){this.closeAllMenus(!0);var a=this.compressedUL.parentNode;Dottoro.RemoveNode(this.compressedUL);a.appendChild(this.normalMenu);this.mainMenu=this.normalMenu;this.compressedBack.style.display="none";this.compressedUL.style.display=
"none";Dottoro.ModifyCSSClass(document.documentElement,"",this.compressedClass);this.compressed=!1;this.updateListeners()}}});Dottoro.SubMenu=Dottoro.Section.extend({init:function(){this._super();return this},Attach:function(a){this._super(a);Dottoro._setData(a,"submenu",this)},Detach:function(){this.elem&&Dottoro._removeData(this.elem,"submenu");this._super()}});
(function(){var a=[];Dottoro.Menu_Helper={AddMenuHolder:function(b){a.push(b)},GetChildHolders:function(b,c){for(var d=[],e=0;e<a.length;e++)c&&a[e].id==c||Dottoro.IsAncestorOf(b,a[e])&&d.push(a[e]);return d},ShowSubmenu:function(a){var c=a.parentNode,d=Dottoro._getData(c,"menu/obj");d&&(d.settings.first_level_open||d.show(!0,c));Dottoro._setData(a,"menu/blockedShow",!0)},HideSubmenu:function(a){Dottoro._removeData(a,"menu/blockedShow");a=a.parentNode;var c=Dottoro._getData(a,"menu/obj");c&&(c.settings.first_level_open||
c.show(!1,a))}}})();
Dottoro.Range=Dottoro.ClassEventsSettings.extend({init:function(){this._super();this.holder=null;this.elems={};this.enabled=!0;this.eventHandlers=[];this.dragEventHandlers=[];this.specifiedSettings={};this.settings={min:0,max:100,step:1,inter_values:!0,value_display_offset:0,thumb_class:"range_thumb",track_class:"range_track",progress_class:"range_progress",value_display_class:"range_value_display",prev_button_class:"range_prev_button",next_button_class:"range_next_button",orientation:"horizontal",direction:"normal",
profile:"range",holder:null,attach:null,view:{unit:"%"},trans:{async:!0,anim_value:!1,inter_thumb_pos:!1,anim_duration:200,anim_easing:"ease",view:{}},track:{extra_len:0,trans:{}},thumb:{offset_pos:-.5,trans:{}},prev_next_button:{trans:{}},key_navigation:{trans:{}},mouse_scroll:{trans:{}}};this.simpleSettings={holder:1,attach:1};this.thumbValue=this.value=0;this.trans=null},SetSetting:function(a,b){var c=a.toLowerCase();this.specifiedSettings[c]=!0;!(c in this.simpleSettings)&&c in this.settings&&
"object"==Dottoro.TypeOf(this.settings[c])?Dottoro.Extend(this.settings[c],b):this._super(a,b)},GetViewSettings:function(){return this.settings.view},getTransSettings:function(a){var b=Dottoro.Clone(this.settings.trans);Dottoro.Extend(b,this.settings[a].trans);return b},AddElem:function(a,b){var c={};Dottoro.ReadNodeSettings(b,c);this.elems[a]={elem:b,settings:c}},AddElems:function(a,b){this.elems[a]=[];for(var c=0;c<b.length;c++){var d=b[c],e={};Dottoro.ReadNodeSettings(d,e);this.elems[a].push({elem:d,
settings:e})}},GetElemData:function(a,b){return b?this.elems[a][b]:this.elems[a]},GetElem:function(a){return this.GetElemData(a,"elem")},iterateElems:function(a,b){if(this.elems[a]){var c=this.elems[a];if(c.length)for(var d=0;d<c.length;d++)Dottoro.CallUserFunc(b,[c[d],a,d])}},Attach:function(){(this.holder=Dottoro.GetElement(this.settings.holder))&&this.Enable(!0,!0)},Connect:function(){if(this.settings.attach)var a=Dottoro.GetElement(this.settings.attach),a=Dottoro.GetAssignedObject(a,Dottoro.Slider);
else a=Dottoro.GetHolderObject(this.holder,Dottoro.Slider);a&&(this.attachedTo=a,this.attachId=a.AttachRangeControl(this));this.finalize()},finalize:function(){var a={thumb:"thumb_class",track:"track_class"},b;for(b in a){var c=Dottoro.GetElemsByClass(this.settings[a[b]],this.holder)[0];this.AddElem(b,c)}a={progresses:"progress_class",value_displays:"value_display_class",prev_buttons:"prev_button_class",next_buttons:"next_button_class"};for(b in a)c=Dottoro.GetElemsByClass(this.settings[a[b]],this.holder),
this.AddElems(b,c);Dottoro.ModifyCSSClass(this.holder,"orientation-"+this.settings.orientation);Dottoro.ModifyCSSClass(this.holder,"direction-"+this.settings.direction);this.holder&&(this.eventHandlers.push(Dottoro.AddListener("keypress",[this,"onKey"],this.holder)),this.eventHandlers.push(Dottoro.AddListener("keydown",[this,"onKey"],this.holder)),this.eventHandlers.push(Dottoro.AddListener("keyup",[this,"onKey"],this.holder)));(a=this.GetElem("track"))&&this.eventHandlers.push(Dottoro.AddListener("mousedown",
[this,"onTrackMouseDown"],a));var d=this;this.iterateElems("prev_buttons",function(a){d.eventHandlers.push(Dottoro.AddListener("click",function(){d.onClickPrevNextButton(a,!0)},a.elem))});this.iterateElems("next_buttons",function(a){d.eventHandlers.push(Dottoro.AddListener("click",function(){d.onClickPrevNextButton(a,!1)},a.elem))});if(a=this.GetElem("thumb"))a.addEventListener?this.eventHandlers.push(Dottoro.AddListener("mousedown",[this,"onThumbMouseDown"],a,Dottoro.CAPTURE_ELEM)):a.setCapture&&
this.eventHandlers.push(Dottoro.AddListener("mousedown",[this,"onThumbMouseDown"],a)),Dottoro.SupportTouch()&&this.eventHandlers.push(Dottoro.AddListener("touchstart",[this,"onThumbTouchStart"],a));this.eventHandlers.push(Dottoro.AddListener("resize",[this,"onWinResize"],window));this.UpdateThumbPos(this.value,!0)},SetDefaultSettings:function(a){a=Dottoro.Clone(a);for(var b in this.specifiedSettings)delete a[b];Dottoro.Extend(this.settings,a)},Detach:function(){this.stopThumbDrag();Dottoro.RemoveListener(this.eventHandlers);
this.attachedTo&&(this.attachedTo.DetachRangeControl(this.attachId),this.attachedTo=null);this.elems={}},Enable:function(a,b){if(this.enable!=a||b)a?Dottoro.ModifyCSSClass(this.holder,"","disabled"):Dottoro.ModifyCSSClass(this.holder,"disabled","")},ValidateValue:function(a,b){a<this.settings.min?a=this.settings.min:a>this.settings.max&&(a=this.settings.max);var c=a;!this.settings.inter_values&&this.settings.step&&(a=Math.round((a-this.settings.min)/this.settings.step)*this.settings.step+this.settings.min,
b||(c=a));return{value:a,thumbValue:c}},updateValueDisplay:function(a){var b=a.elem;a=a.settings;a=""+(this.value+("value_display_offset"in a?a.value_display_offset:this.settings.value_display_offset));"value"in b?b.value=a:b.innerHTML=a},updatePrevNextButton:function(a,b){var c=a.elem,d="normal"==this.settings.direction,e=this.settings.min,f=this.settings.max;!this.settings.inter_values&&this.settings.step&&(f=Math.round((f-this.settings.min)/this.settings.step)*this.settings.step+this.settings.min);
Dottoro.AddRemoveCSSClass(c,!(d==("prev_buttons"==b)?this.value>e:this.value<f),"disabled")},onClickPrevNextButton:function(a,b){var c=this.getTransSettings("prev_next_button");settings.trans&&Dottoro.Extend(c,settings.trans);this.Step(b?-1:1,c)},updateProgressBar:function(a){var b=a.elem;(a=a.settings.prop)||(a="horizontal"==this.settings.orientation?"width":"height");var c=this.settings.max-this.settings.min,d=this.thumbValue-this.settings.min;Dottoro.SetStyle(this.settings.profile,b,a,100*(0==
c?0:d/c)+"%")},SetValue:function(a,b,c){var d=Dottoro.Clone(this.settings.trans);b=Dottoro.Extend(d,b);c&&Dottoro.Extend(b,c);a=this.ValidateValue(a,b.inter_thumb_end_pos);if(b.async){this.StopAnim();this.updateCommandReferences(b,!(!c||!c.anim_duration));c=(d=0<b.anim_duration)&&b.anim_value;if(!c&&this.value!=a.value){this.value=a.value;this.iterateElems("value_displays",[this,"updateValueDisplay"]);this.iterateElems("prev_buttons",[this,"updatePrevNextButton"]);this.iterateElems("next_buttons",
[this,"updatePrevNextButton"]);var e=Dottoro.Clone(b.view);"anim_duration"in b&&(e.anim_duration=b.anim_duration);this.FireEvent("valuechanged",this.attachId,a.value,b,e)}d?(d=b.anim_duration,b.anim_duration=0,b.anim_value=!1,this.trans={command:b,animValue:c},this.trans.anim=new Dottoro.Move([{from:this.thumbValue,to:a.thumbValue}],d,[this,"onAnimValue"],{easing:b.anim_easing})):this.UpdateThumbPos(a.thumbValue)}else this.value!=a.value&&this.FireEvent("valuechanged",this.attachId,a.value,b,b.view)},
onAnimValue:function(a,b,c,d){a&&(a=this.ValidateValue(a[0].value,this.trans.command.inter_thumb_pos),this.trans.animValue?this.SetValue(a.thumbValue,this.trans.command):this.UpdateThumbPos(a.thumbValue));0>d&&(this.trans=null)},StopAnim:function(){this.trans&&(this.trans.anim.Stop(!0),this.trans=null)},StopCommand:function(a,b){this.trans&&this.trans.command==a&&this.StopAnim()},PauseCommand:function(a,b){this.trans&&this.trans.command==a&&this.trans.anim.Pause()},ContinueCommand:function(a){this.trans&&
this.trans.command==a&&this.trans.anim.Restart()},updateCommandReferences:function(a,b){a.child&&a.child.command&&(a.child.command.parent={control:this,command:a});a.parent&&a.parent.command&&(a.parent.command.child={control:this,command:a});if(a.source&&a.source.command&&a.source.control==this.attachedTo){var c=a.source.command.related_commands;c.range=c.range||{};c.range[this.attachId]={control:this,command:a,sync:b}}},Step:function(a,b,c){a=null==a?1:a;c=null==c?this.settings.direction:c;"normal"!=
c&&(a*=-1);this.SetValue(this.value+a*this.settings.step,b)},UpdateThumbPos:function(a,b){var c=this.thumbValue!=a;if(c||b){this.thumbValue=a;var d="horizontal"==this.settings.orientation?"width":"height",e=this.GetElem("track"),f=this.GetElem("thumb"),e=Dottoro.GetSize(e)[d],d=Dottoro.GetSize(f)[d];this.settings.track.extra_len&&(e+=this.settings.track.extra_len*d);var g=this.settings.thumb.offset_pos*d,h=this.settings.max-this.settings.min,k=a-this.settings.min,d="normal"==this.settings.direction,
d="horizontal"==this.settings.orientation?d?"left":"right":d?"top":"bottom",e=(0==h?0:k/h)*e+g;Dottoro.SetStyle(this.settings.profile,f,d,e+"px");this.FireEvent("thumbposchanged",this.attachId,e);c&&this.iterateElems("progresses",[this,"updateProgressBar"])}},onKey:function(a){var b=a.type.toLowerCase();"keyup"==b?this.lastKeyDownEvent=null:(a=a.keyCode||a.which,37<=a&&40>=a&&(this.lastKeyDownEvent&&this.lastKeyDownEvent!=b?this.lastKeyDownEvent=null:(this.lastKeyDownEvent=b,this.Step(37==a||38==
a?-1:1,this.getTransSettings("key_navigation")))))},onMouseScroll:function(a){var b=a.type.toLowerCase(),b="mousewheel"==b?a.wheelDelta:"dommousescroll"==b?-40*a.detail:0,b=Math.ceil(b/120);this.Step(-1*b,this.getTransSettings("mouse_scroll"));return Dottoro.CancelEvent(a)},onTrackMouseDown:function(a,b){this.FireEvent("trackdown",this.attachId);this.trackDown(a);this.trackListenerMouseUp=Dottoro.AddListener("mouseup",[this,"onTrackMouseUp"],b,Dottoro.CAPTURE_WINDOW)},onTrackMouseUp:function(a){this.trackListenerMouseUp&&
(Dottoro.RemoveListener(this.trackListenerMouseUp),delete this.trackListenerMouseUp,this.FireEvent("trackup",this.attachId))},trackDown:function(a){var b=this.GetElem("track");a=Dottoro.GetMouseClientCoords(a,b.ownerDocument);var c=Dottoro.GetBox(b);"horizontal"==this.settings.orientation?(b=c.width,a=a.x-c.left):(b=c.height,a=a.y-c.top);a=b?a/b:0;0>a&&(a=0);1<a&&(a=1);"normal"!=this.settings.direction&&(a=1-a);this.SetValue((1-a)*this.settings.min+a*this.settings.max,this.getTransSettings("track"))},
onThumbMouseDown:function(a){if(!this.DuringDrag()){var b=this.GetElem("thumb");b.addEventListener?(this.dragEventHandlers.push(Dottoro.AddListener("mousemove",[this,"onThumbDragMove"],b,Dottoro.CAPTURE_WINDOW,"mouse")),this.dragEventHandlers.push(Dottoro.AddListener("mouseup",[this,"onThumbDragEnd"],b,Dottoro.CAPTURE_WINDOW,"mouse"))):b.setCapture&&(this.dragEventHandlers.push(Dottoro.AddListener("mousemove",[this,"onThumbDragMove"],b,"mouse")),this.dragEventHandlers.push(Dottoro.AddListener("mouseup",
[this,"onThumbDragEnd"],b,"mouse")),b.setCapture(),this.dragEventHandlers.push(Dottoro.AddListener("losecapture",[this,"onThumbLoseCapture"],b)));this.dragStart(a,"mouse",b);Dottoro.CancelEvent(a)}},onThumbTouchStart:function(a){if(!this.DuringDrag()&&a.touches&&1==a.touches.length){var b=this.GetElem("thumb");this.dragEventHandlers.push(Dottoro.AddListener("touchmove",[this,"onThumbDragMove"],b,Dottoro.CAPTURE_WINDOW,"touch"));this.dragEventHandlers.push(Dottoro.AddListener("touchend",[this,"onThumbDragEnd"],
b,Dottoro.CAPTURE_WINDOW,"touch"));this.dragEventHandlers.push(Dottoro.AddListener("touchcancel",[this,"onThumbDragCancel"],b,Dottoro.CAPTURE_WINDOW,"touch"));this.dragStart(a,"touch",b)}},dragStart:function(a,b,c){a=Dottoro.GetMouseClientCoords(a,c.ownerDocument);this.dragData={device:b,startPos:a,pos:a,lastMove:0,value:this.value};this.FireEvent("thumbdragstart",this.attachId)},onThumbDragMove:function(a,b,c){if(this.DuringDrag(c)){var d=this.GetElem("track");b=this.GetElem("thumb");b=Dottoro.GetMouseClientCoords(a,
b.ownerDocument);d=Dottoro.GetBox(d);if("horizontal"==this.settings.orientation)var d=d.width,e=b.x-this.dragData.pos.x,f=b.x-this.dragData.startPos.x;else d=d.height,e=b.y-this.dragData.pos.y,f=b.y-this.dragData.startPos.y;this.dragData.pos=b;e&&(this.dragData.lastMove=e,b=(d?f/d:0)*(this.settings.max-this.settings.min),"normal"!=this.settings.direction&&(b*=-1),d=this.getTransSettings("thumb"),d.inter_thumb_pos&&(d.inter_thumb_end_pos=!0),d.async&&(d.anim_duration=0),this.SetValue(this.dragData.value+
b,d));if("touch"==c)return Dottoro.PreventDefault(a)}},onThumbDragEnd:function(a,b,c){this.stopThumbDrag(c)},onThumbDragCancel:function(a,b,c){this.stopThumbDrag(c)},onThumbLoseCapture:function(){this.stopThumbDrag()},stopThumbDrag:function(a){this.DuringDrag(a)&&(Dottoro.RemoveListener(this.dragEventHandlers),this.dragEventHandlers=[],a=this.GetElem("thumb"),a.releaseCapture&&!a.addEventListener&&a.releaseCapture(),this.FireEvent("thumbdragend",this.attachId,this.dragData.lastMove))},DuringDrag:function(a){return 0<
this.dragEventHandlers.length?!a||a==this.dragData.device:!1},onWinResize:function(){var a=this.ValidateValue(this.value,!1);this.UpdateThumbPos(a.thumbValue,!0)}});
(function(){Dottoro.RegisterTagParser("range",function(b,c,d){c=new Dottoro.Range;var e=b.getAttribute("data-dottoro_defparams");c.ReadSettings(e);e=b.getAttribute("data-dottoro_params");c.ReadSettings(e);e=c.GetSetting("holder");e||(e=b,c.SetSetting("holder",e));c.Attach();Dottoro.ContentRemoved(e,[c,"Detach"]);a[d]=a[d]||[];a[d].push(c)});Dottoro.ContentReady(function(b,c){if(a[c]){for(var d=0;d<a[c].length;d++)a[c][d].Connect();delete a[c]}},20);var a={}})();
Dottoro.CreateAnimGroups=function(a,b){var c=a.split("_"),d=c[0],e=new Dottoro.AnimGroups;e.SetSetting("animtype",d);if("move"==d||"localmove"==d)c[1]=c[1]?c[1]:"random",c[2]=c[2]?c[2]:"random",e.SetSettings({moveout:c[2],movein:c[1]});0<b?e.SetSettings({duration:b}):"cards"==d&&e.SetSettings({duration:1800});e.IsSupported()||e.SetSetting("animtype","fade");return e};
Dottoro.AnimGroups=Dottoro.ClassEventsSettings.extend({init:function(){this._super();this.settings={elemsfrom:null,elemsto:null,animtype:"fade",easing:"swing",duration:1300}},getAnimItems_Fade:function(a,b){for(var c=[],d=b.length,e=1/(2*d-1),f=100*d*e+"%",g=0;g<d;g++){if("from"==a)var h=d-g-1,k=1,l=0;else h=g,k=0,l=1;c.push({elem:b[g],props:{opacity:{from:k,to:l,duration:f,startTime:100*h*e+"%"}}})}return c},getAnimItems_Scale:function(a,b){for(var c=[],d=b.length,e=1/(2*d-1),f=100*d*e+"%",g=0;g<
d;g++){if("from"==a)var h=d-g-1,k=1,l=0;else h=g,k=0,l=1;h=100*h*e+"%";c.push({elem:b[g],props:{trafo:{scaleX:{from:k,to:l,duration:f,startTime:h},scaleY:{from:k,to:l,duration:f,startTime:h}}}})}return c},getAnimItems_Move:function(a,b){var c=[],d=b.length;if(0<d){var e=Dottoro.GetElement("from"==a?this.settings.holderfrom:this.settings.holderto);e||(e=b[0].parentNode);if(e){for(var f=Dottoro.GetBox(e),g="from"==a?this.settings.moveout?this.settings.moveout:"left":this.settings.movein?this.settings.movein:
"right",h="from"==a?"to":"from",k=0;k<d;k++){var l=b[k];if("localmove"==this.settings.animtype){var m=l.parentNode,f=Dottoro.GetBox(m);m.style.overflow="hidden"}var m=Dottoro.GetBox(l),p={from:0,to:0},n={from:0,to:0};switch(g){case "left":p[h]=-1*f.width;break;case "right":p[h]=f.width;break;case "random":var q=.5>Math.random()?f.left:f.right,r=f.top+f.height*Math.random(),q=q<=m.left?q-m.right:q-m.left,r=r<=m.top?r-m.bottom:r-m.top;p[h]=q;n[h]=r}c.push({elem:l,props:{trafo:{moveX:p,moveY:n}}})}this.holder=
e;this.holderOFlow=e.style.overflow;e.style.overflow="hidden"}}return c},getAnimItems_Cards:function(a,b){for(var c=[],d=b.length,e=null,f="from"==a?"to":"from",g=0;g<d;g++){var h=Dottoro.GetBox(b[g]);if("from"==a)var k={from:0,to:0,duration:"70%"},l={from:0,to:0,duration:"70%"},m={from:1,to:0,startTime:"70%"},p={from:1,to:0,startTime:"70%"},n={from:0,to:8*Math.PI,startTime:"70%"};else k={from:0,to:0,startTime:"30%"},l={from:0,to:0,startTime:"30%"},m={from:0,to:1,duration:"30%"},p={from:0,to:1,duration:"30%"},
n={from:8*Math.PI,to:0,duration:"30%"};0==g?e={x:h.left,y:h.top}:(k[f]=e.x-h.left,l[f]=e.y-h.top);c.push({elem:b[g],props:{trafo:{moveX:k,moveY:l,scaleX:m,scaleY:p,rotate:n}}})}return c},initAnim:function(a){var b="from"==a?this.settings.elemsfrom:this.settings.elemsto;if(b){switch(this.settings.animtype){case "scale":a=this.getAnimItems_Scale(a,b);break;case "move":case "localmove":a=this.getAnimItems_Move(a,b);break;case "cards":a=this.getAnimItems_Cards(a,b);break;default:case "fade":a=this.getAnimItems_Fade(a,
b)}if(0<a.length)return new Dottoro.Anim(a,this.settings.duration,{easing:this.settings.easing,callback:[this,"next"]})}return null},startFromEffect:function(){return this.initAnim("from")||this.startToEffect()},startToEffect:function(){this.endEffect("from");this.FireEvent("replacecontent");var a=this.initAnim("to");this.FireEvent("newcontentinitialized");this.back=!0;return a},endEffect:function(a){switch(this.settings.animtype){case "move":case "localmove":this.holder&&(this.holder.style.overflow=
this.holderOFlow,this.holder=null)}},next:function(a,b,c){0>c&&(!this.back&&this.startToEffect()||this.end())},end:function(){this.endEffect("to");this.FireEvent("end")},IsSupported:function(){if("fade"==this.settings.animtype)return!0;var a=Dottoro.GetCssTransformSupport();return a&&"OTransform"!=a},Start:function(){if(!this.startFromEffect())return!1;this.FireEvent("initialized");return!0}});
Dottoro.Scroller=Dottoro.ClassEventsSettings.extend({init:function(){this._super();this.wheelHandler=this.anim=null;this.initSettings()},initSettings:function(){this.settings.elem=window;this.settings.tox=!1;this.settings.toy=0;this.settings.duration=1E3;this.settings.easing="swing";this.settings.stoponwheel=!0},onAutoScroll:function(a,b,c,d){null==a?(this.anim=null,Dottoro.RemoveListener(this.wheelHandler),this.wheelHandler=null):(c=this.settings.elem,d=this.settings.tox,b=this.settings.toy,Dottoro.IsWin(c)?
(!1===d?(c=parseInt(Dottoro.GetDocScrollLeft()),a=a[0].value):(c=a[0].value,a=!1===b?parseInt(Dottoro.GetDocScrollTop()):a[1].value),scrollTo(c,a)):!1===d?c.scrollTop=a[0].value:(c.scrollLeft=a[0].value,!1!==b&&(c.scrollTop=a[1].value)))},onWheel:function(){this.settings.stoponwheel&&this.Stop()},Start:function(){var a=this.settings.elem,b=this.settings.tox,c=this.settings.toy;if(Dottoro.IsWin(a))var d=parseInt(Dottoro.GetDocScrollLeft(a.document)),e=parseInt(Dottoro.GetDocScrollTop(a.document)),
f=Dottoro.GetDocScrollMax(a.document);else d=a.scrollLeft,e=a.scrollTop,f=null;!1!==b&&(f&&b>f.x&&(b=f.x),0>b&&(b=0));!1!==c&&(f&&c>f.y&&(c=f.y),0>c&&(c=0));f=[];!1!==b&&d!=b&&f.push({from:d,to:b});!1!==c&&e!=c&&f.push({from:e,to:c});0!=f.length&&(this.anim=new Dottoro.Move(f,this.settings.duration,[this,"onAutoScroll"],{skipFirst:!0,easing:this.settings.easing}),this.settings.stoponwheel&&(a=Dottoro.IsWin(a)?document.body:a,this.wheelHandler=Dottoro.AddListener("mousewheel",[this,"onWheel"],a)))},
Stop:function(){this.anim&&(this.anim.Stop(),this.anim=null)},IsRunning:function(){return!!this.anim},SetSetting:function(a,b){this.IsRunning()||this._super(a,b)}});
Dottoro.ScrollerElem=Dottoro.ClassEventsSettings.extend({init:function(){this._super();this.initSettings();this.eventHandlers=[];this.srcElem=this.scroller=null},initSettings:function(){this.settings.srcelem=null;this.settings.targetelem=null;this.settings.vertoffset=0;this.settings.duration=1E3;this.settings.easing="swing";this.settings.stoponwheel=!0;this.settings.event="click"},onStart:function(a){this.startScroll();return Dottoro.PreventDefault(a)},startScroll:function(){var a=this.settings.targetelem,
b={toY:0,duration:this.settings.duration,easing:this.settings.easing,stoponwheel:this.settings.stoponwheel};if(a){var a=Dottoro.GetLeftTopInClient(a),c=parseInt(Dottoro.GetDocScrollTop());b.toY=c+a.top}b.toY+=this.settings.vertoffset;this.scroller.SetSettings(b);this.scroller.Start()},Activate:function(){this.scroller||(this.scroller=new Dottoro.Scroller,(this.srcElem=this.settings.srcelem)?(this.eventHandlers.push(Dottoro.AddListener(this.settings.event,[this,"onStart"],this.srcElem)),Dottoro._setData(this.srcElem,
"scrollerelem",this)):this.startScroll())},Deactivate:function(){this.scroller&&(this.scroller.Stop(),this.scroller=null,Dottoro.RemoveListener(this.eventHandlers),this.eventHandlers=[]);this.srcElem&&(Dottoro._removeData(this.srcElem,"scrollerelem"),this.srcElem=null)}});(function(){Dottoro.RegisterTagParser("scroller",function(a){var b=new Dottoro.ScrollerElem,c=a.getAttribute("data-dottoro_params");b.ReadSettings(c);(c=b.GetSetting("srcelem"))||b.SetSetting("srcelem",a);b.Activate()})})();
Dottoro.Slider=Dottoro.Section.extend({classID:"slider",init:function(){this._super();this.type="";this.initSettings();this.specifiedSettings={};this.direction="";this.command=null;this.playing={state:"stopped",paused:0};this.autoplay={command:null};this.slidesClasses={wrapper:"slider_slides_inner_wrapper",outer:"slider_slides_outer_wrapper"};this.buttonClasses={next:"slider_next_button",prev:"slider_prev_button",play_pause:"slider_pause_play_button",play:"slider_play_button",pause:"slider_pause_button"};
this.buttons={};this.slides=[];this.activeIdx=-1;this.semiVisRange=this.semiCommand=null;this.parentSlider={};this.childSliders={};this.childSliderId=0;this.customSlideLists=[];this.rangeControls={};this.rangeControlId=0;this.navigations=[];this.slideCounters=[];this.progresses=[];this.eps=.01;this.eventHandlers=[];this.hoverListeners=[];this.dragEventHandlers=[];this.notificationQueue=[];this.reTpl=/\{\{([^\{]+)\}\}/g;return this},onMessage:function(a,b){switch(a){case "contentsizechanged":this.contentSizeChanged();
return;case "mediacreatedbyposter":this.Pause({type:"hard"});this.finishDrag({cancel:!0});return}this._super(a,b)},initSettings:function(){this.SetSettings({profile:"slider",api_prefix:"",wrapper:null,create_items:!1,enable_comment_slides:!0,non_slide_class:"",wait_media_load:!0,active_idx:0,pause_type:"hard",pause_on_over:!0,flex_height:!1,inner_view_flex_height:!1,slides_scale_down:!1,custom_slides_class:"slider_custom_slides",navigation_class:"slider_navigation",navigation_item_class:"navigation_item_wrapper",
progress_class:"slider_progress",slide_counter_class:"slide_counter",pause_class:"slider_pause_on_over",orientation:"horizontal",circular:!0,connect_to_parent:"auto",trans:{value:1,unit:"slide",anim_duration:1E3,anim_type:"fadeinout",anim_easing:"ease",enable_autoplay:"disable",end_action:"rewind",async:!0},absolute:{trans:{}},relative:{trans:{}},autoplay:{enabled:!1,trans:{delay:3E3,dir:"next"},trans_profiles:{}},slide:{pause_on_over:!0,event:"none",trans:{unit:"slide"}},navigation:{pause_on_over:!0,
event:"click",trans:{unit:"slide"}},prev_next_button:{pause_on_over:!0,repeat_delay:0,autoplay_profile:"",trans:{}},key_navigation:{enabled:!0,repeat_delay:0,autoplay_profile:"",trans:{}},drag:{device:"all",min_move:50,trans:{}},parent_slider:{idx_map:[],trans:{unit:"slide"}}});this.simpleSettings={wrapper:1}},SetSetting:function(a,b){var c=a.toLowerCase();this.specifiedSettings&&(c in this.specifiedSettings&&"object"==Dottoro.TypeOf(this.specifiedSettings[c])?Dottoro.Extend(this.specifiedSettings[c],
b):this.specifiedSettings[c]=b);this.simpleSettings&&!(c in this.simpleSettings)&&c in this.settings&&"object"==Dottoro.TypeOf(this.settings[c])?Dottoro.Extend(this.settings[c],b):this._super(a,b)},Attach:function(){if(this.wrapper=this.settings.wrapper){this._super(this.wrapper);Dottoro.ContentRemoved(this.wrapper,[this,"Detach"]);var a=this.wrapper.id;if(this.slidesHolder=document.getElementById(a+"_slides")){this.slidesInnerWrapper=document.getElementById(a+"_slides_inner_wrapper");if(!this.slidesInnerWrapper){var b=
this.slidesHolder.parentNode;b&&Dottoro.HasCSSClass(b,this.slidesClasses.wrapper)?this.slidesInnerWrapper=b:this.slidesInnerWrapper=this.slidesHolder}this.slidesOuterWrapper=document.getElementById(a+"_slides_outer_wrapper");this.slidesOuterWrapper||((b=this.slidesInnerWrapper.parentNode)&&Dottoro.HasCSSClass(b,this.slidesClasses.outer)?this.slidesOuterWrapper=b:this.slidesOuterWrapper=this.slidesInnerWrapper);this.slidesInnerHolder=document.getElementById(a+"_slides_inner");this.slidesInnerHolder||
(this.slidesInnerHolder=this.slidesHolder)}else this.slidesInnerHolder=this.slidesHolder=this.slidesInnerWrapper=this.slidesOuterWrapper=this.wrapper;this.slidesHolder&&(Dottoro._setData(this.wrapper,"slider/obj",this),Dottoro._setData(this.slidesHolder,"slider/obj",this),this.collect(),this.modifySliderCssClass("type-"+this.type),this.modifySliderCssClass("orientation-"+this.settings.orientation),this.settings.flex_height&&Dottoro.ModifyCSSClass(this.wrapper,"js-flex-height"))}},PostAttach:function(){},
attachToSlides:function(a,b){var c=!a;if(c){a=this.slidesInnerHolder;var d=this.slidesOuterWrapper,e=this.slides}else d=a.parentNode,e=b.slides;for(var f=a.firstChild;f;){var g=e.length;if(this.settings.enable_comment_slides&&8==f.nodeType){var h=new Dottoro.Slide(this);e.push({commentNode:f,obj:h,idx:g})}else 1!=f.nodeType||this.settings.non_slide_class&&Dottoro.HasCSSClass(f,this.settings.non_slide_class)||(h=new Dottoro.Slide(this),e.push({box:f,obj:h,idx:g}),h.Attach(f),this.initSlide(g,b,!1,
!1));f=f.nextSibling}Dottoro.ModifyCSSClass(d,"slide-num-"+e.length,"slide-num-0");c&&Dottoro.ModifyCSSClass(this.wrapper,"slide-num-"+e.length,"slide-num-0")},setSliderReference:function(a){if(Dottoro._hasData(a,"slider/obj"))return!1;Dottoro._setData(a,"slider/obj",this);return!0},modifySliderCssClass:function(a,b){for(var c=Dottoro.ModifyCSSClass(this.wrapper,a,b),d=0;d<c.add.length;d++)c.add[d]="slider-"+c.add[d];for(d=0;d<c.remove.length;d++)c.remove[d]="slider-"+c.remove[d];Dottoro.ModifyCSSClass(this.slidesOuterWrapper,
c.add,c.remove);this.slidesInnerWrapper!=this.slidesOuterWrapper&&Dottoro.ModifyCSSClass(this.slidesInnerWrapper,c.add,c.remove);this.slidesHolder!=this.slidesInnerWrapper&&Dottoro.ModifyCSSClass(this.slidesHolder,c.add,c.remove);this.slidesInnerHolder!=this.slidesHolder&&Dottoro.ModifyCSSClass(this.slidesInnerHolder,c.add,c.remove)},addRemoveSliderCssClass:function(a,b,c){a?this.modifySliderCssClass(b,c):this.modifySliderCssClass(c,b)},readArraySettings:function(a){var b=[];if(a)try{b=(new Function("return ["+
a+"]"))()}catch(c){}return b||[]},collect:function(){this.settings.create_items?this.storeSlideTemplate():this.attachToSlides();for(var a=this.GetElemsByClass(this.settings.custom_slides_class,this.wrapper),b=0;b<a.length;b++){var c=a[b],d=c.parentNode;if(this.setSliderReference(d)){var e={wait_media_load:!0,idx_map:[]};Dottoro.ReadNodeSettings(d,e);e={settings:e,slides:[],wrapper:d,inner:c};Dottoro._setData(d,"slider/data",e);this.customSlideLists.push(e);this.attachToSlides(c,e)}}e=this.GetElemsByClass(this.settings.pause_class,
this.wrapper);for(b=0;b<e.length;b++)c=e[b],this.setSliderReference(c)&&this.pauseOnOver(e[b]);c=this.GetElemsByClass(this.settings.navigation_class,this.wrapper);for(b=0;b<c.length;b++)if(d=c[b],d!=this.slidesHolder)if(this.setSliderReference(d))if(e={},Dottoro.ReadNodeSettings(d,e),e.trans&&(e.trans=Dottoro.SplitSettings(e.trans,!0)),(a="pause_on_over"in e?e.pause_on_over:this.settings.navigation.pause_on_over)&&this.pauseOnOver(d),a={wrapper:d,settings:e,activeIdx:-1},Dottoro._setData(d,"slider/data",
a),this.navigations.push(a),e.create_items)for(e=d.firstChild;e;){if(8==e.nodeType){a.itemTpl=Dottoro.DecodeCommentNodeText(e);Dottoro.RemoveNode(e);break}e=e.nextSibling}else this.collectNavigationButtons(a);else this.settings.navigation.pause_on_over&&this.pauseOnOver(d);for(var f in this.buttonClasses)for(b=this.GetElemsByClass(this.buttonClasses[f],this.wrapper),this.buttons[f]=[],c=0;c<b.length;c++)if(d=b[c],this.setSliderReference(d))switch(e={},Dottoro.ReadNodeSettings(d,e),e.trans&&(e.trans=
Dottoro.SplitSettings(e.trans,!0)),a={button:d,settings:e},Dottoro._setData(d,"slider/data",a),this.buttons[f].push(a),f){case "play_pause":this.eventHandlers.push(Dottoro.AddListener("click",[this,"onToggleAutoplayState"],d));break;case "play":this.eventHandlers.push(Dottoro.AddListener("click",[this,"onEnableAutoplay"],d));break;case "pause":this.eventHandlers.push(Dottoro.AddListener("click",[this,"onDisableAutoplay"],d));break;case "prev":case "next":(a="pause_on_over"in e?e.pause_on_over:this.settings.prev_next_button.pause_on_over)&&
this.pauseOnOver(d),this.eventHandlers.push(Dottoro.AddListener("mousedown",[this,"onMouseDownPrevNextButton"],d,!1,f))}f=this.GetElemsByClass(this.settings.progress_class,this.wrapper);for(b=0;b<f.length;b++)e=f[b],this.setSliderReference(e)&&(this.progresses.push(e),e.style.width=0);f=this.GetElemsByClass(this.settings.slide_counter_class,this.wrapper);for(b=0;b<f.length;b++)c=f[b],this.setSliderReference(c)&&(e={},Dottoro.ReadNodeSettings(c,e),a={elem:c,settings:e},Dottoro._setData(c,"slider/data",
a),this.slideCounters.push(a))},findParentSlider:function(){var a=this.settings.connect_to_parent;if("none"==a)return null;for(var b=null,c=this.wrapper.parentNode;c&&!(b=Dottoro._getData(c,"slider/obj"));)c=c.parentNode;return!b||"auto"==a&&Dottoro.IsAncestorOf(b.slidesHolder,this.wrapper)?null:b},Connect:function(){if(this.IsValid()){this.initCssEx();var a=this.findParentSlider();if(a){var b=a.AttachChildSlider(this);this.parentSlider={control:a,attachId:b};this.modifySliderCssClass("navigationslider");
var b=this.specifiedSettings.parent_slider||{},b=b.trans||{},c=a.getTransSettings("navigation",{}),d;for(d in c)d in b||(this.settings.parent_slider.trans[d]=c[d]);b=this.specifiedSettings.slide||{};"event"in b||(this.settings.slide.event=a.settings.navigation.event);!this.IsParentSliderIndexesMapped()&&this.settings.create_items&&(a.AddListener("slidesready",[this,"holderSliderSlidesReady"]),"page"==this.GetParentSliderTransUnit()&&a.AddListener("slidesperpagereset",[this,"holderSliderSlidesPerPageReset"]))}else this.modifySliderCssClass("mainslider")}},
Activate:function(){this.IsValid()&&this.start()},destroySlide:function(a){a=this.slides[a];a.preload&&(a.preload.Destroy(),delete a.preload,Dottoro.RestoreStyle(this.settings.profile,a.box));a.inner&&a.inner.parentNode!==a.box&&Dottoro.CallContentRemovedHandlers(a.inner);Dottoro.RemoveListener(a.listeners);a.cssEx=null;a.obj.Detach()},detachSlides:function(){Dottoro.ModifyCSSClass(this.slidesOuterWrapper,"slide-num-0","slide-num-"+this.slides.length);Dottoro.ModifyCSSClass(this.wrapper,"slide-num-0",
"slide-num-"+this.slides.length);for(var a=0;a<this.slides.length;a++)this.destroySlide(a);this.slides=[]},Detach:function(){this.StopCurrentCommand("any");this.hidePreloader(!0);Dottoro.RemoveListener(this.eventHandlers);this.eventHandlers=[];for(var a=0;a<this.hoverListeners.length;a++){var b=this.hoverListeners[a];Dottoro.RemoveListener(b.enter);Dottoro.RemoveListener(b.leave)}this.hoverListeners=[];this.detachSlides();delete this.wrapper;delete this.slidesOuterWrapper;delete this.slidesInnerWrapper;
delete this.slidesHolder;this.buttons={};this.parentSlider.control&&(this.parentSlider.control.DetachChildSlider(this.parentSlider.attachId),this.parentSlider={});this.DetachAllChildSliders();this.navigations=[];this.DetachAllRangeControls();this.progresses=[];this._super()},IsValid:function(){return!!this.slidesHolder},IsChildSlider:function(){return!!this.parentSlider.control},getDirection:function(){this.direction||(this.isHorizontal()?this.direction="rtl"==Dottoro.GetStyle(this.wrapper,"direction")?
"reverse":"normal":this.direction="normal",this.modifySliderCssClass("direction-"+this.direction));return this.direction},isDirectionNormal:function(){return"normal"==this.getDirection()},isHorizontal:function(){return"horizontal"==this.settings.orientation},IsEqual:function(a,b){return Math.abs(a-b)<this.eps},WaitForParentControl:function(a){return this.IsChildSlider()&&!a.async&&!a.parent},getTransSettings:function(a,b,c){var d=!0===b;b=d?this.settings.trans:b||{};b=Dottoro.Clone(b,!0);d&&(d={slide:1,
navigation:1},a in{autoplay:1,prev_next_button:1,key_navigation:1,auto_align:1,drag:1}?Dottoro.Extend(b,this.settings.relative.trans):a in d&&Dottoro.Extend(b,this.settings.absolute.trans));Dottoro.Extend(b,this.settings[a].trans);c&&Dottoro.Extend(b,c);return b},GetParentMappedSlideIndex:function(a){var b=this.settings.parent_slider.idx_map;if(0<b.length)for(var c=0;c<b.length;c++){var d=b[c];if(Dottoro.IsArray(d)){if(0<=Dottoro.FindInArray(d,a))return c}else if(d==a)return c}return-1},GetChildMappedSlideIndex:function(a,
b){return this.GetMappedIndex(this.settings.parent_slider.idx_map,b)},GetMappedIndex:function(a,b){if(a.length>b){var c=a[b];if(Dottoro.IsArray(c)){if(c.length)return c[0]}else return c}return-1},IsParentSliderIndexesMapped:function(){return 0<this.settings.parent_slider.idx_map.length},GetParentSliderTransSettings:function(){return this.settings.parent_slider.trans},GetParentSliderTransUnit:function(){return this.IsParentSliderIndexesMapped()?"slide":this.GetParentSliderTransSettings().unit},initCssEx:function(){var a=
Dottoro.CssEx.GetHolderDetails(this.wrapper);a&&(a.hidden?(a=a.cssEx,a.AddListener("hidden_collect_start",[this,"removeWrapper_CSSExCollect"]),a.AddListener("hidden_collect_end",[this,"restoreWrapper_CSSExCollect"])):this.cssEx=a.cssEx);this.cssExOwner=this.cssEx?this.cssEx.GetOwner():null;this.cssExOwner||(this.cssEx&&(this.cssEx.AddListener("collect_start",[this,"removeWrapper_CSSExCollect"]),this.cssEx.AddListener("collect_end",[this,"restoreWrapper_CSSExCollect"])),this.cssEx=Dottoro.CssEx.Create(this.wrapper,
this))},attachSlideToCssEx:function(a,b){this.cssEx.Attach(a)},collectNavigationButtons:function(a){var b=Dottoro.GetElemsByClass(this.settings.navigation_item_class,a.wrapper);a.listeners=[];for(var c=[],d=0;d<b.length;d++){var e=b[d];if(this.setSliderReference(e)){c.push(e);var f={};Dottoro.ReadNodeSettings(e,f);f.trans&&(f.trans=Dottoro.SplitSettings(f.trans,!0));f.trans&&"unit"in f.trans&&delete f.trans.unit;Dottoro.Extend(f,a.settings,{override:!1});Dottoro._setData(e,"slider/data",{holder:a.wrapper,
idx:d,settings:f});(f="event"in f?f.event:this.settings.navigation.event)&&"none"!=f&&a.listeners.push(Dottoro.AddListener(f,[this,"onNavigationCommand"],e))}}a.items=c;Dottoro.ModifyCSSClass(a.wrapper.parentNode,"item-num-"+c.length,"item-num-0");0<b.length&&(c=Dottoro.GetStyle(a.wrapper,"direction"),d=["leftmost-item","rightmost-item"],Dottoro.ModifyCSSClass(b[0],d["rtl"==c?1:0]),Dottoro.ModifyCSSClass(b[b.length-1],d["rtl"==c?0:1]));this.setNavigationWrapperWidth(a)},removeNavigationButtons:function(a){a.items&&
(Dottoro.ModifyCSSClass(a.wrapper.parentNode,"item-num-0","item-num-"+a.items.length),Dottoro.RemoveListener(a.listeners),delete a.listeners,delete a.items,a.activeIdx=-1)},renderTemplate:function(a,b){return a.replace(this.reTpl,function(a,d){d=Dottoro.Trim(d);return"index"==d?b.index:a})},createNavigationButtons:function(){for(var a=0;a<this.navigations.length;a++){var b=this.navigations[a];if(b.settings.create_items&&b.itemTpl&&"page"==this.getTransSettings("navigation",!0,b.settings.trans).unit){var c=
this.getPageNum();if(!b.items||b.items.length!=c){this.removeNavigationButtons(b);for(var d=[],e=0;e<c;e++){var f=this.renderTemplate(b.itemTpl,{index:e+1});d.push(f)}Dottoro.SetElemHtml(b.wrapper,d.join(""));this.collectNavigationButtons(b)}}}},createSlides:function(){if(this.slideTpl&&"page"==this.GetParentSliderTransUnit()){var a=this.parentSlider.control.getPageNum();if(this.slides.length!=a){this.detachSlides();for(var b=[],c=0;c<a;c++){var d=this.renderTemplate(this.slideTpl,{index:c+1});b.push(d)}Dottoro.SetElemHtml(this.slidesInnerHolder,
b.join(""));this.attachToSlides();this.initSlides();this.createSlidesPostPhase()}}},createSlidesPostPhase:function(){var a=this.activeIdx,a=Math.min(Math.max(a,0),this.slides.length-1);this.setActiveSlide(a,{skipParentCommand:!0})||(a=this.slides[a],this.setSlideStateCssClass(a,"aftershow"),this.setSlideStateCssClass(a,"afteractivate"))},storeSlideTemplate:function(){for(var a=this.slidesHolder.firstChild;a;){if(8==a.nodeType){this.slideTpl=Dottoro.DecodeCommentNodeText(a);Dottoro.RemoveNode(a);break}a=
a.nextSibling}},initSlides:function(){var a=this.settings.slide.event;if(a&&"none"!=a)for(var b=0;b<this.slides.length;b++){var c=this.slides[b];c.listeners.push(Dottoro.AddListener(a,[this,"onSlideCommand"],c.box,{},b))}this.createNavigationButtons();this.FireEvent("slidesready")},initSlide:function(a,b,c,d){var e=(b?b.slides:this.slides)[a],f=e.box;f.style.display="";if(!b){var g=Dottoro.FirstElementChild(f,"div"),h=[],k=f.getAttribute("data-dottoro_slider"),l={};k&&(l=Dottoro.SplitSettings(k),
l.link&&(h.push(Dottoro.AddListener("click",[this,"onOpenSlideLink"],f,{},a)),f.style.cursor="pointer"));Dottoro.Extend(e,{datas:l,inner:g,listeners:h,mediasLoaded:!1},{deep:!1})}this.initSlidePostPhase(a,b,c,d);c&&(e.obj.Attach(f),Dottoro.CallContentReadyHandlers(f))},initSlidePostPhase:function(a,b,c,d){},initAllCommentSlides:function(){for(var a=0;a<this.slides.length;a++)this.initCommentSlide(a)},initCommentSlide:function(a){this.initSlideListCommentSlide(a);for(var b=0;b<this.customSlideLists.length;b++)this.initSlideListCommentSlide(a,
this.customSlideLists[b])},initSlideListCommentSlide:function(a,b){var c=!b,d=(b?b.slides:this.slides)[a];if(d&&d.commentNode){var e=d.commentNode.parentNode,f=Dottoro.DecodeCommentNodeText(d.commentNode);if(f){var g=e.ownerDocument.createElement("div"),f=Dottoro.SetElemHtml(g,f,{evalScripts:!1});if(g=Dottoro.FirstElementChild(g))e.insertBefore(g,d.commentNode),e.removeChild(d.commentNode),delete d.commentNode,d.box=g,Dottoro.EvalScriptTags(f.scripts),this.initSlide(a,b,!0,!0),this.setSlideStateCssClass(d,
"afterhide"),this.setSlideStateCssClass(d,"afterinactivate"),this.attachSlideToCssEx(g,c)}}},removeWrapper:function(){this.wrapperParent||(this.wrapperParent=this.wrapper.parentNode,this.wrapperNextSibling=this.wrapper.nextSibling,Dottoro.RemoveNode(this.wrapper))},restoreWrapper:function(){this.wrapperParent&&(this.wrapperParent.insertBefore(this.wrapper,this.wrapperNextSibling),delete this.wrapperParent,delete this.wrapperNextSibling)},removeWrapperInner:function(){"slidesHolderNextSibling"in this||
(this.slidesHolderNextSibling=this.slidesHolder.nextSibling,Dottoro.RemoveNode(this.slidesHolder))},restoreWrapperInner:function(){"slidesHolderNextSibling"in this&&(this.slidesInnerWrapper.insertBefore(this.slidesHolder,this.slidesHolderNextSibling),delete this.slidesHolderNextSibling)},holderSliderSlidesReady:function(){this.createSlides()},holderSliderSlidesPerPageReset:function(){this.createSlides()},removeWrapper_CSSExCollect:function(a,b,c){Dottoro.IsAncestorOf(c,this.wrapper)&&this.removeWrapper()},
restoreWrapper_CSSExCollect:function(a,b,c){this.restoreWrapper()},AttachChildSlider:function(a){var b=""+this.childSliderId++;this.childSliders[b]={control:a,handlers:[]};return b},DetachChildSlider:function(a){if(a in this.childSliders){var b=this.childSliders[a];b.control.RemoveListener(b.handlers);delete this.childSliders[a]}},DetachAllChildSliders:function(){for(var a in this.childSliders){var b=this.childSliders[a];b.control.RemoveListener(b.handlers)}this.childSliders={}},AttachRangeControl:function(a){var b=
""+this.rangeControlId++,c=[];c.push(a.AddListener("valuechanged",[this,"onRangeControlValueChanged"]));c.push(a.AddListener("thumbdragstart",[this,"onRangeControlDragStart"]));c.push(a.AddListener("thumbdragend",[this,"onRangeControlDragEnd"]));c.push(a.AddListener("trackdown",[this,"onRangeTrackDown"]));c.push(a.AddListener("trackup",[this,"onRangeTrackUp"]));this.rangeControls[b]={control:a,handlers:c};this.SetDefaultRangeControlSettings(a);return b},DetachRangeControl:function(a){if(a in this.rangeControls){var b=
this.rangeControls[a];b.control.RemoveListener(b.handlers);delete this.rangeControls[a]}},DetachAllRangeControls:function(){for(var a in this.rangeControls){var b=this.rangeControls[a];b.control.RemoveListener(b.handlers)}this.rangeControls={}},SetDefaultRangeControlSettings:function(a){var b=this.GetDefaultRangeControlSettings(a);a.SetDefaultSettings(b)},GetDefaultRangeControlSettings:function(a){return"slide"==a.GetViewSettings().unit?{min:0,max:this.slides.length-1,inter_values:!1,value_display_offset:1,
direction:this.getDirection()}:{min:0,max:100,inter_values:!0,value_display_offset:0,direction:this.getDirection()}},enableRangeControls:function(a){for(var b in this.rangeControls)this.rangeControls[b].control.Enable(a)},delayPerformRangeDragCommand:function(){var a=this;this.rangeDragging.timerId=setTimeout(function(){a.performRangeDragCommand()},0)},performRangeDragCommand:function(a){this.rangeDragging.timerId&&(clearTimeout(this.rangeDragging.timerId),delete this.rangeDragging.timerId);this.rangeDragging.command&&
(this.DoCommand(this.rangeDragging.command),delete this.rangeDragging.command,a||this.delayPerformRangeDragCommand())},onRangeControlDragStart:function(a,b,c){this.Pause({type:"hard"});this.rangeDragging={};this.createCaptureOverlap()},onRangeControlDragEnd:function(a,b,c,d){this.removeCaptureOverlap();d&&(this.performRangeDragCommand(!0),delete this.rangeDragging,this.Continue())},onRangeTrackDown:function(a,b,c){this.Pause({type:"hard"})},onRangeTrackUp:function(a,b,c){this.Continue()},onRangeControlValueChanged:function(a,
b,c,d,e,f){!this.initialized||e.source&&e.source.control==this||e.parent&&e.parent.control==this||(f=this.cloneCommand(f),Dottoro.Extend(f,b.GetViewSettings()),f[e.async?"source":"child"]={control:b,command:e},f.value=d,a=Dottoro.Now(),"invokeTime"in f||(f.invokeTime=a),this.rangeDragging&&this.rangeDragging.timerId?this.rangeDragging.command=f:(this.DoCommand(f),this.rangeDragging&&this.delayPerformRangeDragCommand()))},doChildCommand:function(a,b,c){!this.initialized||c.source&&c.source.control==
this||c.parent&&c.parent.control==this||b.invalidIndex||(b=this.cloneCommand(b),b.invokeTime=c.invokeTime,b[c.async?"source":"child"]={control:a,command:c},this.DoCommand(b))},showPreloader:function(a,b,c){b&&(this.semiCommand=b,this.semiVisRange=c);this.preloaderAnim?this.preloaderAnim.show():this.preloaderAnim=new Dottoro.PreloaderAnim(this.slidesInnerWrapper,a,"nobg")},hidePreloader:function(a){this.preloaderAnim&&(this.preloaderAnim.Stop(),this.preloaderAnim=null);a&&(this.semiVisRange=this.semiCommand=
null)},GetElemsByClass:function(a,b,c){a=Dottoro.GetElemsByClass(a,b);b=[];for(var d=0;d<a.length;d++)c&&Dottoro.IsAncestorOf(c,a[d])||b.push(a[d]);return b},doSlideChange:function(a,b){return 0},pauseSlideMedias:function(a){a=this.slides[a];Dottoro.ShowPosters(a.box);Dottoro.Medias.Pause(a.box)},iterateRange:function(a,b){if(0>a.first)return!0;for(var c=a.last<a.first?this.slides.length-1:a.last,d=a.first;d<=c;d++)if(!1===Dottoro.CallUserFunc(b,d))return!1;if(a.last<a.first)for(d=0;d<=a.last;d++)if(!1===
Dottoro.CallUserFunc(b,d))return!1;return!0},isInRange:function(a,b){return 0>b.first?!1:b.last<b.first?0<=a&&a<=b.last||a>=b.first:a>=b.first&&a<=b.last},isSemiInRange:function(a,b){return 0>b.first?!1:a==b.first&&("both"==b.semi||"first"==b.semi)||a==b.last&&("both"==b.semi||"last"==b.semi)},preloadRangeMedias:function(a){this.iterateRange(a,[this,"preloadMedias"])},isRangeMediasLoaded:function(a){var b=this;return this.iterateRange(a,function(a){return b.isMediasLoaded(a)})},pauseRangeMedias:function(a){this.iterateRange(a,
[this,"pauseSlideMedias"])},onSlideReady:function(a,b){var c=!b,d=(b?b.slides:this.slides)[a];d.mediasLoaded=!0;delete d.preload;d.sendAfterShow&&(d.sendAfterShow.outer&&this.notify(a,"aftershow",b),d.sendAfterShow.inner&&this.notify(a,"aftershow_inner",b),d.sendAfterShow=null);c&&this.semiVisRange&&this.isInRange(a,this.semiVisRange)&&this.isRangeMediasLoaded(this.semiVisRange)&&this.DoCommand(this.semiCommand,0,{skipPause:!0})},onOpenSlideLink:function(a,b,c){this.parentSlider.control||(a=this.slides[c],
a.datas&&"link"in a.datas&&Dottoro.OpenWindow(a.datas.link,a.datas.target))},onSlideCommand:function(a,b,c){a=this.getTransSettings("slide",{value:c});this.DoCommand(a)},onNavigationCommand:function(a,b){var c=Dottoro._getData(b,"slider/data"),c=this.getTransSettings("navigation",{value:c.idx},c.settings.trans);this.DoCommand(c);return Dottoro.CancelEvent(a)},doKeyNavAutoplay:function(a){var b={indicator:"keynav"};b.autoplay_profile=a;b.dir=this.keynav.type;this.keynav.autoplay=this.DoCommand(b)},
doKeyNavCommand:function(){var a=this.getTransSettings("key_navigation",{});a.indicator="keynav";a.dir=this.keynav.type;this.DoCommand(a)},onKeyDown:function(a){var b=a.keyCode;if(this.settings.key_navigation.enabled&&37<=b&&40>=b){var c=!0;if(this.keynav){if(this.keynav.lastCommandFinished){var d=this.settings.key_navigation.repeat_delay;if(0>d||d>Dottoro.Now()-this.keynav.lastCommandFinished)c=!1}this.command&&"keynav"==this.command.indicator&&(c=!1);this.queue&&"keynav"==this.queue.command.indicator&&
this.keynav.code==b&&(c=!1)}c&&(c=this.isDirectionNormal(),this.keynav={code:b,type:c==(37==b||38==b)?"prev":"next"},(b=this.settings.key_navigation.autoplay_profile)?this.doKeyNavAutoplay(b):this.doKeyNavCommand());return Dottoro.CancelEvent(a)}if(27==b&&this.DuringDrag())return this.finishDrag({cancel:!0}),Dottoro.CancelEvent(a)},onKeyUp:function(a){a=a.keyCode;this.settings.key_navigation.enabled&&37<=a&&40>=a&&this.keynav&&this.keynav.code==a&&(this.keynav.autoplay&&this.command&&"keynav"==this.command.indicator&&
(this.restoreAutoplay(),this.IsAutoplayEnabled()&&this.toggleAutoplayState(!1),this.StopCurrentCommand("infinite")),delete this.keynav)},createCaptureOverlap:function(){this.captureOverlap?this.captureOverlap.style.display="block":(this.captureOverlap=Dottoro.CreateElement("div",this.slidesOuterWrapper,{className:"slider-capture-overlap"}),this.eventHandlers.push(Dottoro.AddListener("mousedown",[this,"removeCaptureOverlap"],this.captureOverlap)))},removeCaptureOverlap:function(){this.captureOverlap&&
(this.captureOverlap.style.display="none",this.ignorePause())},DuringDrag:function(a){return 0<this.dragEventHandlers.length?!a||a==this.dragData.device:!1},GetMousePos:function(a){return Dottoro.GetMouseClientCoords(a,this.slidesInnerWrapper.ownerDocument)},CheckDragSourceElem:function(a){return(a=a.target||a.srcElement)&&(a==this.slidesOuterWrapper||a==this.slidesInnerWrapper||Dottoro.IsAncestorOf(this.slidesHolder,a))},isDraggable:function(){return!0},onMouseDown:function(a){if(!this.DuringDrag()&&
this.CheckDragSourceElem(a)&&this.isDraggable()){var b=!1;this.slidesOuterWrapper.addEventListener?(this.dragEventHandlers.push(Dottoro.AddListener("mousemove",[this,"onDragMove"],this.slidesOuterWrapper,Dottoro.CAPTURE_WINDOW,"mouse")),this.dragEventHandlers.push(Dottoro.AddListener("mouseup",[this,"onDragEnd"],this.slidesOuterWrapper,Dottoro.CAPTURE_WINDOW,"mouse"))):this.slidesOuterWrapper.setCapture&&(this.slidesOuterWrapper.setCapture(),this.dragEventHandlers.push(Dottoro.AddListener("mousemove",
[this,"onDragMove"],this.slidesOuterWrapper,!1,"mouse")),this.dragEventHandlers.push(Dottoro.AddListener("mouseup",[this,"onDragEnd"],this.slidesOuterWrapper,!1,"mouse")),this.dragEventHandlers.push(Dottoro.AddListener("losecapture",[this,"onLoseCapture"],this.slidesOuterWrapper)),b=!0);var c=this.GetMousePos(a);this.dragData={device:"mouse",startPos:c,pos:c,lastMove:0};this.dragStart();this.Pause({type:"hard"});a.preventDefault&&(a.preventDefault(),b=!0);b&&this.settings.key_navigation.enabled&&
this.wrapper.focus()}},onTouchStart:function(a){!this.DuringDrag()&&this.CheckDragSourceElem(a)&&this.isDraggable()&&a.touches&&1==a.touches.length&&(this.dragEventHandlers.push(Dottoro.AddListener("touchmove",[this,"onDragMove"],this.slidesOuterWrapper,Dottoro.CAPTURE_WINDOW,"touch")),this.dragEventHandlers.push(Dottoro.AddListener("touchend",[this,"onDragEnd"],this.slidesOuterWrapper,Dottoro.CAPTURE_WINDOW,"touch")),this.dragEventHandlers.push(Dottoro.AddListener("touchcancel",[this,"onDragCancel"],
this.slidesOuterWrapper,Dottoro.CAPTURE_WINDOW,"touch")),a=this.GetMousePos(a),this.dragData={device:"touch",startPos:a,pos:a,lastMove:0},this.dragStart())},onDragMove:function(a,b,c){if(this.DuringDrag(c)){var d=this.GetMousePos(a),e=this.isHorizontal()?"x":"y";b=d[e]-this.dragData.pos[e];this.dragData.minMovePerformed||(b=d[e]-this.dragData.startPos[e],Math.abs(b)>=this.settings.drag.min_move&&(this.dragData.minMovePerformed=!0,this.modifySliderCssClass("dragging"),this.StopCurrentCommand("any"),
this.hidePreloader(!0)));this.dragData.pos=d;if(this.dragData.minMovePerformed){this.createCaptureOverlap();if(b){this.dragData.lastMove=b;d=Dottoro.Now();if("lastTime"in this.dragData&&(e=d-this.dragData.lastTime,15>e)){this.dragData.move=this.dragData.move||0;this.dragData.move+=b;this.dragData.timerId||(this.dragData.timerId=Dottoro.Timer.Add([this,"performDragMove"],{duration:15-e,once:!0}));return}this.dragData.move&&(b+=this.dragData.move);delete this.dragData.move;this.clearDragTimer();this.dragData.lastTime=
d;b&&this.dragMove(b)}if("touch"==c)return Dottoro.PreventDefault(a)}}},onDragEnd:function(a,b,c){this.finishDrag({device:c})},onDragCancel:function(a,b,c){this.finishDrag({cancel:!0,device:c})},onLoseCapture:function(a){this.finishDrag({cancel:!0})},finishDrag:function(a){a=a||{};this.DuringDrag(a.device)&&(this.performDragMove(),this.clearDragTimer(),Dottoro.RemoveListener(this.dragEventHandlers),this.modifySliderCssClass("","dragging"),this.dragEventHandlers=[],this.slidesOuterWrapper.releaseCapture&&
!this.slidesOuterWrapper.addEventListener&&this.slidesOuterWrapper.releaseCapture(),this.removeCaptureOverlap(),this.dragEnd(a.cancel))},dragStart:function(){},dragMove:function(a){},dragEnd:function(a){},performDragMove:function(){this.dragData.move&&(this.dragMove(this.dragData.move),this.dragData.lastTime=Dottoro.Now());delete this.dragData.move},clearDragTimer:function(){this.dragData.timerId&&(Dottoro.Timer.Remove(this.dragData.timerId),delete this.dragData.timerId)},isCircular:function(){return this.settings.circular},
getPageNum:function(){return this.slides.length},validateSlideIdx:function(a,b){return b&&!this.isCircular()?0>a?0:a>=this.slides.length?this.slides.length-1:a:Dottoro.Modulo(a,this.slides.length)},getActiveSlideIdx:function(){return this.validateSlideIdx(0<=this.activeIdx?this.activeIdx:this.settings.active_idx)},getActiveSlide:function(){var a=this.getActiveSlideIdx();return this.slides[a]},setActiveSlide:function(a,b){b=Dottoro.Extend({start:!1,init:!1,duration:0,skipParentCommand:!1},b);if(this.activeIdx==
a)return!1;var c=this.activeIdx;b.init||(this.activeIdx=a);this.activeSlideChanged(c,a,b);b.skipParentCommand||this.notifyParentActiveSlideChanged(a,b);return!0},notifyParentActiveSlideChanged:function(a,b){var c=this.parentSlider.control;if(c){b=Dottoro.Extend({sourceCommand:!0},b);var d=this.GetParentSliderTransSettings();d.value=a;this.IsParentSliderIndexesMapped()&&(d.unit="slide",d.value=this.GetParentMappedSlideIndex(a),d.invalidIndex=0>d.value);var e=b.sourceCommand?this.command:{invokeTime:Dottoro.Now(),
async:!0,related_commands:{}};c.doChildCommand(this,d,e)}},activeSlideChanged:function(a,b,c){this.updateActiveState(a,b,c.duration);this.updateControls(b,this.slides.length,{anim_duration:c.duration});this.updateButtons()},updateActiveState:function(a,b,c){var d=["first-slide-active","last-slide-active"];0<=a&&d.push("active-slide-idx-"+a);var e=["active-slide-idx-"+b];0==b&&e.push("first-slide-active");b==this.slides.length-1&&e.push("last-slide-active");Dottoro.ModifyCSSClass(this.wrapper,e,d);
Dottoro.ModifyCSSClass(this.slidesOuterWrapper,e,d);this.updateSlidesState(a,b,!0,"active");c||this.updateSlidesState(a,b,!1,"active")},hideAllSlides:function(){for(var a=0;a<this.slides.length;a++)this.updateSlideState(a,"afterhide",{sendEvent:!1})},inactivateAllSlides:function(){for(var a=0;a<this.slides.length;a++)this.updateSlideState(a,"afterinactivate",{sendEvent:!1})},updateSlideState:function(a,b,c){this.notify(a,b,null,c);for(var d=0;d<this.customSlideLists.length;d++){var e=this.customSlideLists[d],
f=a,g=e.settings.idx_map;g.length&&0<=a&&(f=this.GetMappedIndex(g,a));this.notify(f,b,e,c)}},updateSlidesState:function(a,b,c,d,e){var f="",g="";"show"==d?(f=c?"beforehide":"afterhide",g=c?"beforeshow":"aftershow"):"active"==d&&(f=c?"beforeinactivate":"afterinactivate",g=c?"beforeactivate":"afteractivate");if(f)for(this.notify(a,f,null,e),this.notify(b,g,null,e),c=0;c<this.customSlideLists.length;c++){d=this.customSlideLists[c];var h=a,k=b,l=d.settings.idx_map;l.length&&(0<=a&&(h=this.GetMappedIndex(l,
a)),0<=b&&(k=this.GetMappedIndex(l,b)));h!=k&&(this.notify(h,f,d,e),this.notify(k,g,d,e))}},updateNavigation:function(a,b){a.activeIdx!=b&&(0<=a.activeIdx&&(Dottoro.ModifyCSSClass(a.items[a.activeIdx],"inactive","active"),a.activeIdx=-1),0<=b&&b<a.items.length&&(Dottoro.ModifyCSSClass(a.items[b],"active","inactive"),a.activeIdx=b))},updateNavigations:function(a){for(var b=0;b<this.navigations.length;b++){var c=this.navigations[b];"slide"==this.getTransSettings("navigation",!0,c.settings.trans).unit&&
this.updateNavigation(c,a)}},updateSlideCounter:function(a,b,c){a.elem.innerHTML='<span class="'+this.settings.slide_counter_class+'_current">'+(b+1)+"</span>"+c},updateSlideCounters:function(a,b){for(var c=0;c<this.slideCounters.length;c++)this.updateSlideCounter(this.slideCounters[c],a,b)},updateRangeControl:function(a,b,c){a=this.rangeControls[a].control;c=c||{};c.async=!0;var d={},e="source";if(this.command){if(this.command.source&&this.command.source.control==a)return;this.command.child&&this.command.child.control==
a&&(d=this.cloneCommand(this.command.child.command),e="parent")}c[e]={control:this,command:this.command};a.SetValue(b,d,c)},updateRangeControls:function(a,b){for(var c in this.rangeControls)"slide"==this.rangeControls[c].control.GetViewSettings().unit&&this.updateRangeControl(c,a,b)},callbackChildSlider:function(a){if(this.command&&this.command.child){var b=this.command.child.control;b instanceof Dottoro.Slider&&(a=a||{},a.async=!0,a.min_speed=0,b.DoCommand(this.command.child.command,0,a))}},updateChildSlider:function(a,
b,c){a=this.childSliders[a].control;if(!this.command||!(this.command.source&&this.command.source.control==a||this.command.child&&this.command.child.control==a)){b={value:b,unit:"slide",async:!0,source:{control:this,command:this.command}};if(!this.command||this.command.is_autoplay)b.enable_autoplay="no_change";this.command&&(b.invokeTime=this.command.invokeTime);a.DoCommand(b,0,c)}},updateChildSliders:function(a,b){for(var c in this.childSliders){var d=this.childSliders[c].control;if("slide"==d.GetParentSliderTransUnit()){var e=
a;if(d.IsParentSliderIndexesMapped()&&(e=this.GetChildMappedSlideIndex(d,a),0>e))continue;this.updateChildSlider(c,e,b)}}},updateControls:function(a,b,c){this.updateNavigations(a);this.updateSlideCounters(a,b);this.updateRangeControls(a,c);this.updateChildSliders(a,c)},updateButtons:function(){this.updatePrevNextButtons();this.updateAutoplayButtons()},updatePrevNextButtons:function(){var a=this.isDirectionNormal(),b={prev:1,next:1},c;for(c in b)if(b="prev"==c?"next":"prev",c in this.buttons)for(var d=
this.buttons[c],e=0;e<d.length;e++){var f=d[e],g=this.getTransSettings("prev_next_button",{dir:a?c:b},f.settings.trans);Dottoro.AddRemoveCSSClass(f.button,!this.isCommandEnabled(g),"disabled")}},doPrevNextButtonAutoplay:function(a){var b={indicator:"prevnext"};b.autoplay_profile=a;b.dir=this.prevnext.realType;this.prevnext.autoplay=this.DoCommand(b)},clearPrevNextButtonDelayTimer:function(){this.prevnext&&this.prevnext.delayTimer&&(clearTimeout(this.prevnext.delayTimer),delete this.prevnext.delayTimer)},
doPrevNextButtonCommand:function(a){this.clearPrevNextButtonDelayTimer();if(a){var b=this;this.prevnext.delayTimer=setTimeout(function(){b.doPrevNextButtonCommand()},a)}else a=Dottoro._getData(this.prevnext.button,"slider/data").settings,a=this.getTransSettings("prev_next_button",{dir:this.prevnext.realType},a.trans),a.indicator="prevnext",this.DoCommand(a)},onMouseDownPrevNextButton:function(a,b,c){this.prevnext&&(Dottoro.RemoveListener(this.prevnext.listeners),this.prevnext.ieCapture&&this.prevnext.button.releaseCapture(),
this.prevnext.autoplay&&this.StopCurrentCommand("any"),delete this.prevnext);var d=this.isDirectionNormal();this.prevnext={button:b,type:c,realType:d?c:"prev"==c?"next":"prev",listeners:[]};b.addEventListener?this.prevnext.listeners.push(Dottoro.AddListener("mouseup",[this,"onMouseUpPrevNextButton"],b,Dottoro.CAPTURE_WINDOW)):b.setCapture&&(b.setCapture(),this.prevnext.ieCapture=!0,this.prevnext.listeners.push(Dottoro.AddListener("mouseup",[this,"onMouseUpPrevNextButton"],b)),this.prevnext.listeners.push(Dottoro.AddListener("losecapture",
[this,"onLoseCapturePrevNextButton"],b)));this.createCaptureOverlap();b=Dottoro._getData(b,"slider/data");(b="autoplay_profile"in b.settings?b.settings.autoplay_profile:this.settings.prev_next_button.autoplay_profile)?this.doPrevNextButtonAutoplay(b):this.doPrevNextButtonCommand();Dottoro.PreventDefault(a);this.settings.key_navigation.enabled&&this.wrapper.focus()},onMouseUpPrevNextButton:function(){this.endCapturePrevNextButton()},onLoseCapturePrevNextButton:function(){this.endCapturePrevNextButton()},
endCapturePrevNextButton:function(){Dottoro.RemoveListener(this.prevnext.listeners);this.prevnext.ieCapture&&this.prevnext.button.releaseCapture();this.clearPrevNextButtonDelayTimer();this.removeCaptureOverlap();this.prevnext.autoplay&&this.command&&"prevnext"==this.command.indicator&&(this.restoreAutoplay(),this.IsAutoplayEnabled()&&this.toggleAutoplayState(!1),this.StopCurrentCommand("infinite"));delete this.prevnext},restoreAutoplay:function(){if(this.command&&this.command.autoplayProfile&&this.command.origAutoplay&&
this.command.restore_autoplay){var a=this.command.origAutoplay,b=this.command.restore_exclude||"",c={},d=null;Dottoro.IsString(b)?d=Dottoro.Split(b):Dottoro.IsObject(b)&&(Dottoro.IsArray(b)?d=b:c=b);if(d)for(b=0;b<d.length;b++){var e=d[b];c[e]=1}"enabled"in a&&this.EnableAutoplay(a.enabled);if(a.command){for(e in c)e in this.autoplay.command?a.command[e]=this.autoplay.command[e]:delete a.command[e];this.autoplay.command=a.command}}},updateAutoplayButtons:function(){var a=[],b={play:1,pause:1,play_pause:1},
c;for(c in b)if(this.buttons[c])for(b=0;b<this.buttons[c].length;b++)a.push(this.buttons[c][b]);if(a.length)for(c=this.isCommandEnabled(this.autoplay.command),b=0;b<a.length;b++)Dottoro.AddRemoveCSSClass(a[b].button,!c,"disabled")},onToggleAutoplayState:function(a,b){Dottoro.HasCSSClass(b,"disabled")||this.toggleAutoplayState(!this.IsAutoplayEnabled())},onEnableAutoplay:function(a,b){Dottoro.HasCSSClass(b,"disabled")||this.IsAutoplayEnabled()||this.toggleAutoplayState(!0)},onDisableAutoplay:function(a,
b){Dottoro.HasCSSClass(b,"disabled")||this.IsAutoplayEnabled()&&this.toggleAutoplayState(!1)},toggleAutoplayState:function(a){this.hidePreloader(!0);this.EnableAutoplay(a);this.autoplay.command.invokeTime=Dottoro.Now();this.command?this.command.is_autoplay&&(this.command.disabled=!this.IsAutoplayEnabled(),this.IsAutoplayEnabled()?this.Continue():this.Pause({type:"hard"==this.settings.pause_type?"hard":"soft"})):this.IsAutoplayEnabled()&&this.DoAutoplay(!1)},ignorePause:function(){if(!this.pauseIgnored){this.pauseIgnored=
!0;var a=this;setTimeout(function(){a.pauseIgnored=!1},0)}},isPauseIgnored:function(){return this.pauseIgnored},pauseOnOver:function(a){for(var b=this.hoverListeners.length-1;0<=b;b--){var c=this.hoverListeners[b];if(Dottoro.IsAncestorOf(c.elem,a))return;Dottoro.IsAncestorOf(a,c.elem)&&(Dottoro.RemoveListener(c.enter),Dottoro.RemoveListener(c.leave),this.hoverListeners.splice(b,1))}c={elem:a};c.enter=Dottoro.AddListener("mouseenter",[this,"onPause"],a);c.leave=Dottoro.AddListener("mouseleave",[this,
"onContinue"],a);this.hoverListeners.push(c)},onPause:function(a){this.isPauseIgnored()||this.Pause({type:"soft"==this.settings.pause_type?"soft":"hard"})},onContinue:function(){this.Continue()},IsCommandPausable:function(a){var b=!0;this.command&&this.command==a&&(b=this.command.timerId||!this.anim||this.command.cancelable);return b&&a&&a.parent?a.parent.control.IsCommandPausable(a.parent.command):b},PauseCommand:function(a,b){b=Dottoro.Extend({type:"soft",bubble:!0},b);a&&!this.duringPause&&(this.duringPause=
!0,this.command==a&&this.Pause({type:b.type,bubble:!1}),b.bubble&&this.PauseAllRelatedCommands(a),this.duringPause=!1)},ContinueCommand:function(a){a&&!this.duringContinue&&(this.duringContinue=!0,this.command==a&&this.Continue({bubble:!1}),this.ContinueAllRelatedCommands(a),this.duringContinue=!1)},PauseAllRelatedCommands:function(a,b){if(a){b=Dottoro.Extend({type:"hard",bubble:!0},b);for(var c in a.related_commands)for(var d in a.related_commands[c]){var e=a.related_commands[c][d];e.sync&&e.control.PauseCommand(e.command,
b)}a.child&&a.child.control.PauseCommand(a.child.command,b);a.parent&&a.parent.control.PauseCommand(a.parent.command,b)}},ContinueAllRelatedCommands:function(a){if(a){for(var b in a.related_commands)for(var c in a.related_commands[b]){var d=a.related_commands[b][c];d.sync&&d.control.ContinueCommand(d.command)}a.child&&a.child.control.ContinueCommand(a.child.command);a.parent&&a.parent.control.ContinueCommand(a.parent.command)}},Pause:function(a){a=Dottoro.Extend({type:"soft",bubble:!0},a);if(!this.prevnext&&
!this.keynav&&(this.playing.paused=Dottoro.Now(),this.command)){var b=!1;this.command.timerId?b=Dottoro.Timer.Pause(this.command.timerId):(this.hidePreloader(!1),("hard"==a.type||0>this.command.anim_duration)&&this.IsCommandPausable(this.command)&&(b=this.anim&&this.anim.Pause(),a.bubble&&this.PauseAllRelatedCommands(this.command,a)));b&&this.playStateChanged("paused")}},Continue:function(a){a=Dottoro.Extend({bubble:!0},a);if(this.playing.paused)if(this.playing.paused=0,!this.command)this.doQueueCommand();
else if(!this.command.disabled){this.semiCommand&&this.showPreloader(1);var b=this.command.timerId?Dottoro.Timer.Restart(this.command.timerId):this.anim&&this.anim.Restart();a.bubble&&this.ContinueAllRelatedCommands(this.command);b&&this.playStateChanged("playing")}},playStateChanged:function(a,b){var c=this.playing.state!=a;if(c||b){var d={playing:1,paused:1,stopped:1},e=[a],f=[],g;for(g in d)g!=a&&f.push(g);this.modifySliderCssClass(e,f);c&&(this.playing.state=a,this.FireEvent("playstatechanged",
this.playing.state))}},updateProgresses:function(a){0>a&&(a=0);if(0<this.progresses.length)for(var b=0;b<this.progresses.length;b++)this.progresses[b].style.width=a+"%"},setNavigationWrapperWidth:function(a){var b=a.wrapper;if(Dottoro.HasCSSClass(b,"js-scale-down-to-fit")&&(Dottoro.RestoreStyle(this.settings.profile,b,"width"),0<a.items.length)){var c=a.items[0];a=a.items[a.items.length-1];var d=c.offsetLeft,c=d+c.offsetWidth,e=a.offsetLeft;a=Math.max(Math.abs(e+a.offsetWidth-d),Math.abs(c-e));d=
b.offsetWidth;c=Dottoro.GetPixelLength(b,"borderLeftWidth")+Dottoro.GetPixelLength(b,"borderRightWidth");e=Dottoro.GetPixelLength(b,"paddingLeft")+Dottoro.GetPixelLength(b,"paddingRight");a>d-(c+e)&&Dottoro.SetStyle(this.settings.profile,b,"width",a+"px")}},setNavigationWrappersWidth:function(){for(var a=0;a<this.navigations.length;a++)this.setNavigationWrapperWidth(this.navigations[a])},onWinResize:function(a){this.setNavigationWrappersWidth();this.cssExOwner||this.cssEx.Update()},contentSizeChanged:function(){this.cssExOwner?
this.notifyParentSection("contentsizechanged"):this.cssEx.Update()},notify:function(a,b,c,d){var e=c?c.slides:this.slides;d=Dottoro.Extend({setCSS:!0,sendEvent:!0},d);if(e=0<=a?e[a]:null)if(d.setCSS&&this.setSlideStateCssClass(e,b),d.sendEvent){d=!1;var f=b;if("beforeshow_inner"==b||"aftershow_inner"==b||"beforehide_inner"==b||"afterhide_inner"==b)d=!0,f=b.substr(0,b.length-6);if("beforeshow"==f||"aftershow"==f||"beforehide"==f||"afterhide"==f){var g=d?"inner":"outer";e.sendAfterShow?e.sendAfterShow[g]=
!1:e.sendAfterShow={};if("aftershow"==f&&!this.isMediasLoaded(a,c)){e.sendAfterShow[g]=!0;this.preloadMedias(a,c);return}var h={beforeshow:"showing",aftershow:"visible",beforehide:"hiding",afterhide:"hidden"};e.visibleState=e.visibleState||{};if(e.visibleState[g]==h[f])return;if("aftershow"==f&&"showing"!=e.visibleState[g]||"afterhide"==f&&"hiding"!=e.visibleState[g]){var k="before"+b.substr(5);this.sendEvent(a,k,c,d)}e.visibleState[g]=h[f]}this.sendEvent(a,b,c,d)}},setSlideStateCssClass:function(a,
b){if(a.box)switch(b){case "beforeactivate":case "afteractivate":Dottoro.ModifyCSSClass(a.box,"active",["inactive"]);break;case "beforeinactivate":case "afterinactivate":Dottoro.ModifyCSSClass(a.box,"inactive",["active"]);break;case "beforeshow":Dottoro.ModifyCSSClass(a.box,["visible","state-showing"],["hidden","state-visible","state-hidden","state-hiding"]);break;case "aftershow":Dottoro.ModifyCSSClass(a.box,["visible","state-visible"],["hidden","state-showing","state-hidden","state-hiding"]);break;
case "beforehide":Dottoro.ModifyCSSClass(a.box,["visible","state-hiding"],["hidden","state-showing","state-visible","state-hidden"]);break;case "afterhide":Dottoro.ModifyCSSClass(a.box,["hidden","state-hidden"],["visible","state-showing","state-visible","state-hiding"])}},sendEvent:function(a,b,c,d){var e=(c?c.slides:this.slides)[a];c||this.FireEvent(b,{elem:e.box,slideIdx:a,inner:d});this.connectPhaseFinished?e.obj.FireEvent(b,{inner:d}):this.notificationQueue.push({slide:e,eventName:b})},start:function(){this.connectPhaseFinished=
!0;for(var a=0;a<this.notificationQueue.length;a++){var b=this.notificationQueue[a];b.slide.obj.FireEvent(b.eventName)}this.notificationQueue=[];this.settings.profile_anim=this.settings.profile+"_anim";this.playStateChanged("stopped",!0);this.initAutoplay();this.cssExOwner||this.cssEx.Build();if(!this.IsChildSlider()&&this.cssExOwner&&this.cssExOwner.GetDialArgs&&(a=this.cssExOwner.GetDialArgs())&&Dottoro.IsObject(a)){var b=this.settings.api_prefix,c;for(c in a)if("api_prefix"!=c&&(!b||0==c.indexOf(b))){var d=
b?c.substr(b.length):c;this.SetSetting(d,a[c])}}this.eventHandlers.push(Dottoro.AddListener("resize",[this,"onWinResize"],window,{priority:8}));this.wrapper.tabIndex=-1;this.eventHandlers.push(Dottoro.AddListener("keydown",[this,"onKeyDown"],this.wrapper));this.eventHandlers.push(Dottoro.AddListener("keyup",[this,"onKeyUp"],this.wrapper));c=this.settings.drag.device;if("all"==c||"mouse"==c)this.slidesOuterWrapper.addEventListener?this.eventHandlers.push(Dottoro.AddListener("mousedown",[this,"onMouseDown"],
this.slidesOuterWrapper,Dottoro.CAPTURE_ELEM)):this.slidesOuterWrapper.setCapture&&this.eventHandlers.push(Dottoro.AddListener("mousedown",[this,"onMouseDown"],this.slidesOuterWrapper));("all"==c||"touch"==c)&&Dottoro.SupportTouch()&&this.eventHandlers.push(Dottoro.AddListener("touchstart",[this,"onTouchStart"],this.slidesOuterWrapper));this.settings.pause_on_over&&this.pauseOnOver(this.wrapper);this.settings.slide.pause_on_over&&this.pauseOnOver(this.slidesOuterWrapper);this.initSlides();c=this.validateSlideIdx(this.settings.active_idx);
this.finalizeStart(c);this.initialized=!0},finalizeStart:function(a){this.setNavigationWrappersWidth();this.modifySliderCssClass("initialized");this.addRemoveSliderCssClass(this.IsAutoplayEnabled(),"autoplay_enabled");this.IsChildSlider()||(this.setActiveSlide(a,{init:!0,skipParentCommand:!0}),this.cssExOwner||this.cssEx.Update())},doStartCommand:function(a){this.setActiveSlide(a.value,{start:!0,skipParentCommand:!0});this.startCommandPostPhase(a);this.cssExOwner||this.cssEx.Update();this.commandFinished()},
startCommandPostPhase:function(a){},startSlideReady:function(){this.activeIdx=this.getActiveSlideIdx();this.slideChangeFinished()},slideChangeFinished:function(){this.updateButtons();this.updateProgresses(0);this.commandFinished()},initAutoplay:function(){if(!this.autoplay.command){var a=this.getTransSettings("autoplay",{});a.is_autoplay=!0;a.invokeTime=Dottoro.Now();this.autoplay.command=a}},EnableAutoplay:function(a){this.settings.autoplay.enabled=a;this.addRemoveSliderCssClass(a,"autoplay_enabled")},
IsAutoplayEnabled:function(){return this.settings.autoplay.enabled},DoAutoplay:function(a){if(this.IsAutoplayEnabled()&&!(this.playing.paused&&this.autoplay.command.invokeTime<this.playing.paused)){var b=this.autoplay.command.delay;if(a){a=this.getActiveSlide();var c=a.datas&&"autoplay"in a.datas?a.datas.autoplay:"auto";if("disabled"==c||"auto"==c&&Dottoro.Medias.HasMedia(a.box))return;b=this.getSlideAutoplayDelay(a,b)}this.DoCommand(this.autoplay.command,b)}},getSlideAutoplayDelay:function(a,b){return b},
normalizeAlign:function(a){return"left"==a||"top"==a?"left_or_top":"right"==a||"bottom"==a?"right_or_bottom":a},updateCommandReferences:function(a,b){if(a&&(a.child&&a.child.command&&(a.child.command.parent={control:this,command:a}),a.parent&&a.parent.command&&(a.parent.command.child={control:this,command:a}),a.source&&a.source.command)){var c="";if(this.IsChildSlider()&&a.source.control==this.parentSlider.control)c=this.parentSlider.attachId;else for(var d in this.childSliders)if(a.source.control==
this.childSliders[d].control){c="parent";break}c&&(d=a.source.command.related_commands,d.slider=d.slider||{},d.slider[c]={control:this,command:a,sync:b})}},copyCommandReferences:function(a,b){var c={parent:1,child:1,source:1},d;for(d in c)b[d]=a[d]},cloneCommand:function(a,b){var c=Dottoro.Clone(a,!0);if(!b){var d={parent:1,child:1,source:1,related_commands:1},e;for(e in d)e in c&&delete c[e]}return c},fillDefCommandValues:function(a,b,c){a=this.cloneCommand(a,!0);b&&Dottoro.Extend(a,b);"invokeTime"in
a||(a.invokeTime=Dottoro.Now());c=c||{};b=a.autoplay_profile?a.autoplay_profile:"";a.dir||(b="");b&&("default"!=b&&b in this.settings.autoplay.trans_profiles&&Dottoro.Extend(a,this.settings.autoplay.trans_profiles[b],{override:!1,deep:!1}),c.autoplayCommand=this.cloneCommand(a));var d=a.is_autoplay||b,e=this.getTransSettings(d?"autoplay":a.dir?"relative":"absolute",!0);c.defTrans=e;b&&Dottoro.Extend(a,this.autoplay.command,{override:!1,deep:!1});a.autoplayProfile=b;a.enable_autoplay="enable_autoplay"in
a?a.enable_autoplay:e.enable_autoplay;a.value="value"in a?a.value:e.value;a.unit=a.unit||e.unit;a.dir=a.dir||"";a.anim_easing="anim_easing"in a?a.anim_easing:e.anim_easing;a.anim_type="anim_type"in a?a.anim_type:e.anim_type;a.anim_duration="anim_duration"in a?a.anim_duration:e.anim_duration;a.end_action="end_action"in a?a.end_action:e.end_action;d||(0>a.anim_duration&&(a.anim_duration=500),"turn_back"==a.end_action&&(a.end_action="rewind"));a.autoplayProfile&&(a.enable_autoplay="enable");a.cancelable=
0>a.anim_duration;a.async="async"in a?a.async:e.async;a.related_commands={};return a},isCommandEnabled:function(a){return!0},getCommandData:function(a){return{}},DoCommand:function(a,b,c){var d={};if(!a&&(this.IsChildSlider()||0<=this.activeIdx))return d.invalid=!0,d;var e=this.IsChildSlider()&&0>this.activeIdx&&a.source&&a.source.control==this.parentSlider.control,f=a,g=null;a&&(g={},a=this.fillDefCommandValues(a,c,g),g=g.autoplayCommand);(c=0>this.activeIdx&&a&&!e)||(c=a&&!a.skipPause&&this.playing.paused&&
a.invokeTime<this.playing.paused);c||(c=!this.CommandCanBeStopped(this.command));this.FireEvent("docommand",{command:a,origCommand:f,origin:e||!f?"init":f.is_autoplay?"autoplay":"user",addToQueue:c});if(c)return f&&f.is_autoplay||(a=this.cloneCommand(f,!0),this.updateCommandReferences(a,!1),this.queue={command:a,delay:b}),d.queue=!0,d;c=this.getCommandData(a);if(!c.enabled){var h=this.GetTurnBackDir(a);h&&(f.is_autoplay?this.autoplay.command.dir=h:g&&(g.dir=h),a.dir=h,c=this.getCommandData(a))}if(!c.enabled)return d.disabled=
!0,d;(h=c.visRangeOuter||c.visRange)&&this.preloadRangeMedias(h);if(0>this.activeIdx&&!e)return this.startSlideReady(),d.start=!0,d;this.commandDuringProcess=a;this.StopCurrentCommand();this.commandDuringProcess=null;this.hidePreloader(!0);if(!b&&!e&&c.visRange&&!this.isRangeMediasLoaded(c.visRange))return this.showPreloader(400,a,c.visRange),d.preload=!0,d;a&&(this.updateCommandReferences(a,!!f.anim_duration),f.is_autoplay||e||"no_change"==a.enable_autoplay&&!a.autoplayProfile||(h={},"no_change"!=
a.enable_autoplay&&(h.enabled=this.settings.autoplay.enabled,this.EnableAutoplay("enable"==a.enable_autoplay)),a.autoplayProfile&&(h.command=this.cloneCommand(this.autoplay.command),Dottoro.Extend(this.autoplay.command,g)),this.autoplay.command.invokeTime=Dottoro.Now(),a.origAutoplay=h,this.autoplay.command.origAutoplay=h));this.command=a;if(e)return this.lastTrans={command:a,data:c,origCommand:f},this.doStartCommand(a),d.start=!0,d;a.is_autoplay&&this.playStateChanged("playing");if(b)return this.command.timerId=
Dottoro.Timer.Add([this,"onWaitForTrans"],{duration:b}),d.delay=b,d;this.lastTrans={command:a,data:c,origCommand:f};this.doSlideChange(a,c);return d},GetTurnBackDir:function(a){if(!this.isCircular()&&a&&"turn_back"==a.end_action){var b={left:"right",right:"left",up:"down",down:"up"};if(a.dir&&a.dir in b)return b[a.dir]}return""},CommandCanBeStopped:function(a,b){b=b||"cancelable";var c=!0;this.command&&this.command==a&&this.anim&&("cancelable"==b&&!this.command.cancelable||"infinite"==b&&0<=this.command.anim_duration)&&
(c=!1);return c&&a&&a.parent?a.parent.control.CommandCanBeStopped(a.parent.command,b):c},StopAllRelatedCommands:function(a,b){for(var c in a.related_commands)for(var d in a.related_commands[c]){var e=a.related_commands[c][d];e.sync&&e.control.StopCommand(e.command,b)}a.child&&a.child.control.StopCommand(a.child.command,b);a.parent&&a.parent.control.StopCommand(a.parent.command,b)},StopCommand:function(a,b){!a||this.stoppedCommand&&this.stoppedCommand==a||(this.command==a?this.StopCurrentCommand(b):
(this.semiCommand==a&&this.hidePreloader(!0),this.queue&&this.queue.command==a&&(this.queue=null),this.StopAllRelatedCommands(a,b)))},StopCurrentCommand:function(a,b){this.queue=null;if(this.command){var c=this.command;a=a||"cancelable";if(this.CommandCanBeStopped(c,a)){b=null==b?!0:b;var d=this.IsAutoplayEnabled();d&&this.EnableAutoplay(!1);var e=c.is_autoplay,f=!1;Dottoro.Timer.Remove(c.timerId,!0)?(c.timerId=null,f=!0):this.anim&&("any"==a||"cancelable"==a&&c.cancelable||"infinite"==a&&0>c.anim_duration)&&
(this.anim.Stop(!1,!0),this.anim=null,f=!0);f&&(this.command=null,e&&this.playStateChanged("stopped"));d&&this.EnableAutoplay(!0);!this.command&&b&&(this.stoppedCommand=c,this.StopAllRelatedCommands(c,a),delete this.stoppedCommand)}}},onWaitForTrans:function(a){0>a?(delete this.command.timerId,this.DoCommand(this.command)):this.command.is_autoplay&&this.updateProgresses(100*a)},commandFinished:function(){this.command&&this.command.is_autoplay&&this.playStateChanged("stopped");this.command=null;this.doQueueCommand()},
doQueueCommand:function(){if(this.queue){var a=this.queue;this.queue=null;this.DoCommand(a.command,a.delay)}else this.keynav&&(this.keynav.lastCommandFinished=Dottoro.Now()),this.commandDuringProcess||(a=this.settings.prev_next_button.repeat_delay,this.prevnext&&!this.prevnext.autoplay&&0<=a?this.doPrevNextButtonCommand(a):this.DoAutoplay(!0))},initSlideMedias:function(a){a.mediasInitialized||Dottoro.Medias.SetHiddenSrcToSrc(a.box);var b=[];if(a.datas&&a.datas.bg_image){var c=a.datas.bg_image;c&&
b.push(c)}a.mediasInitialized=!0;return b},isMediasLoaded:function(a,b){return(b?b.settings:this.settings).wait_media_load?!!(b?b.slides:this.slides)[a].mediasLoaded:!0},preloadMedias:function(a,b){var c=b?b.slides:this.slides,d=b?b.settings:this.settings;this.initSlideListCommentSlide(a,b);c=c[a];if(!c.mediasInitialized){var e=this.initSlideMedias(c);if(d.wait_media_load){var f=this;c.preload=Dottoro.Medias.Preload(function(){f.onSlideReady(a,b)},c.box,e)}}}});
Dottoro.Slider_Scroller=Dottoro.Slider.extend({init:function(){this._super();this.type="scroller";this.visRangeOuterScale=this.visRangeScale=this.visRangeOuter=this.visRange=this.slidesHolderLen=this.viewBox=this.outerViewBox=null;this.slideBoxes=[];this.slides_per_page=0;this.viewScale=this.extraSpace=this.maxOverscroll=this.scrollLen=this.scrollPos=this.scrollable=this.circular=null;this.laps=this.firstSlideIdx=0;return this},initSettings:function(){this._super();this.SetSettings({wait_media_load:!1,
slide_align:"direction",slide_op_orient_align:"center",overscroll:"none",slides_per_page:0,scale_highlight:{slides_num:0,max_scale:1,min_scale:.7,overlap:1},trans:{slide_align:"auto",active_pos:1,anim_duration_back:500,move_slides:"inward",change_active:"change",min_speed:100},slide:{trans:{change_active:"change"}},auto_align:{enabled:!0,trans:{}}})},Attach:function(){this._super();if(this.slidesHolder){var a=this.isHorizontal();(this.settings.inner_view_flex_height||a&&this.settings.slides_scale_down)&&
Dottoro.ModifyCSSClass(this.slidesInnerWrapper,"js-flex-height")}},PostAttach:function(){this._super();this.initAllCommentSlides();this.hideAllSlides();this.inactivateAllSlides()},initCssEx:function(){this._super();this.cssEx.AddListener("recalc_postphase_end",[this,"onCssExEnd"]);this.cssEx.AddListener("collect_start",[this,"cssExCollectStart"]);this.cssEx.AddListener("collect_end",[this,"cssExCollectEnd"]);for(var a=0;a<this.slides.length;a++){var b=this.slides[a];b.cssEx=b.obj.CreateCssEx()}this.cssEx.AddListener("build_end",
[this,"cssExBuildEnd"]);this.cssEx.AddListener("reset_end",[this,"cssExResetEnd"]);this.cssEx.AddListener("recalc_ie8fix_end",[this,"cssExIe8FixEnd"]);this.cssEx.AddListener("recalc_core_horiz_end",[this,"cssExHorizEnd"]);this.cssEx.AddListener("recalc_core_vert_end",[this,"cssExVertEnd"])},cssExCollectStart:function(a,b,c){Dottoro.IsAncestorOf(c,this.slidesHolder)&&this.removeWrapperInner()},cssExCollectEnd:function(a,b,c){this.restoreWrapperInner()},cssExBuildEnd:function(a,b,c){for(a=0;a<this.slides.length;a++)this.slides[a].cssEx.Build()},
cssExResetEnd:function(a,b,c){for(a=0;a<this.slides.length;a++)this.slides[a].cssEx.Reset()},cssExIe8FixEnd:function(a,b,c){for(a=0;a<this.slides.length;a++)this.slides[a].cssEx.Recalc({ie8fix:!0,core:!1,postPhase:!1})},cssExHorizEnd:function(a,b,c){for(a=0;a<this.slides.length;a++)this.slides[a].cssEx.Recalc({ie8fix:!1,core:!0,core_horiz:!0,core_vert:!1,postPhase:!1})},cssExVertEnd:function(a,b,c){for(a=0;a<this.slides.length;a++)this.slides[a].cssEx.Recalc({ie8fix:!1,core:!0,core_horiz:!1,core_vert:!0,
postPhase:!0})},attachSlideToCssEx:function(a,b){},finalizeStart:function(a){var b=this.isHorizontal(),c=this.getBaseAlign(),d=this.getSlidesOpOrientAlign(),e={horiz:{left_or_top:"left",right_or_bottom:"right",center:"center"},vert:{left_or_top:"top",right_or_bottom:"bottom",center:"center"}};this.modifySliderCssClass("slides-base-align-"+e[b?"horiz":"vert"][c]);b?this.modifySliderCssClass("slides-vert-align-"+e.vert[d]):this.modifySliderCssClass("slides-horiz-align-"+e.horiz[d]);this.IsChildSlider()||
(this.checkSlidesVisibleStates(),this.updateControlsByPos({anim_duration:0}),this.updateButtons());this._super(a)},startCommandPostPhase:function(a){var b=this.getStartAlign(a);this.scrollSlideIntoView(a.value,b,a.active_pos,"always")},startSlideReady:function(){var a=this.getVisibleRange({outer:!0,scale:!0});this.preloadRangeMedias(a);this.checkSlidesVisibleStates();this._super()},addPlacementCssClassToSlide:function(a,b){if(a.box){var c=this.isHorizontal(),d=this.isDirectionNormal();Dottoro.ModifyCSSClass(a.box,
b==d?c?"leftmost-slide":"topmost-slide":c?"rightmost-slide":"bottommost-slide")}},attachToSlides:function(a,b){this._super(a,b);!b&&0<this.slides.length&&(this.addPlacementCssClassToSlide(this.slides[0],!0),this.addPlacementCssClassToSlide(this.slides[this.slides.length-1],!1))},initSlidePostPhase:function(a,b,c,d){this._super(a,b,c,d);b||(b=this.slides[a],d&&(0==a&&this.addPlacementCssClassToSlide(b,!0),a==this.slides.length-1&&this.addPlacementCssClassToSlide(b,!1)),this.settings.inner_view_flex_height?
Dottoro.ModifyCSSClass(b.inner,"js-flex-height"):Dottoro.ModifyCSSClass(b.inner,"js-flex-height-layer"),Dottoro.isIEOlder(9)&&(this.isHorizontal()||Dottoro.ModifyCSSClass(b.inner,"js-ie8-maxwfix")))},getDirection:function(){if(!this.direction&&this.isHorizontal()&&1<this.slides.length){var a=this.slides[0],b=this.slides[this.slides.length-1];a.box&&b.box&&(this.direction=a.box.offsetLeft>b.box.offsetLeft?"reverse":"normal",this.modifySliderCssClass("direction-"+this.direction))}return this._super()},
dragStart:function(){},dragMove:function(a){this.isHorizontal();"startScroll"in this.dragData||(this.dragData.startScroll=this.getScrollPos());this.isCircular()||(a=this.limitScrollby(a));a&&(this.scrollSlidesBy(a),this.checkSlidesPosition(),this.doScaleHighlight(),this.updateControlsByPos({anim_duration:"soft_zero"}),this.checkSlidesVisibleStates(0<a),a=this.getVisibleRange({outer:!0,scale:!0}),this.preloadRangeMedias(a),this.updateSlidesOpOrientAlign())},dragEnd:function(a){if(this.dragData.minMovePerformed){a=
this.isHorizontal();a=0>this.dragData.lastMove?a?"right":"down":a?"left":"up";var b=this.getScrollPos()-this.dragData.startScroll;this.moveSlidesToRealPos(a,b,!0)}},onRangeControlDragStart:function(a,b,c){this._super(a,b,c)},onRangeControlDragEnd:function(a,b,c,d){this._super(a,b,c,d);d&&c in this.rangeControls&&"%"==this.rangeControls[c].control.GetViewSettings().unit&&(a=this.isHorizontal(),this.moveSlidesToRealPos(0<d?a?"right":"down":a?"left":"up",d))},onRangeTrackDown:function(a,b,c){this._super(a,
b,c);this.trackDownScrollPos=this.getScrollPos();this.moveSlidesToRealPosAfter=!1},onRangeTrackUp:function(a,b,c){this._super(a,b,c);c in this.rangeControls&&"%"==this.rangeControls[c].control.GetViewSettings().unit&&(this.anim?this.moveSlidesToRealPosAfter=!0:this.trackUpMoveRealPos())},trackUpMoveRealPos:function(){var a=this.isHorizontal(),b=this.getScrollPos()-this.trackDownScrollPos;this.moveSlidesToRealPos(0>b?a?"right":"down":a?"left":"up",b)},moveSlidesToRealPos:function(a,b,c){if(this.settings.auto_align.enabled){var d=
this.getTransSettings("auto_align",!0);d.dir=a;d.end_action="stop";if("view_slide_boundary"==d.unit||"%"==d.unit||"px"==d.unit)d.unit="slide";var e=d.change_active;a=!1;"slide"==d.unit&&"change"==e&&(d.change_active="change_silent");this.isCommandEnabled(d)&&(this.DoCommand(d),a=!0);"change"==e&&!a&&Math.abs(b)>this.eps&&(b=this.determineActiveSlide(d.dir,d.slide_align,d.active_pos),this.setActiveSlide(b,{sourceCommand:!1}));if(!a){if(c&&("slide"==d.unit||"page"==d.unit)){c=this.isDirectionNormal();
a=this.getFirstSlideIdx();e=this.validateSlideIdx(a-1);b=c?a:e;var f=c?e:a;a=this.fillDefCommandValues(d);e={scroll:{dir:d.dir}};"slide"==d.unit?(e.scroll.alignIdx="left"==d.dir||"up"==d.dir?b:f,e.scroll.slide_align=a.slide_align):(b=this.getCurrentPage(!1),e.scroll.alignIdx=b*this.getSlidesPerPage(),e.scroll.slide_align=c?"left_or_top":"right_or_bottom");this.lastTrans={command:a,data:e,origCommand:d}}this.updateButtons();this.updateControlsByPos()}}else c&&(d={unit:"px",value:this.getScrollPos()},
a=this.fillDefCommandValues(d),e=this.getCommandData(a),this.lastTrans={command:a,data:e,origCommand:d})},DoCommand:function(a,b,c){this.moveSlidesToRealPosAfter=!1;return this._super(a,b,c)},commandFinished:function(){this.moveSlidesToRealPosAfter?(this.moveSlidesToRealPosAfter=!1,this.trackUpMoveRealPos()):this._super()},getBaseAlign:function(){return"direction"==this.settings.slide_align?this.isDirectionNormal()?"left_or_top":"right_or_bottom":this.normalizeAlign(this.settings.slide_align)},isCircular:function(){if(null==
this.circular){this.circular=!1;if(this.settings.circular){var a=this.isHorizontal(),b=this.getViewLen(!0),c=this.getScrollLen(!1),d=this.getMinHighlightScale();if(d*c>b){for(var c=this.isDirectionNormal(),e=a?c?"left":"right":c?"top":"bottom",c=a?c?"right":"left":c?"bottom":"top",f=this.getFirstSlideIdx(),g=this.getSlideBox(f,{scale:!1}),e=g[e],g=g[a?"width":"height"],h=Dottoro.Modulo(f+1,this.slides.length);h!=f;){var k=this.getSlideBox(h,{scale:!1}),l=k[c],k=k[a?"width":"height"];k>g&&(g=k);l=
Math.abs(l-e);if(d*(l-g)>=b)break;h=Dottoro.Modulo(h+1,this.slides.length)}this.circular=h!=f}}this.addRemoveSliderCssClass(this.circular,"circular","noncircular")}return this.circular},cacheScrollable:function(){this.isHorizontal()&&this.IsChildSlider()&&Dottoro.RestoreStyle(this.settings.profile,this.slidesInnerWrapper,"width");this.scrollable=!0;if(1<this.slides.length){if(!this.isHighlightScaling()){var a=this.getBaseAlign(),b=this.getOverscrollSetting();if("center"!=a||"none"==b)a=this.getViewLen(),
b=this.getScrollLen(),b<=a&&(this.scrollable=!1)}}else this.scrollable=!1;this.addRemoveSliderCssClass(this.scrollable,"scrollable","unscrollable");this.enableRangeControls(this.scrollable);this.scrollable||(this.restoreScrollPos(),this.isHorizontal()&&this.IsChildSlider()&&(b=this.getScrollLen(),Dottoro.SetStyle(this.settings.profile,this.slidesInnerWrapper,"width",b+"px")))},isScrollable:function(){null==this.scrollable&&this.cacheScrollable();return this.scrollable},isDraggable:function(){return this.isScrollable()},
createSlidesPostPhase:function(){this._super();for(var a=0;a<this.slides.length;a++){var b=this.slides[a];b.cssEx=b.obj.CreateCssEx()}this.recalcSlidesPlacement()},recalcSlidesPlacement:function(a){a=null==a?!0:a;var b=this.isDirectionNormal(),c=this.isHorizontal(),d=this.scrollLen,e=this.viewBox?this.viewBox[c?"width":"height"]:null,f=this.visRange;this.extraSpace=this.maxOverscroll=this.slidesHolderLen=this.viewBox=this.outerViewBox=null;this.clearVisRangeCache();this.circular=null;this.clearSlidesViewScale();
var g={outerViewLen:this.getViewLen(!0),viewLen:this.getViewLen(),clientWin:{width:Dottoro.GetClientWinWidth(),height:Dottoro.GetClientWinHeight()}};if(!(this.lastResize&&this.IsEqual(this.lastResize.outerViewLen,g.outerViewLen)&&this.IsEqual(this.lastResize.viewLen,g.viewLen)&&this.IsEqual(this.lastResize.clientWin.width,g.clientWin.width)&&this.IsEqual(this.lastResize.clientWin.height,g.clientWin.height))){this.lastResize=g;if(a){this.clearVisRangeCache();this.slideBoxes=[];this.scrollLen=null;
a=this.getFirstSlideIdx();g=this.getScrollLaps();if(0!=a||0!=g)this.firstSlideIdx=this.laps=0,this.updateSlidesPos(0,this.slides.length,0);g=this.getScrollLen();a=this.getScrollPos();var h=null;if(f&&-1!=f.first)var h=this.getSlideBox(f.first,{scale:!1}),k=f.firstOver*h[c?"width":"height"],h=this.getRelSlideProp(f.first,b?c?"left":"top":c?"right":"bottom",{scale:!1}),h=h-a+k,h=-1*h;this.isCircular()?(null==h&&(h=d?g/d*a:a),this.setScrollPos(h,!0),this.checkSlidesPosition()):(this.isScrollable()?null==
h&&d&&(h=Dottoro.Modulo(g/d*a,g)-g):h=0,null==h&&(h=0),h&&(c=this.getScrollLimits(),h<c.min||h>c.max)&&(h=(e&&d?Dottoro.Modulo(a,d)<e/2:1)?c.start:c.end),this.setScrollPos(h))}this.cacheScrollable();this.validateScrollPos();this.resetSlidesPerPage();d=this.getScrollPos();if(0>this.activeIdx||!this.lastTrans){if(this.IsChildSlider())return;b=this.getTransSettings("absolute",!0);e=this.getStartAlign(b);this.scrollSlideIntoView(this.getActiveSlideIdx(),e,b.active_pos,"always")}else if(b=!!this.anim,
f=this.lastTrans.command,c=f.unit,a=f.change_active,this.isScrollable())(g=this.lastTrans.data.scroll,e=g.slide_align,"dir"!=e&&"opdir"!=e||!g.dir||(h={left:"right",right:"left",up:"down",down:"up"},e={left:"left",right:"right",up:"top",down:"bottom"}["dir"==e?g.dir:h[g.dir]]),e=this.normalizeAlign(e),"slide"==c&&"change"==a)?(a=this.getActiveSlideIdx(),d=this.scrollSlideIntoView(a,e,f.active_pos,f.move_slides,b)):"alignIdx"in g?(a=g.alignIdx,d=this.scrollSlideIntoView(a,e,1,"always",b)):"no_change"!=
a&&(a=this.getActiveSlideIdx(),this.checkSlidesPosition(),c=this.getVisibleRange({outer:!1,scale:!0}),!this.isInRange(a,c)||this.isSemiInRange(a,c))&&(d=this.scrollSlideIntoView(a,e,f.active_pos,"inward",b));this.checkSlidesPosition();this.doScaleHighlight();this.updateControlsByPos({anim_duration:0});this.updateSlidesOpOrientAlign();this.scaleSlidesView();this.checkSlidesVisibleStates();c=this.getVisibleRange({outer:!0,scale:!0});this.preloadRangeMedias(c);if(0>this.activeIdx)this.DoCommand(null);
else if(this.updateButtons(),this.anim)e=!0,this.isScrollable()&&(e=!1,b=this.anim.GetRanges()[0])&&(g=(c=this.anim.GetLastValues())&&c[0]?c[0].moveBack:!1,f=this.anim.GetLastTime(),a=this.anim.GetDuration(),0>a?(d=this.lastTrans.command.value,c=this.lastTrans.command.unit,c=Math.abs(this.unitToPixel(d,c)),0<c?(d=0>b.by?-1:1,b.by=d*c,delete b.to,delete b.toBack,this.isCircular()||(c=this.getScrollLimits(),b.to=0>d?c.min:c.max,"stop"!=this.lastTrans.command.end_action&&(b.toBack=0>d?c.max:c.min)),
d=this.getScrollPos(),g?"toBack"in b?"durationBack"in b?(d=(d-b.to)/(b.toBack-b.to)*b.durationBack,b.from=b.to,f>d&&(b.from+=b.by*(f-d)/a)):(c=f*b.by/(-1*a),b.from=b.to-(c+(d-b.to))):(b.by*=-1,b.from=d+f*b.by/a):b.from=d+f*b.by/a):e=!0):(c=this.anim.GetEasingTiming(f,b),1!=c&&(b.from=(this.getScrollPos()-c*d)/(1-c)),b.to=d)),e&&this.StopCurrentCommand("any",!1)}},onWinResize:function(a){this.DuringDrag()&&(a=this.GetMousePos(a),this.dragData.pos=a);this._super()},onCssExEnd:function(){this.recalcSlidesPlacement()},
clearVisRangeCache:function(){this.visRangeOuterScale=this.visRangeScale=this.visRangeOuter=this.visRange=null},checkSlidesPosition:function(a){var b={};if(!this.isCircular())return b;var b=this.isDirectionNormal(),c=this.isHorizontal(),d=this.getFirstSlideIdx(),e=this.validateSlideIdx(d-1),f=b?e:d,e=this.getRelSlideProp(b?d:e,c?"left":"top",{outer:!0,scale:!1}),f=this.getRelSlideProp(f,c?"right":"bottom",{outer:!0,scale:!1}),g=(e+f)/2;if(0==g)b={laps:this.getScrollLaps(),idx:d};else{this.getViewLen(!0);
var h=this.getScrollLen(),f=h/2,e=Dottoro.Modulo(g+f,h)-f,g=e-g,h=(b?1:-1)*Math.round(g/h),h=this.getScrollLaps()+h,c=c?"centerX":"centerY",e=0>e?-1:1,c=this.getFirstSlideRelToView(c,c,-1==e?"<":">",{dist:e*f-g,outer:!0,scale:!1}),c=0>c?d:this.validateSlideIdx(b==0>e?c+1:c);b?e*c>e*d&&(h-=e):e*c<e*d&&(h+=e);b={laps:h,idx:c};a||this.setFirstSlideIdx(h,c)}return b},isHighlightScaling:function(){return!!this.settings.scale_highlight.slides_num},getMinHighlightScale:function(){var a=this.settings.scale_highlight;
return a.slides_num?a.min_scale:1},getMaxHighlightScale:function(){var a=this.settings.scale_highlight;return a.slides_num?a.max_scale:1},doScaleHighlight:function(a){a||this.slidesTrafo&&delete this.slidesTrafo;if(this.isHighlightScaling()){var b=this.settings.scale_highlight,c=this.isDirectionNormal(),d=this.isHorizontal(),e=this.getBaseAlign();this.getScrollLen();var f=(d?{center:"centerX",left_or_top:"left",right_or_bottom:"right"}:{center:"centerY",left_or_top:"top",right_or_bottom:"bottom"})[e],
g=this.getFirstSlideIdx(),h=Dottoro.Modulo(g-1,this.slides.length),k={};if(0>b.slides_num){var l=this.getViewLen(),m="center"==e?l/2:l,l=this.getVisibleRange({outer:!0,scale:!1}),p=this;this.iterateRange(l,function(a){var c=Math.abs(p.getRelSlideProp(a,f))/m;1>c&&(k[""+a]=(1-c)*b.max_scale+c*b.min_scale)})}else if(2>this.slides.length)k["0"]=b.max_scale;else{var l={},n={};if("center"==e)e=this.getFirstSlideRelToView(f,f,"<",{scale:!1}),0>e?(e=this.getFirstSlideIdx(),c||(e=this.validateSlideIdx(e-
1)),l={first:e,last:e},n[""+e]=Math.abs(this.getRelSlideProp(e,f))):(l=this.validateSlideIdx(e+(c?1:-1)),n[""+e]=Math.abs(this.getRelSlideProp(e,f)),n[""+l]=Math.abs(this.getRelSlideProp(l,f)),l=n[""+l]<n[""+e]?{first:l,last:l}:{first:e,last:e});else{var l=this.getVisibleRange({outer:!1,scale:!1}),q=null,r=null;if(c==("left_or_top"==e)){if(q=l.first,"both"==l.semi||"first"==l.semi)r=this.validateSlideIdx(q+1)}else if(q=l.last,"both"==l.semi||"last"==l.semi)r=this.validateSlideIdx(q-1);null==r?(l=
{first:q,last:q},n[""+q]=Math.abs(this.getRelSlideProp(q,f))):(n[""+q]=Math.abs(this.getRelSlideProp(q,f)),n[""+r]=Math.abs(this.getRelSlideProp(r,f)),l=n[""+r]<n[""+q]?{first:r,last:r}:{first:q,last:q})}for(e=1;e<b.slides_num+1&&!(q=this.validateSlideIdx(l.first-1),r=this.validateSlideIdx(l.last+1),n[""+q]=""+q in n?n[""+q]:Math.abs(this.getRelSlideProp(q,f)),n[""+r]=""+r in n?n[""+r]:Math.abs(this.getRelSlideProp(r,f)),n[""+r]<n[""+q]?l.last=r:l.first=q,e++,e>=this.slides.length););var t=Math.max(n[""+
l.first],n[""+l.last]);this.iterateRange(l,function(a){var c=n[""+a]/t;1>c&&(k[""+a]=(1-c)*b.max_scale+c*b.min_scale)})}e=0;r=-1;for(l=0;l<this.slides.length;l++){var s=""+l;s in k&&(q=k[s],q>e&&(r=l,e=q))}var u,q=d?"left":"top",l=d?"right":"bottom";u=f;e=this.getFirstSlideRelToView(q,u,"<",{scale:!1});0>e?(e=c?g:h,u=0):(l=this.getRelSlideProp(e,l,{propView:u,scale:!1}),0<=l?(q=-1*this.getRelSlideProp(e,q,{propView:u,scale:!1}),u=q/(q+l)):u=1);var f=d?"width":"height",d=c?-1:1,v={};if(0<=r){var l=
r,x=""+l in k?k[""+l]:b.min_scale;if(l!=g){var l=Dottoro.Modulo(l-1,this.slides.length),z=x,y=0;do{s=""+l;q=s in k?k[s]:b.min_scale;if(q<z)var w=this.getSlideBox(l,{scale:!1}),w=w[f],y=y-d*b.overlap*Math.abs(z-q)*w;v[s]=y;if(l==g)break;z=q;l=Dottoro.Modulo(l-1,this.slides.length)}while(1)}l=r;if(l!=h){l=Dottoro.Modulo(l+1,this.slides.length);r=x;y=0;do{s=""+l;q=s in k?k[s]:b.min_scale;q<r&&(w=this.getSlideBox(l,{scale:!1}),w=w[f],y+=d*b.overlap*Math.abs(r-q)*w);v[s]=y;if(l==h)break;r=q;l=Dottoro.Modulo(l+
1,this.slides.length)}while(1)}}h=[];l=g;r=y=0;x={};z=[];do w=this.getSlideBox(l,{scale:!1}),w=w[f],s=""+l,q=s in k?k[s]:b.min_scale,s=s in v?v[s]:0,x[""+q]||(x[""+q]=1,z.push(q)),w*=d*(1-q),c||(y+=w),l==e&&(r=d*w*u-y),h[l]={scale:q,move:y+s},c&&(y+=w),l=Dottoro.Modulo(l+1,this.slides.length);while(l!=g);z.sort(function(a,b){return a-b});for(c=0;c<z.length;c++)x[""+z[c]]=c+1;for(c=0;c<h.length;c++)h[c].move+=r;c=this.transformSlides(h,x,a);a||(this.slidesTrafo=c);return c}},transformSlides:function(a,
b,c){for(var d=this.isHorizontal(),e=this.getViewScale(),f=[],g=0;g<this.slides.length;g++){var h=a[g].move,k=a[g].scale;c||(Dottoro.SetStyle(this.settings.profile,this.slides[g].box,"trafo",{move:d?{x:h/e,y:0}:{x:0,y:h/e},scale:{x:k,y:k},origin:{x:0,y:0}}),Dottoro.SetStyle(this.settings.profile,this.slides[g].box,"zIndex",b[""+k]));f.push({move:h,scale:k})}return f},getSlidesOpOrientAlign:function(){return this.normalizeAlign(this.settings.slide_op_orient_align)},updateSlidesOpOrientAlign:function(){var a=
this.getSlidesOpOrientAlign();if("left_or_top"!=a){var b=this.isHorizontal();if(!b||this.isHighlightScaling()){var c=this.slidesHolder[b?"offsetHeight":"offsetWidth"],d=this.getVisibleRange({outer:!1,scale:!0}),e=this;this.iterateRange(d,function(d){var g=e.getSlideBox(d,{scale:!1})[b?"height":"width"];b&&(c=g);if(e.slidesTrafo){var h=e.slidesTrafo[d];h&&(g*=h.scale)}Dottoro.SetStyle(e.settings.profile,e.slides[d].box,b?"top":"left",("center"==a?Math.floor((c-g)/2):c-g)+"px")})}}},getViewScale:function(){if(null==
this.viewScale&&(this.viewScale=1,this.settings.slides_scale_down&&Dottoro.HasStoredStyle("cssex_flexheight",this.slidesInnerWrapper,"height"))){for(var a=this.isHorizontal(),b=-1,c=0;c<this.slides.length;c++){var d=this.slides[c].inner;if(d)if(a){var e=d.style.height;d.style.height="auto";var f=d.offsetHeight;f>b&&(b=f);d.style.height=e}else d=d.offsetWidth,d>b&&(b=d)}a=this.slidesHolder[a?"offsetHeight":"offsetWidth"];b>a&&(this.viewScale=a/b)}return this.viewScale},clearSlidesViewScale:function(){null!=
this.viewScale&&(1!=this.viewScale&&(Dottoro.RestoreStyle(this.settings.profile,this.slidesHolder,"trafo"),Dottoro.ModifyCSSClass(this.wrapper,"","slides-scaled-down"),Dottoro.ModifyCSSClass(this.slidesOuterWrapper,"","slides-scaled-down")),this.viewScale=null)},scaleSlidesView:function(){var a=this.getViewScale();1!=a&&(Dottoro.SetStyle(this.settings.profile,this.slidesHolder,"trafo",{scale:{x:a,y:a},origin:{x:0,y:0}}),Dottoro.ModifyCSSClass(this.wrapper,"slides-scaled-down"),Dottoro.ModifyCSSClass(this.slidesOuterWrapper,
"slides-scaled-down"))},eliminateLaps:function(){var a=this.getScrollLaps(),b=this.getFirstSlideIdx();if(0<a||-1>a||-1==a&&0==b){var c=this.isDirectionNormal(),d=this.getScrollLen(),a=(c?1:-1)*a*d;this.setFirstSlideIdx(0,b);this.scrollSlidesBy(a)}},getBorders:function(a){var b={},c={left:"borderLeftWidth",top:"borderTopWidth",right:"borderRightWidth",bottom:"borderBottomWidth"},d;for(d in c)b[d]=Dottoro.GetPixelLength(a,c[d]);return b},getViewBox:function(a){if(null==this.viewBox){var b=this.slidesInnerWrapper==
this.slidesOuterWrapper,c=this.slidesInnerWrapper.offsetWidth,d=this.slidesInnerWrapper.offsetHeight,e=0,f=0,g=this.getBorders(this.slidesInnerWrapper),c=c-(g.left+g.right),d=d-(g.top+g.bottom),h={left:e,top:f,width:c,height:d};if(b)c=h;else var c=this.slidesOuterWrapper.offsetWidth,d=this.slidesOuterWrapper.offsetHeight,e=-1*this.slidesInnerWrapper.offsetLeft,f=-1*this.slidesInnerWrapper.offsetTop,k=this.getBorders(this.slidesOuterWrapper),c=c-(k.left+k.right),d=d-(k.top+k.bottom),e=e+(k.left-g.left),
f=f+(k.top-g.top),c={left:e,top:f,width:c,height:d};b=b?[h]:[h,c];for(d=0;d<b.length;d++)e=b[d],e.right=e.left+e.width,e.bottom=e.top+e.height,e.centerX=e.left+e.width/2,e.centerY=e.top+e.height/2;this.viewBox=h;this.outerViewBox=c}return a?this.outerViewBox:this.viewBox},getViewLen:function(a){a=this.getViewBox(a);var b=this.isHorizontal();return Math.round(a[b?"width":"height"])},getSlidesHolderLen:function(){if(null==this.slidesHolderLen){var a=this.isHorizontal();this.slidesHolderLen=this.slidesHolder[a?
"offsetWidth":"offsetHeight"]}return this.slidesHolderLen},scaleMoveSlideBox:function(a,b,c){if(b&&(b=b[c])){c=this.isHorizontal();if(b.move){c=c?{left:1,right:1,centerX:1}:{top:1,bottom:1,centerY:1};for(var d in c)a[d]+=b.move}if(1!=b.scale){c=a.left;var e=a.top,f=b.scale*a.width;b=b.scale*a.height;b={left:c,top:e,right:c+f,bottom:e+b,width:f,height:b,centerX:c+f/2,centerY:e+b/2};for(d in b)a[d]=b[d]}}},transformSlideBox:function(a,b,c){if(!this.offsetSlides)return b;var d=this.isDirectionNormal(),
e=this.isHorizontal(),f=this.offsetSlides.by;if("firstIdx"in this.offsetSlides){var g=this.getFirstSlideIdx(!0),h=this.offsetSlides.firstIdx,k=this.offsetSlides.scrollLen;g<=a&&a<h?f+=(d?1:-1)*k:g>a&&a>=h&&(f+=(d?-1:1)*k)}var d=e?{left:1,right:1,centerX:1}:{top:1,bottom:1,centerY:1},l;for(l in d)b[l]+=f;c&&this.scaleMoveSlideBox(b,this.offsetSlides.slidesTrafo,a);return b},getSlideBox:function(a,b){b=Dottoro.Extend({scale:!1},b);var c=this.isHorizontal(),d=this.isDirectionNormal(),e=0,f=this.getFirstSlideIdx(!0),
g=this.getScrollLaps();if(f=a<f?g+1:g)e=this.getScrollLen(),e*=(d?1:-1)*f;f=c&&!d;if(!this.slideBoxes[a]){var d=this.slides[a].box,g=d.offsetLeft,h=d.offsetTop,k=d.offsetWidth,d=d.offsetHeight;f&&(g-=this.getSlidesHolderLen());e&&(c?g-=e:h-=e);this.slideBoxes[a]={left:g,top:h,right:g+k,bottom:h+d,width:k,height:d,centerX:g+k/2,centerY:h+d/2}}d=Dottoro.Clone(this.slideBoxes[a],!0);f&&(d.left+=this.getSlidesHolderLen(),d.right=d.left+d.width,d.centerX=d.left+d.width/2);if(e){var c=c?{left:1,right:1,
centerX:1}:{top:1,bottom:1,centerY:1},l;for(l in c)d[l]+=e}c=this.getViewScale();if(1!=c)for(l in d)d[l]*=c;if(this.offsetSlides)return this.transformSlideBox(a,d,b.scale);b.scale&&this.scaleMoveSlideBox(d,this.slidesTrafo,a);return d},resetSlidesPerPage:function(){this.slides_per_page!=this.settings.slides_per_page&&(this.slides_per_page=this.settings.slides_per_page,this.createNavigationButtons(),this.FireEvent("slidesperpagereset"))},getSlidesPerPage:function(){if(!this.slides_per_page)if(this.settings.slides_per_page)this.slides_per_page=
this.settings.slides_per_page;else{var a=this.isHorizontal(),b=this.isDirectionNormal(),c=this.getViewLen(),d=b?a?"left":"top":a?"right":"bottom",a=b?a?"right":"bottom":a?"left":"top",b=this.getMinHighlightScale(),e=this.getSlideBox(0,{scale:!1}),d=e[d],f;for(f=0;f<this.slides.length&&!(e=this.getSlideBox(f,{scale:!1}),b*Math.abs(e[a]-d)>c);f++);this.slides_per_page=f||1}return this.slides_per_page},getPageNum:function(){return Math.floor((this.slides.length-1)/this.getSlidesPerPage())+1},validatePageIdx:function(a,
b){var c=this.getPageNum();return b&&!this.isCircular()?(0>a&&(a=0),a>=c&&(a=c-1),a):Dottoro.Modulo(a,c)},getCurrentPage:function(a,b){b=b||{};b.offsetSlides&&(this.offsetSlides=b.offsetSlides);var c=this.getSlidesPerPage(),d=b.visRange||this.getVisibleRange({outer:!1,scale:!0}),e=Math.floor(d.first/c),f={},g=e+1,h=g*c;if(h<this.slides.length&&this.isInRange(h,d)){var h=this.getPageScrollBy(e),k=this.getPageScrollBy(g);this.isCircular()&&!this.isInRange(e*c,d)&&(this.isDirectionNormal()?h<-1*this.eps&&
(h+=this.getScrollLen()):h>this.eps&&(h-=this.getScrollLen()));f={prevPage:{idx:e,dist:h},nextPage:{idx:g,dist:k}};Math.abs(h)>Math.abs(k)&&(e=g)}b.offsetSlides&&delete this.offsetSlides;return a?(f.page=e,f):e},getPageWidth:function(a){a=this.validatePageIdx(a,!0);var b=this.getSlidesPerPage();a*=b;b=a+b-1;b>=this.slides.length&&(b=this.slides.length-1);var c=this.isDirectionNormal(),d=this.isHorizontal(),e=d?c?"right":"left":c?"bottom":"top",d=this.getRelSlideProp(a,d?c?"left":"right":c?"top":"bottom",
{scale:!1}),e=this.getRelSlideProp(b,e,{scale:!1});if(this.isCircular()){var f=this.getFirstSlideIdx();a<f&&f<=b&&(d+=(c?-1:1)*this.getScrollLen())}return Math.abs(e-d)},scrollToPage:function(a,b){a=this.validatePageIdx(a,!0);var c=a*this.getSlidesPerPage(),d=this.isDirectionNormal();return this.scrollSlideIntoView(c,d?"left_or_top":"right_or_bottom",1,"always",b)},getPageScrollBy:function(a){a=this.validatePageIdx(a,!0);a*=this.getSlidesPerPage();var b=this.isDirectionNormal();return this.getSlideScrollBy(a,
b?"left_or_top":"right_or_bottom")},updateControlsByPos:function(a){function b(){if(null==h){var b={};a.visRange&&(b.visRange=a.visRange);a.offsetSlides&&(b.offsetSlides=a.offsetSlides);h=k.getCurrentPage(!1,b)}return h}a=a||{};var c={"%":{},page:{},view:{}};if("anim_duration"in a)if("soft_zero"==a.anim_duration)c["%"].anim_duration=0;else for(var d in c)c[d].anim_duration=a.anim_duration;if("anim_easing"in a)for(d in c)c[d].anim_easing=a.anim_easing;this.isDirectionNormal();this.isHorizontal();var e=
this.getViewLen(),f=this.getScrollLen(),g="scrollPos"in a?a.scrollPos:this.getScrollPos();d=this.getScrollLimits(!0);g-=d.start;this.isCircular()?(g=Dottoro.Modulo((d.end<d.start?-1:1)*g,f),f=g/f):f=g/(d.end-d.start);var h=null,k=this;if(this.isCircular()){for(var l=0;l<this.navigations.length;l++){var m=this.navigations[l];d=this.getTransSettings("navigation",!0,m.settings.trans);d=d.unit;switch(d){case "page":this.updateNavigation(m,b());break;case "view":var p=Math.round(g/e);this.updateNavigation(m,
p)}}for(var n in this.rangeControls)if(d=this.rangeControls[n].control,!this.command||!this.command.source||this.command.source.control!=d)switch(d=d.GetViewSettings().unit,d){case "%":l=100*f;this.updateRangeControl(n,l,c[d]);break;case "page":this.updateRangeControl(n,b(),c[d]);break;case "view":p=Math.round(g/e),this.updateRangeControl(n,p,c[d])}for(var q in this.childSliders)if(d=this.childSliders[q].control,!this.command||!(this.command.source&&this.command.source.control==d||this.command.child&&
this.command.child.control==d))switch(d=d.GetParentSliderTransUnit(),d){case "page":this.updateChildSlider(q,b(),c[d]);break;case "view":p=Math.round(g/e),this.updateChildSlider(q,p,c[d])}}else{for(l=0;l<this.navigations.length;l++)switch(m=this.navigations[l],d=this.getTransSettings("navigation",!0,m.settings.trans),d=d.unit,d){case "page":this.updateNavigation(m,b());break;case "view":p=Math.round(g/e),this.updateNavigation(m,p)}for(n in this.rangeControls)if(d=this.rangeControls[n].control,!this.command||
!this.command.source||this.command.source.control!=d)switch(d=d.GetViewSettings().unit,d){case "%":l=100*f;this.updateRangeControl(n,l,c[d]);break;case "page":this.updateRangeControl(n,b(),c[d]);break;case "view":p=Math.round(g/e),this.updateRangeControl(n,p,c[d])}for(q in this.childSliders)if(d=this.childSliders[q].control,!this.command||!(this.command.source&&this.command.source.control==d||this.command.child&&this.command.child.control==d))switch(d=d.GetParentSliderTransUnit().unit,d){case "page":this.updateChildSlider(q,
b(),c[d]);break;case "view":p=Math.round(g/e),this.updateChildSlider(q,p,c[d])}}},restoreScrollPos:function(){var a=this.isHorizontal()?"left":"top";Dottoro.RestoreStyle(this.settings.profile,this.slidesHolder,a);this.scrollPos=null},eliminateScrollPosLaps:function(a){var b=this.getScrollLen(),c=b/2;return Dottoro.Modulo(a+c,b)-c},setScrollPos:function(a,b){b&&this.isCircular()&&(a=this.eliminateScrollPosLaps(a));var c=this.isHorizontal()?"left":"top";Dottoro.SetStyle(this.settings.profile,this.slidesHolder,
c,a+"px");this.scrollPos=a;this.clearVisRangeCache()},getScrollPos:function(){null==this.scrollPos&&(this.scrollPos=0);return this.scrollPos},validateScrollPos:function(a){var b=null==a;a=b?this.getScrollPos():a;if(!this.isCircular()){var c=this.getScrollLimits();a=Math.min(Math.max(a,c.min),c.max);b&&a!=this.getScrollPos()&&this.setScrollPos(a)}return a},getScrollLimits:function(a){if(!a&&this.isCircular())return{};a=this.isDirectionNormal();var b=this.isHorizontal(),c=this.getAvailOverscroll(),
d={};d.start=c.start;if(this.isCircular())d.end=d.start-this.getScrollLen();else{var e=this.getScrollLen()-this.getViewLen();d.end=-1*(e+c.end);c=0;c=b?c-Dottoro.GetPixelLength(this.slides[0].box,a?"marginLeft":"marginRight"):c-Dottoro.GetPixelLength(this.slides[0].box,"marginTop");d.start+=c;d.end+=c}a||(d.start*=-1,d.end*=-1);d.min=Math.min(d.start,d.end);d.max=Math.max(d.start,d.end);return d},limitScrollby:function(a){if(this.isCircular())return a;var b=this.getScrollPos();this.offsetSlides&&
(b+=this.offsetSlides.by);var c=this.getScrollLimits();c.min-=b;c.max-=b;return a<c.min?c.min:a>c.max?c.max:a},scrollSlidesBy:function(a){a=this.getScrollPos()+a;this.setScrollPos(a);return a},getSlideScrollBy:function(a,b){var c=this.isHorizontal(),d=0;switch(b){case "left_or_top":d=this.getRelSlideProp(a,c?"left":"top",{scale:!1});break;case "right_or_bottom":d=this.getRelSlideProp(a,c?"right":"bottom",{scale:!1});break;case "center":d=this.getRelSlideProp(a,c?"centerX":"centerY",{scale:!1})}d*=
-1;this.isCircular()||(d=this.limitScrollby(d));return d},scrollSlideIntoView:function(a,b,c,d,e){var f=this.getScrollPos();if(!this.isScrollable())return f;var g=this.isHorizontal(),h=this.isDirectionNormal();if("dir"==b||"opdir"==b){var k=this.getRelSlideProp(a,g?"centerX":"centerY",{scale:!0});b=0>k==("dir"==b)?"left_or_top":"right_or_bottom"}b=this.normalizeAlign(b);if("visible"==d){d=this.getVisibleRange({outer:!1,scale:!0});if(this.isInRange(a,d)&&!this.isSemiInRange(a,d))return f;d="always"}var l=
a,k="left_or_top"==b||"right_or_bottom"==b;1<c&&k&&(l=this.validateSlideIdx(a+("left_or_top"==b==h?-1:1)*(c-1),!0));l=this.getSlideScrollBy(l,b);if("inward"==d&&k&&"left_or_top"==b==0>l&&(d=this.getVisibleRange({outer:!1,scale:!0}),this.isInRange(a,d)&&!this.isSemiInRange(a,d))){var m=1;b=(h=h==("left_or_top"==b))?1:-1;h=d[h?"first":"last"];if("both"==d.semi||"first"==d.semi)h=this.validateSlideIdx(h+b);for(;h!=a;)m++,h=this.validateSlideIdx(h+b);m>=c&&(l=0)}l&&1<c&&k&&(k=this.getRelSlideProp(a,0>
l?g?"left":"top":g?"right":"bottom",{scale:!1}),0>l==0>k+l&&(l=-1*k));if(!l)return f;f+=l;e||this.setScrollPos(f);return f},getRelSlideProp:function(a,b,c){c=Dottoro.Extend({outer:!1,scale:!1},c);var d=c.propView||b;b=c.propSlide||b;a=this.getSlideBox(a,{scale:c.scale});var e=this.getScrollPos();b=a[b]+e;c=this.getViewBox(c.outer);return b-c[d]},getFirstSlideRelToView:function(a,b,c,d){d=Dottoro.Extend({dist:0,outer:!1,scale:!0,minIdx:0,maxIdx:this.slides.length-1,existence:!1},d);var e=d.minIdx,
f=d.maxIdx,g=d.existence,h=d.dist,k="<"==c||"<="==c?-1:1,l="<="==c||">="==c;a==b?h+="<="==c||">"==c?this.eps:-1*this.eps:"right"==a&&"left"==b?h+=this.eps:"left"==a&&"right"==b&&(h-=this.eps);h*=k;c=this.getFirstSlideIdx();var m=k*this.getRelSlideProp(this.validateSlideIdx(e+c),a,{propView:b,outer:d.outer,scale:d.scale}),p=k*this.getRelSlideProp(this.validateSlideIdx(f+c),a,{propView:b,outer:d.outer,scale:d.scale}),n=m>h||l&&m==h,q=p>h||l&&p==h,r=n||q;if(g)return r;if(r){if(n&&q)return this.validateSlideIdx((m<=
p?e:f)+c);for(;e+1<f;){g=Math.floor((e+f)/2);q=k*this.getRelSlideProp(this.validateSlideIdx(g+c),a,{propView:b,outer:d.outer,scale:d.scale});if(l&&q==h)return this.validateSlideIdx(g+c);(r=q>h)&&n||!r&&!n?(m=q,e=g):(p=q,f=g)}return l&&m==h?this.validateSlideIdx(e+c):l&&p==h?this.validateSlideIdx(f+c):this.validateSlideIdx((m>h?e:f)+c)}return-1},getFirstSlideOutOfView:function(a,b){return this.getFirstSlideRelToView(a,a,"left"==a||"top"==a?"<":">",b)},getFirstSlideInsideView:function(a,b,c){return this.getFirstSlideRelToView(a,
a,"left"==a||"top"==a?b?">=":">":b?"<=":"<",c)},getVisibleRange:function(a){a=Dottoro.Extend({outer:!1,scale:!0,cache:!0},a);var b=a.outer?a.scale?"visRangeOuterScale":"visRangeOuter":a.scale?"visRangeScale":"visRange",c=this[b];if(!c||!a.cache){var d=(c=this.isHorizontal())?"left":"top",e=c?"right":"bottom",f="",g=-1,h=-1,k=0,l=0,m=0,p=this.getFirstSlideIdx(),n=Dottoro.Modulo(p-1,this.slides.length),q=this.isDirectionNormal(),r=this.getFirstSlideOutOfView(d,{outer:a.outer,scale:a.scale}),t=this.getFirstSlideOutOfView(e,
{outer:a.outer,scale:a.scale});if(0<=r){var s=this.getRelSlideProp(r,e,{propView:d,outer:a.outer,scale:a.scale});if(0<s){var u=this.getSlideBox(r,{scale:a.scale}),u=1-s/u[c?"width":"height"];q?(f="first",g=r,l=u):(f="last",h=r,m=u)}else q?r!=n&&(g=this.validateSlideIdx(r+1)):r!=p&&(h=this.validateSlideIdx(r-1))}else q?g=p:h=n;0<=t?(d=this.getRelSlideProp(t,d,{propView:e,outer:a.outer,scale:a.scale}),0>d?(u=this.getSlideBox(t,{scale:a.scale}),u=1+d/u[c?"width":"height"],q?(f=f?"both":"last",h=t,m=
u):(f=f?"both":"first",g=t,l=u)):q?t!=p&&(h=this.validateSlideIdx(t-1)):t!=n&&(g=this.validateSlideIdx(t+1))):q?h=n:g=p;0>g&&(h=-1);0>h&&(g=-1);0>g&&0>h&&(k=0<=r?-1:1);c={first:g,last:h,semi:f,firstOver:l,lastOver:m,outOfView:k};a.cache&&(this[b]=c,this.slidesInnerWrapper==this.slidesOuterWrapper&&(this[a.outer?a.scale?"visRangeScale":"visRange":a.scale?"visRangeOuterScale":"visRangeOuter"]=c))}return c},fillDefCommandValues:function(a,b,c){c=c||{};a=this._super(a,b,c);b=c.defTrans;c=this.isHorizontal();
var d=this.isDirectionNormal();if("prev"==a.dir||"next"==a.dir)a.dir=d==("prev"==a.dir)?c?"left":"up":c?"right":"down";a.slide_align="slide_align"in a?a.slide_align:b.slide_align;a.active_pos="active_pos"in a?a.active_pos:b.active_pos;a.move_slides="move_slides"in a?a.move_slides:b.move_slides;a.change_active="change_active"in a?a.change_active:b.change_active;a.min_speed="min_speed"in a?a.min_speed:b.min_speed;a.cancelable=!0;a.anim_duration_back="anim_duration_back"in a?a.anim_duration_back:b.anim_duration_back;
a.dir||"slide"!=a.unit||(a.change_active="change");a.calcActiveInPlay=0>a.anim_duration;return a},makeRelCommandAbsolute:function(a){if("change"==a.change_active&&a.dir&&"slide"==a.unit&&0<=a.anim_duration){var b=this.isDirectionNormal(),c=a.dir,d=a.value,e=a.slide_align,f={left:"right",right:"left",up:"down",down:"up"};if(c in{left:"left",right:"right",up:"top",down:"bottom"}){0>d&&(d*=-1,c=f[c]);var f=this.normalizeActiveSlideAlign(e,c),b=("left"==c||"up"==c?-1:1)*(b?1:-1),g=c=this.getActiveSlideIdx(),
d=Math.round(d),g=g+b*d;this.isCircular()&&(g=this.validateSlideIdx(g));this.isCircular()||"rewind"!=a.end_action||this.validateSlideIdx(g,!0)!=c||(d=this.getFirstSlideIdx(),c=Dottoro.Modulo(d-1,this.slides.length),g=0<b?d:c,f!=e&&(f="left_or_top"==f?"right_or_bottom":"left_or_top"));if(0>g||g>=this.slides.length)return null;a=this.cloneCommand(a,!0);a.value=g;a.slide_align=f;delete a.dir}}return a},isCommandEnabled:function(a){a=this.fillDefCommandValues(a);var b=this.getCommandScrollPos(a),c="left"in
b||"top"in b||"idx"in b;!c&&(b=this.GetTurnBackDir(a))&&(a=this.cloneCommand(a),a.dir=b,b=this.getCommandScrollPos(a),c="left"in b||"top"in b||"idx"in b);return c},getCommandData:function(a){if(!a)return{enabled:!0,visRange:this.getVisibleRange({outer:!1,scale:!0}),visRangeOuter:this.getVisibleRange({outer:!0,scale:!0})};var b=this.getCommandScrollPos(a),c=this.isHorizontal()?"left":"top",c=c in b?c:"";if(!(c||"idx"in b))return{enabled:!1};var d=a.anim_duration,e={};"idx"in b&&(e.idx=b.idx);"alignIdx"in
b&&(e.alignIdx=b.alignIdx);if(c){e[c]={from:this.getScrollPos()};var f={left:"left",top:"up",right:"right",bottom:"down"},g="left"==c?"right":"bottom";if(0>d){var h=0>b[c];e[c].by=b[c];e.dir=f[h?g:c];this.isCircular()||(e[c].to=h?b.min:b.max,e[c].toBack=h?b.max:b.min)}else e[c].to=b[c],e.dir=f[b[c]>e[c].from?c:g]}"slide_align"in b&&(b=b.slide_align,("dir"==b||"opdir"==b)&&e.dir&&0<=d&&(f={left:"right",right:"left",up:"down",down:"up"},b={left:"left",right:"right",up:"top",down:"bottom"}["dir"==b?
e.dir:f[e.dir]]),e.slide_align=b);b={enabled:!0};this.isScrollable()&&0<=d&&(c&&(f=e[c].to,d=f-this.getScrollPos())&&(this.isCircular()?(d=this.getScrollLen(),f=this.eliminateScrollPosLaps(f),this.offsetSlides={by:f-this.getScrollPos()},f=this.checkSlidesPosition(!0),g=this.isDirectionNormal(),this.offsetSlides.by+=(g?1:-1)*d*(f.laps-this.getScrollLaps()),this.offsetSlides.firstIdx=f.idx,this.offsetSlides.scrollLen=d):this.offsetSlides={by:d},this.offsetSlides.slidesTrafo=this.doScaleHighlight(!0)),
b.visRange=this.getVisibleRange({outer:!1,cache:!1,scale:!0}),b.visRangeOuter=this.getVisibleRange({outer:!0,cache:!1,scale:!0}),b.offsetSlides=this.offsetSlides,c&&!a.calcActiveInPlay&&"no_change"!=a.change_active&&"center"==e.slide_align&&(b.centerIdx=this.getCenterSlideIdx()),this.offsetSlides&&delete this.offsetSlides);b.scroll=e;return b},getScrollLaps:function(){return this.laps},getFirstSlideIdx:function(a){return!a&&this.offsetSlides&&"firstIdx"in this.offsetSlides?this.offsetSlides.firstIdx:
this.firstSlideIdx},setFirstSlideIdx:function(a,b){a=null==a?this.getScrollLaps():a;b=null==b?this.getFirstSlideIdx():this.validateSlideIdx(b);var c=this.slides.length,d=this.getScrollLaps()*c+this.getFirstSlideIdx(),e=a*c+b,f=0,g=c;Math.abs(d-e)<c&&(f=Math.min(d,e),g=Math.max(d,e));f!=g&&(this.laps=a,this.firstSlideIdx=b,this.updateSlidesPos(f,g))},getCenterSlideIdx:function(){var a=this.isHorizontal()?"centerX":"centerY",b=this.isDirectionNormal(),c=this.getFirstSlideRelToView(a,a,"<",{scale:!0});
if(0>c)return c=this.getFirstSlideIdx(),b?c:this.validateSlideIdx(c-1);var b=this.validateSlideIdx(c+(b?1:-1)),d=Math.abs(this.getRelSlideProp(c,a,{scale:!0})),a=Math.abs(this.getRelSlideProp(b,a,{scale:!0}));return d<a?c:b},updateSlidesPos:function(a,b,c){if(a!=b){var d=this.isDirectionNormal(),e=this.isHorizontal()?"left":"top",f=this.getFirstSlideIdx(),g=this.getScrollLaps();for(c=null==c?this.getScrollLen():c;a<b;a++){var h=this.validateSlideIdx(a);Dottoro.SetStyle(this.settings.profile,this.slides[h].box,
e,(d?(h<f?g+1:g)*c:-1*(h<f?g+1:g)*c)+"px")}this.clearVisRangeCache()}},getScrollLen:function(a){a=null==a?!0:a;var b=this.scrollLen;if(null==b||!a){var c=this.isDirectionNormal(),d=this.isHorizontal(),e=this.getFirstSlideIdx(),f=Dottoro.Modulo(e-1,this.slides.length),b=this.getSlideBox(e,{scale:!1}),g=this.getSlideBox(f,{scale:!1}),b=(c?g:b)[d?"right":"bottom"]-(c?b:g)[d?"left":"top"];this.isCircular()&&(g=c?e:f,c=c?f:e,b=d?b+(Dottoro.GetPixelLength(this.slides[g].box,"marginLeft")+Dottoro.GetPixelLength(this.slides[c].box,
"marginRight")):b+(Dottoro.GetPixelLength(this.slides[g].box,"marginTop")+Dottoro.GetPixelLength(this.slides[c].box,"marginBottom")));a&&(this.scrollLen=b)}return b},getOverscrollSetting:function(){return this.isHighlightScaling()?"max":this.settings.overscroll},getAvailOverscroll:function(){if(null==this.maxOverscroll){var a={start:0,end:0},b=this.getOverscrollSetting();if(this.isScrollable()&&"none"!=b){this.isCircular()&&(b="max");var c=this.getBaseAlign(),d=this.isDirectionNormal(),e=this.isHorizontal(),
f=this.getFirstSlideIdx(),g=Dottoro.Modulo(f-1,this.slides.length),h=d?f:g,k=d?g:f,l=this.getViewLen();if("min"==b){var m=e?"left":"top",p=e?"right":"bottom",n=e?"centerX":"centerY";switch(c){case "left_or_top":var k=this.getRelSlideProp(k,p),q=this.getFirstSlideRelToView(m,m,">=",{dist:k,scale:!1});0<=q&&(p=this.getRelSlideProp(q,m),a[d?"end":"start"]=p-k);break;case "right_or_bottom":k=this.getRelSlideProp(h,m);q=this.getFirstSlideRelToView(p,p,"<=",{dist:k,scale:!1});0<=q&&(p=this.getRelSlideProp(q,
p),a[d?"start":"end"]=k-p);break;case "center":k=this.getRelSlideProp(k,p),q=this.getFirstSlideRelToView(n,n,">=",{dist:k,scale:!1}),0<=q&&(p=this.getRelSlideProp(q,n),a[d?"end":"start"]=p-k),k=this.getRelSlideProp(h,m),q=this.getFirstSlideRelToView(n,n,"<=",{dist:k,scale:!1}),0<=q&&(p=this.getRelSlideProp(q,n),a[d?"start":"end"]=k-p)}}"max"==b&&(b="center"==c?.5:"left_or_top"==c==d?0:1,c="center"==c?.5:"left_or_top"==c==d?1:0,d=this.getMaxHighlightScale(),b&&(f=this.getSlideBox(f,{scale:!1}),f=l-
d*f[e?"width":"height"],0<f&&(a.start=b*f)),c&&(f=this.getSlideBox(g,{scale:!1}),f=l-d*f[e?"width":"height"],0<f&&(a.end=c*f)))}this.maxOverscroll=a}return this.maxOverscroll},getStartAlign:function(a){a=a.slide_align;"auto"==a&&(a=this.getBaseAlign());if("dir"==a||"opdir"==a)a=this.isDirectionNormal()?"left_or_top":"right_or_bottom";return a},normalizeActiveSlideAlign:function(a,b){if("dir"==a||"opdir"==a)a="dir"==a==("left"==b||"up"==b)?"left_or_top":"right_or_bottom";return a},normalizeSlidesAlign:function(a,
b,c,d){c=!1;var e=a;b="left"==b||"up"==b;if("dir"==a||"opdir"==a)a="dir"==a==b?"left_or_top":"right_or_bottom",c=!0;"auto"==a&&(a=this.getBaseAlign());0>d&&c&&(a=e);a=this.normalizeAlign(a);return{align:a,dirBased:c}},unitToPixel:function(a,b){switch(b){case "view":case "view_slide_boundary":a*=this.getViewLen();break;case "%":var c=this.getScrollLimits(!0);a*=(c.end-c.start)/100;break;case "page":a*=this.getPageWidth(0);break;case "slide":var c=this.isHorizontal(),d=this.getSlideBox(0,{scale:!1});
a*=d[c?"width":"height"]}return a},getCommandScrollPos:function(a){a=this.makeRelCommandAbsolute(a);if(!a)return{};var b=a.value,c=a.unit,d=a.dir,e=a.anim_duration,f=a.active_pos,g=a.move_slides,h=a.slide_align;if(!this.isScrollable())return d||"slide"!=c?{}:{idx:b};var k=this.isHorizontal(),l=this.isDirectionNormal(),m=this.getViewLen();if(!d){if(("dir"==h||"opdir"==h)&&"slide"==c){var p=this.getRelSlideProp(b,k?"centerX":"centerY",{scale:!0});"opdir"==h&&(p*=-1);h=0>p?"left_or_top":"right_or_bottom"}"auto"==
h&&(h=this.getBaseAlign());var h=this.normalizeAlign(h),d={slide_align:h},n=k?"left":"top";switch(c){case "px":d[n]=this.validateScrollPos(b);break;case "page":d[n]=this.scrollToPage(b,!0);break;case "view_slide_boundary":case "view":case "%":g=this.getScrollLimits(!0);"view"==c||"view_slide_boundary"==c?d[n]=this.validateScrollPos(g.start+(g.start<g.end?1:-1)*b*m):(a=b/100,d[n]=this.validateScrollPos(a*g.end+(1-a)*g.start));break;default:d[n]=this.scrollSlideIntoView(b,h,f,g,!0),d.idx=b}this.isCircular()&&
(k=this.getScrollLen(),a=k/2,h=this.getScrollPos(),p=d[n]-h,Math.abs(p)>a-this.eps&&(p=Dottoro.Modulo(p+a,k)-a,Math.abs(p)>a-this.eps&&(l?0<p&&(p-=k):0>p&&(p+=k)),d[n]=p+h));return d}var q={left:"left",right:"right",up:"top",down:"bottom"},r={left:"right",right:"left",up:"down",down:"up"};if(d in q){0>b&&(b*=-1,d=r[d]);var t="left"==d||"right"==d,f="left"==d||"up"==d,n=t?"left":"top",p=f?-1:1,g=p*(l?1:-1),s=q[d],u=q[r[d]],r={},q=this.normalizeSlidesAlign(h,d,c,e),h=q.align,d={slide_align:h};if(0>
e){b=-1*p*this.unitToPixel(b,c);this.isCircular()||(g=this.getScrollLimits(),d.min=g.min,d.max=g.max,h=this.getScrollPos(),(h<d.min||h==d.min&&0>b||h>d.max||h==d.max&&0<b)&&"rewind"!=a.end_action&&(b=0));if(0==b)return d;d[n]=b;return d}if("slide"==c||"view_slide_boundary"==c||"page"==c){b=Math.round(b);if("page"==c){m=-1;c=this.getCurrentPage(!0);0<g?"nextPage"in c?(m=c.nextPage.idx,f==c.nextPage.dist<this.eps&&m++):m=c.page+1:"prevPage"in c?(m=c.prevPage.idx,f==c.prevPage.dist<this.eps&&m--):m=
c.page-1;c=this.getPageNum();if(0>m||m>=c)m=this.isCircular()?this.validatePageIdx(m,!0):-1;0<=m&&1<b&&(m=this.validatePageIdx(m+g*(b-1),!0));0<=m&&(m*=this.getSlidesPerPage());var v=k?l?"left":"right":l?"top":"bottom"}else{k=this.getVisibleRange({outer:!1,scale:!0});m=-1;switch(h){case "left_or_top":v=t?"left":"top";"slide"==c?m=f?this.getFirstSlideOutOfView(s,{scale:!0}):this.getFirstSlideInsideView(u,!1,{scale:!0}):f?(p=l?"first":"last",e=k[p],"both"!=k.semi&&k.semi!=p&&(e+=l?-1:1,this.isCircular()?
e=this.validateSlideIdx(e):e>=this.slides.length&&(e=-1)),0<=e&&(p=this.getRelSlideProp(e,u,{scale:!0}),m=this.getFirstSlideInsideView(s,!0,{dist:p,scale:!0}),this.isCircular()&&(k=this.getFirstSlideIdx(),u=this.validateSlideIdx(k-1),m==(l?k:u)&&(k=this.getScrollLen(),p=this.getFirstSlideInsideView(s,!0,{dist:p+k,scale:!0}),0<=p&&(m=p))))):(m=this.getFirstSlideOutOfView(s,{scale:!0}),0<=m&&0>=this.getRelSlideProp(m,u,{scale:!0})&&(m+=l?1:-1,!this.isCircular()&&m>=this.slides.length&&(m=-1)));break;
case "right_or_bottom":v=t?"right":"bottom";"slide"==c?m=f?this.getFirstSlideInsideView(u,!1,{scale:!0}):this.getFirstSlideOutOfView(s,{scale:!0}):f?(m=this.getFirstSlideOutOfView(s,{scale:!0}),0<=m&&0<=this.getRelSlideProp(m,u,{scale:!0})&&(m+=l?-1:1,!this.isCircular()&&m>=this.slides.length&&(m=-1))):(p=l?"last":"first",e=k[p],"both"!=k.semi&&k.semi!=p&&(e+=l?1:-1,this.isCircular()?e=this.validateSlideIdx(e):e>=this.slides.length&&(e=-1)),0<=e&&(p=this.getRelSlideProp(e,u,{scale:!0}),m=this.getFirstSlideInsideView(s,
!0,{dist:p,scale:!0}),this.isCircular()&&(k=this.getFirstSlideIdx(),u=this.validateSlideIdx(k-1),m==(l?u:k)&&(k=this.getScrollLen(),p=this.getFirstSlideInsideView(s,!0,{dist:p-k,scale:!0}),0<=p&&(m=p)))));break;case "center":if(v=t?"centerX":"centerY","slide"==c)m=this.getFirstSlideRelToView(v,v,-1==p?"<":">",{scale:!0});else if(k=this.getFirstSlideOutOfView(s,{scale:!0}),0<=k)s=this.getRelSlideProp(k,u,{scale:!0}),m=this.getFirstSlideRelToView(v,v,-1==p?">":"<",{dist:s,scale:!0}),0>m?m=k:this.isCircular()&&
(k=this.getFirstSlideIdx(),u=this.validateSlideIdx(k-1),m==(l==f?k:u)&&(k=this.getScrollLen(),p=this.getFirstSlideRelToView(v,v,-1==p?">":"<",{dist:s-p*k,scale:!0}),0<=p&&(m=p)));else if(k=this.getFirstSlideIdx(),u=this.validateSlideIdx(k-1),m=l==f?k:u,p=this.getRelSlideProp(m,v,{scale:!1}),0<p&&f||0>p&&!f)m=-1}0>m&&this.isCircular()&&(k=this.getFirstSlideIdx(),u=Dottoro.Modulo(k-1,this.slides.length),m=0<g?k:u);0<=m&&"slide"==c&&1<b&&(m+=g*(b-1),m=this.validateSlideIdx(m,!0))}0<=m&&(p=this.getRelSlideProp(m,
v,{scale:!1}),r[n]=-1*p,d.alignIdx=m)}else"view"==c&&(b=b*(l?1:-1)*m),"%"==c&&(g=this.getScrollLimits(),b*=(g.start-g.end)/100),r[n]=-1*p*b;n in r&&(b=r[n],this.isCircular()&&(k=this.getScrollLen(),b=Dottoro.Modulo(b,k),f||(b-=k)),b=this.validateScrollPos(this.getScrollPos()+b),this.IsEqual(b,this.getScrollPos())||(d[n]=b));if(n in d)return d;if(!this.isCircular()&&"rewind"==a.end_action)return m=f==l?this.slides.length-1:0,q.dirBased&&(h="left_or_top"==h?"right_or_bottom":"left_or_top",d.slide_align=
h),d[n]=this.scrollSlideIntoView(m,h,0,"always",!0),d.alignIdx=m,d}return{}},determineActiveSlide:function(a,b,c,d,e){d=d||this.getVisibleRange({outer:!1,scale:!0});var f=this.activeIdx;b=this.normalizeActiveSlideAlign(b,a);"auto"==b&&(b=this.getBaseAlign());a=this.isDirectionNormal();switch(b){case "left_or_top":case "right_or_bottom":if(b=a==("left_or_top"==b)){if(f=d.first,"both"==d.semi||"first"==d.semi)e=this.validateSlideIdx(f+1),this.isInRange(e,d)&&!this.isSemiInRange(e,d)&&(f=e)}else if(f=
d.last,"both"==d.semi||"last"==d.semi)e=this.validateSlideIdx(f-1),this.isInRange(e,d)&&!this.isSemiInRange(e,d)&&(f=e);1<c&&(f=this.validateSlideIdx(f+(b?1:-1)*(c-1),!0));break;case "center":if(null==e||0>e)e=this.getCenterSlideIdx();f=e}return f},checkSlidesVisibleStates:function(a){this.checkSlidesVisibleState(!0,a);this.checkSlidesVisibleState(!1,a)},checkSlidesVisibleState:function(a,b){var c=this.isDirectionNormal(),d=a?"checkedVisibleRangeOuter":"checkedVisibleRangeInner",e=this[d],f=this.getVisibleRange({outer:a,
scale:!0}),g=this;e&&this.iterateRange(e,function(b){g.isInRange(b,f)||g.updateSlideState(b,a?"afterhide":"afterhide_inner")});var h=a?"outer":"inner";this.iterateRange(f,function(d){var e=g.slides[d].visibleState&&g.slides[d].visibleState[h]||"hidden";if(g.isSemiInRange(d,f))switch(e){case "visible":g.updateSlideState(d,a?"beforehide":"beforehide_inner");break;case "hidden":g.updateSlideState(d,a?"beforeshow":"beforeshow_inner");break;default:null!=b&&(b==(c==(f.first==d))?g.updateSlideState(d,a?
"beforeshow":"beforeshow_inner"):g.updateSlideState(d,a?"beforehide":"beforehide_inner"))}else"visible"!=e&&g.updateSlideState(d,a?"aftershow":"aftershow_inner")});this[d]=f},doSlideChange:function(a,b){var c=b.scroll,d="left"in c||"top"in c,e=d?"left"in c?"left":"top":"",f=a.anim_easing,g=a.anim_duration;"none"==a.anim_type&&(g=0);var h=a.min_speed/1E3;if(0<h&&e&&g){var k=c[e],k="by"in k?k.by:k.to-k.from;Math.abs(k/g)<h&&(g=(0>g?-1:1)*Math.abs(k/h))}h=!d||!a.calcActiveInPlay&&"no_change"!=a.change_active;
k=this.activeIdx;"idx"in c?k=c.idx:b.visRange&&(h||"no_change"!=a.change_active&&this.WaitForParentControl(a))&&(k=this.determineActiveSlide(c.dir,c.slide_align,a.active_pos,b.visRange,b.centerIdx));if(k!=this.activeIdx){if(this.WaitForParentControl(a)){this.notifyParentActiveSlideChanged(k);return}this.animFromIdx=this.activeIdx;this.animToIdx=k;h&&this.setActiveSlide(this.animToIdx,{duration:g})}this.callbackChildSlider({anim_duration:g,anim_easing:f});h=this.getVisibleRange({outer:!0,scale:!0});
this.pauseRangeMedias(h);h={};d&&(h[e]=Dottoro.Clone(c[e],!0),0>g&&!this.isCircular()&&("rewind"==a.end_action&&(h[e].durationBack=a.anim_duration_back),"stop"==a.end_action&&delete h[e].toBack));h=[{elem:this.slidesHolder,props:h}];this.scrollData=c;this.modifySliderCssClass(["slide-changing",0<=g?"finite-transition":"infinite-transition"]);d&&0<=g&&this.updateControlsByPos({scrollPos:c[e].to,visRange:b.visRange,offsetSlides:b.offsetSlides,anim_duration:g?g:"soft_zero",anim_easing:f});this.anim=
new Dottoro.Anim(h,g,{callback:[this,"slideChanging"],easing:f,start:0,simulate:!0});this.anim.Start()},slideChanging:function(a,b,c,d){d&&(d.length&&(this.setScrollPos(d[0].value,!0),this.checkSlidesPosition(),this.doScaleHighlight(),0>a.GetDuration()&&this.updateControlsByPos({anim_duration:"soft_zero"})),b=this.scrollData.dir,d.length&&d[0].moveBack&&(b={left:"right",right:"left",up:"down",down:"up"}[b]),this.command.calcActiveInPlay&&"no_change"!=this.command.change_active&&(d=this.determineActiveSlide(b,
this.scrollData.slide_align,this.command.active_pos),d!=this.activeIdx&&this.setActiveSlide(d,{start:!0})),this.updateButtons(),this.checkSlidesVisibleStates("left"==b||"up"==b),this.updateSlidesOpOrientAlign(),0>a.GetDuration()&&(a=this.getVisibleRange({outer:!0,scale:!0}),this.preloadRangeMedias(a)));if(0>c)this.onChangeEnd()},onChangeEnd:function(){"animToIdx"in this&&("no_change"!=this.command.change_active&&(this.command.calcActiveInPlay?this.animToIdx!=this.activeIdx&&this.setActiveSlide(this.animToIdx,
{start:!0}):this.updateSlidesState(this.animFromIdx,this.animToIdx,!1,"active")),delete this.animFromIdx,delete this.animToIdx);this.isCircular()&&this.eliminateLaps();this.modifySliderCssClass("",["slide-changing","finite-transition","infinite-transition"]);this.anim=null;this.slideChangeFinished()}});
Dottoro.Slider_Single=Dottoro.Slider.extend({init:function(){this._super();this.type="single";return this},initSettings:function(){this._super();this.SetSettings({fadeie8:!1,slide_align_horizontal:"center",slide_align_vertical:"center",resize_slides_wrapper:"both"})},initCssEx:function(){this._super();this.cssEx.AddListener("recalc_core_start",[this,"preloadStartSlide"])},finalizeStart:function(a){this.hideAllSlides();this.inactivateAllSlides();this.IsChildSlider()||(this.initCommentSlide(a),this.updateSlideState(a,
"aftershow"),this.preloadMedias(a));this._super(a)},initSlidePostPhase:function(a,b,c,d){this._super(a,b,c,d);b||(a=this.slides[a],b=[],this.settings.inner_view_flex_height?b.push("js-flex-height"):b.push("js-flex-height-layer"),this.settings.slides_scale_down&&b.push("js-scale-down-to-fit"),Dottoro.ModifyCSSClass(a.inner,b))},preloadStartSlide:function(){0>this.activeIdx&&this.DoCommand(null)},getSlideAutoplayDelay:function(a,b){return a.datas&&"delay"in a.datas?a.datas.delay:b},fillDefCommandValues:function(a,
b,c){a=this._super(a,b,c);"slide"!=a.unit&&("%"==a.unit&&(a.value=Math.round(this.slides.length*a.value/100)),a.unit="slide");return a},isCommandEnabled:function(a){return!1!==this.getCommandSlideIdx(a)},getCommandData:function(a){var b=this.getActiveSlideIdx();if(!a)return{enabled:!0,visRange:{first:b,last:b}};a=this.getCommandSlideIdx(a);return!1===a||0>a?{enabled:!1}:{enabled:!0,visRange:{first:a,last:a}}},getCommandSlideIdx:function(a){a=this.fillDefCommandValues(a);var b=a.value;a=a.dir;var c=
b;a&&(b*="prev"==a?-1:1,c=this.getActiveSlideIdx()+b);c=this.validateSlideIdx(c,!0);return c==this.getActiveSlideIdx()?!1:c},setActiveSlide:function(a,b){this._super(a,b);this.cssEx.SetChildActive(this.slides[a].box)},dragEnd:function(a){if(this.dragData.minMovePerformed){this.isHorizontal();a=this.isDirectionNormal();var b=0>this.dragData.lastMove,c=this.getTransSettings("drag",{});c.dir=a==b?"next":"prev";this.DoCommand(c)}},getSlidePlacement:function(a){if(a==this.activeIdx){a=this.slides[a];var b=
Dottoro.GetBox(a.box),c=Dottoro.GetBox(a.box,Dottoro.BOX_INNER)}else{var d=this.activeIdx,e=this.slides[d],f=this.slides[a];this.initCommentSlide(a);var g=Dottoro.ActivateBackup(function(a,b,c){if("backup_prop"==a&&Dottoro.IsAncestorOf(f.box,b))return!1});this.updateSlidesState(d,a,!1,"show",{sendEvent:!1});this.updateSlidesState(d,a,!1,"active",{sendEvent:!1});this.activeIdx=a;this.cssEx.SetChildActive(f.box);this.contentSizeChanged();b=Dottoro.GetBox(f.box);c=Dottoro.GetBox(f.box,Dottoro.BOX_INNER);
Dottoro.RestoreBackup(g);this.updateSlidesState(a,d,!1,"show",{sendEvent:!1});this.updateSlidesState(a,d,!1,"active",{sendEvent:!1});this.activeIdx=d;this.cssEx.SetChildActive(e.box)}return{outer:b,inner:c}},needWrapperResize:function(){var a=this.settings.resize_slides_wrapper;return{horiz:"both"==a||"horiz"==a,vert:"both"==a||"vert"==a}},doSlideChange:function(a,b){var c=b.visRange.first;if(this.WaitForParentControl(a))this.notifyParentActiveSlideChanged(c);else{this.animFromIdx=this.activeIdx;
this.animToIdx=c;var c=this.slides[this.animFromIdx],d={outer:Dottoro.GetBox(c.box),inner:Dottoro.GetBox(c.box,Dottoro.BOX_INNER)},e=this.slides[this.animToIdx],f=this.getSlidePlacement(this.animToIdx);this.animFromBox=d;this.animTromBox=f;var g=a.anim_easing,h=a.anim_type,k=a.anim_duration;"datas"in e.box&&("anim_duration"in e.datas&&(k=e.datas.anim_duration),"anim_type"in e.datas&&(h=e.datas.anim_type),"anim_easing"in e.datas&&(g=e.datas.anim_easing));var l=h.split("_"),h=l[0],l=l[1]?l[1]:"random";
"none"==h&&(k=0);this.initCommentSlide(this.animToIdx);this.updateSlidesState(this.animFromIdx,this.animToIdx,!0,"show");this.setActiveSlide(this.animToIdx,{duration:k});this.callbackChildSlider({anim_duration:k,anim_easing:g});this.pauseSlideMedias(this.animFromIdx);this.setSlideAnimStyles(c,d.inner);this.setSlideAnimStyles(e,f.inner);this.cssEx.EnableElem(e.box,!1);var m=[],p=this.needWrapperResize();if(p.horiz||p.vert){var n={};p.horiz&&(n.width={from:d.outer.width,to:f.outer.width});p.vert&&(n.height=
{from:d.outer.height,to:f.outer.height});m.push({elem:this.slidesHolder,props:n})}"frame"==h?(c.box.style.display="none",this.showPreloader(1)):m=m.concat(this.createAnimItems({from:c,to:e,dir:a.dir?a.dir:this.activeIdx<this.animToIdx?"next":"prev",fromSizes:d.outer,fromContentBox:d.inner,toSizes:f.outer,toContentBox:f.inner,type:h,subtype:l,easing:g,fadeIE8:this.settings.fadeie8}));this.modifySliderCssClass(["slide-changing","finite-transition"]);this.anim=new Dottoro.Anim(m,k,{profile:this.settings.profile_anim,
callback:[this,"slideChanging"],start:0});this.anim.Start()}},setSlideAnimStyles:function(a,b){Dottoro.SetStyle(this.settings.profile_anim,a.box,{maxWidth:"none",width:b.width+"px",height:b.height+"px",position:"absolute"});Dottoro.SetStyle(this.settings.profile_anim,a.inner,{position:"absolute",left:"0",top:"0",right:"0",bottom:"0"})},createAnimItems:function(a){var b="clip grow movein moveout moveinout fadein fadeout fadeinout flip fliprotate".split(" "),c=["ltr","ttb","rtl","btt"],d={clip:c,grow:c,
movein:c,moveout:c,moveinout:c,fadein:[],fadeout:[],fadeinout:[],flip:c,fliprotate:c},c=a.from,e=a.to,f=a.dir,g=a.fromSizes,h=a.toSizes,k=a.type,l=a.subtype,m=a.easing;a=a.fadeIE8;k&&"random"!=k&&k in d||(k=b[Math.floor(Math.random()*b.length)]);if("none"!=k&&"clip"!=k&&(!a||"fadein"!=k&&"fadeout"!=k&&"fadeinout"!=k)){var p=Dottoro.GetCssTransformSupport();p||(k="clip")}"random"==l&&d[k].length&&(l=d[k][Math.floor(Math.random()*d[k].length)]);if("horiz"==l||"vert"==l)"auto"==f&&(f=0==this.animFromIdx&&
this.animToIdx==this.slides.length-1?"prev":0==this.animToIdx&&this.animFromIdx==this.slides.length-1?"next":this.animFromIdx<this.animToIdx?"next":"prev"),l="prev"==f?"horiz"==l?"ltr":"ttb":"horiz"==l?"rtl":"btt";b="moveout"==k||"fadeout"==k||"clip"==k;Dottoro.SetStyle(this.settings.profile_anim,c.box,"zIndex",b?"11":"10");Dottoro.SetStyle(this.settings.profile_anim,e.box,"zIndex",b?"10":"11");b=this.settings.slide_align_horizontal;a=this.settings.slide_align_vertical;if("movein"==k||"moveinout"==
k||"moveout"==k){if("ltr"==l||"rtl"==l)b="none";if("ttb"==l||"btt"==l)a="none"}this.setSlideAnimAlign(c.box,g,b,a);this.setSlideAnimAlign(e.box,h,b,a);switch(k){case "clip":switch(l){case "ttb":e={top:{from:"auto",to:-1}};break;case "btt":e={bottom:{from:"auto",to:0}};break;case "ltr":e={left:{from:"auto",to:-1}};break;default:e={right:{from:"auto",to:0}}}if(m)for(var n in e)e[n].easing=m;return[{elem:c.inner,props:{clip:e}}];case "grow":switch(l){case "ttb":p={scaleY:{from:1,to:0},originY:"100%"};
n={scaleY:{from:0,to:1},originY:"0%"};break;case "btt":p={scaleY:{from:1,to:0},originY:"0%"};n={scaleY:{from:0,to:1},originY:"100%"};break;case "ltr":p={scaleX:{from:1,to:0},originX:"100%"};n={scaleX:{from:0,to:1},originX:"0%"};break;default:p={scaleX:{from:1,to:0},originX:"0%"},n={scaleX:{from:0,to:1},originX:"100%"}}m&&(p.scaleX?(p.scaleX.easing=m,n.scaleX.easing=m):(p.scaleY.easing=m,n.scaleY.easing=m));return[{elem:c.inner,props:{trafo:p}},{elem:e.inner,props:{trafo:n}}];case "movein":switch(l){case "ttb":g=
{top:{from:-1*h.height,to:0}};break;case "btt":g={top:{from:g.height,to:0}};break;case "ltr":g={left:{from:-1*h.width,to:0}};break;default:g={left:{from:g.width,to:0}}}if(m)for(p in g)g[p].easing=m;return[{elem:e.box,props:g}];case "moveout":switch(l){case "ttb":n={top:{from:0,to:h.height}};break;case "btt":n={top:{from:0,to:-1*g.height}};break;case "ltr":n={left:{from:0,to:h.width}};break;default:n={left:{from:0,to:-1*g.width}}}if(m)for(p in n)n[p].easing=m;return[{elem:c.box,props:n}];case "moveinout":switch(l){case "ttb":n=
{top:{from:0,to:h.height}};g={top:{from:-1*h.height,to:0}};break;case "btt":n={top:{from:0,to:-1*g.height}};g={top:{from:g.height,to:0}};break;case "ltr":n={left:{from:0,to:h.width}};g={left:{from:-1*h.width,to:0}};break;default:n={left:{from:0,to:-1*g.width}},g={left:{from:g.width,to:0}}}if(m){for(p in n)n[p].easing=m;for(p in g)g[p].easing=m}return[{elem:c.box,props:n},{elem:e.box,props:g}];case "fadein":return[{elem:e.inner,props:{opacity:{from:0,to:1,easing:m}}}];case "fadeout":return[{elem:c.inner,
props:{opacity:{from:1,to:0,easing:m}}}];case "fadeinout":return[{elem:c.inner,props:{opacity:{from:1,to:0,easing:m}}},{elem:e.inner,props:{opacity:{from:0,to:1,easing:m}}}];case "flip":switch(l){case "ltr":case "rtl":p={scaleX:{from:1,to:0,duration:"50%"}};n={scaleX:{from:0,to:1,startTime:"50%"}};break;default:p={scaleY:{from:1,to:0,duration:"50%"}},n={scaleY:{from:0,to:1,startTime:"50%"}}}m&&(p.scaleX?(p.scaleX.easing=m,n.scaleX.easing=m):(p.scaleY.easing=m,n.scaleY.easing=m));return[{elem:c.inner,
props:{trafo:p}},{elem:e.inner,props:{trafo:n}}];case "fliprotate":n=2*Math.PI;switch(l){case "ltr":p={scaleX:{from:1,to:0,duration:"50%"},rotate:{from:0,to:n,duration:"50%"}};n={scaleX:{from:0,to:1,startTime:"50%"},rotate:{from:-1*n,to:0,startTime:"50%"}};break;case "rtl":p={scaleX:{from:1,to:0,duration:"50%"},rotate:{from:0,to:-1*n,duration:"50%"}};n={scaleX:{from:0,to:1,startTime:"50%"},rotate:{from:n,to:0,startTime:"50%"}};break;default:p={scaleY:{from:1,to:0,duration:"50%"},rotate:{from:0,to:n,
duration:"50%"}},n={scaleY:{from:0,to:1,startTime:"50%"},rotate:{from:-1*n,to:0,startTime:"50%"}}}m&&(p.scaleX?(p.scaleX.easing=m,n.scaleX.easing=m):(p.scaleY.easing=m,n.scaleY.easing=m),p.rotate.easing=m,n.rotate.easing=m);return[{elem:c.inner,props:{trafo:p}},{elem:e.inner,props:{trafo:n}}]}return[]},setSlideAnimAlign:function(a,b,c,d){var e={};switch(c){case "left":e.left=0;break;case "right":e.right=0;break;case "center":e.left="50%",e.marginLeft=-.5*b.width+"px"}switch(d){case "top":e.top=0;
break;case "bottom":e.bottom=0;break;case "center":e.top="50%",e.marginTop=-.5*b.height+"px"}Dottoro.SetStyle(this.settings.profile_anim,a,e)},slideChanging:function(a,b,c){Dottoro.RestoreStyle(this.settings.profile_anim,this.slidesInnerWrapper,"marginLeft");if(0>c)this.onChangeEnd();else a=this.needWrapperResize(),(a.horiz&&Math.abs(this.animFromBox.outer.width-this.animTromBox.outer.width)>this.eps||a.vert&&Math.abs(this.animFromBox.outer.height-this.animTromBox.outer.height)>this.eps)&&this.contentSizeChanged(),
a.horiz&&this.slidesOuterWrapper!=this.slidesInnerWrapper&&"center"==Dottoro.GetStyle(this.slidesOuterWrapper,"textAlign")&&Dottoro.CssEx.Center(!0,this.settings.profile_anim,this.slidesInnerWrapper,this.slidesOuterWrapper,"marginLeft")},getNextSlide:function(){return this.slides[this.animToIdx]?this.slides[this.animToIdx]:null},onChangeEnd:function(){Dottoro.RestoreStyle(this.settings.profile_anim,this.slidesHolder);var a=this.slides[this.animFromIdx];Dottoro.RestoreStyle(this.settings.profile_anim,
a.box);Dottoro.RestoreStyle(this.settings.profile_anim,a.inner);a=this.slides[this.animToIdx];Dottoro.RestoreStyle(this.settings.profile_anim,a.box);Dottoro.RestoreStyle(this.settings.profile_anim,a.inner);this.updateSlidesState(this.animFromIdx,this.animToIdx,!1,"show");this.updateSlidesState(this.animFromIdx,this.animToIdx,!1,"active");this.cssEx.EnableElem(this.slides[this.animToIdx].box,!0);delete this.animFromIdx;delete this.animToIdx;this.modifySliderCssClass("",["slide-changing","finite-transition"]);
this.anim=null;this.contentSizeChanged();this.slideChangeFinished();Dottoro.isIEOlder(9)&&(a=this.slidesOuterWrapper.style.display,this.slidesOuterWrapper.style.display="inline-block",this.slidesOuterWrapper.style.display=a)}});
Dottoro.Slide=Dottoro.Section.extend({init:function(a){this.slider=a;this._super();return this},Attach:function(a){this._super(a);Dottoro._setData(a,"slide",this)},CreateCssEx:function(a){return this.cssEx=Dottoro.CssEx.Create(this.elem,this)},Detach:function(){this.cssEx=null;this.elem&&Dottoro._removeData(this.elem,"slide");this._super()}});
(function(){function a(a,d,e){a="scroller"==a?new Dottoro.Slider_Scroller:new Dottoro.Slider_Single;a.SetSettings(d);a.Attach();e=e||"0";b[e]=b[e]||[];b[e].push(a)}Dottoro.RegisterTagParser("slider",function(b,d,e){b=Dottoro.GetNodeSettings(b);a(b.type||"single",b,e)});Dottoro.ContentReady(function(a,d){if(b[d])for(var e=0;e<b[d].length;e++)b[d][e].PostAttach()},15);Dottoro.ContentReady(function(a,d){if(b[d])for(var e=b[d].length-1;0<=e;e--)b[d][e].Connect()},20);Dottoro.ContentReady(function(a,d){var e=
[];if(b[d]){for(var f=0;f<b[d].length;f++)e.push([b[d][f],"Activate"]);delete b[d]}return e},30);var b={};Dottoro.Slider.Build=function(b,d){a(b,d)}})();
Dottoro.ToggleGroups={groups:{},InitGroup:function(a){if(!a)return null;a in this.groups||(this.groups[a]={num:0,toggles:{},open:{},opennum:0,maxopen:1,minopen:1});return this.groups[a]},SetGroupSettings:function(a,b){var c=this.InitGroup(a);if(c)for(var d=["maxopen","minopen"],e=0;e<d.length;e++){var f=d[e];f in b&&(c[f]=b[f])}},Add:function(a,b){var c=this.InitGroup(a);if(!c)return null;var d=""+ ++c.num;c.toggles[d]=b;return{groupId:a,toggleId:d}},Remove:function(a){if(a&&a.groupId){var b=this.groups[a.groupId];
b&&a.toggleId in b.toggles&&(a.toggleId in b.open&&(delete b.open[a.toggleId],b.opennum--),delete b.toggles[a.toggleId])}},NotifyOpen:function(a){if(a){var b=this.groups[a.groupId];if(b&&a.toggleId in b.toggles&&!(a.toggleId in b.open)){b.opennum++;if(b.maxopen>=b.minopen)for(var c in b.open){if(b.opennum<=b.maxopen)break;b.open[c].Close()}b.open[a.toggleId]=b.toggles[a.toggleId]}}},NotifyClose:function(a){if(a){var b=this.groups[a.groupId];b&&a.toggleId in b.toggles&&a.toggleId in b.open&&(delete b.open[a.toggleId],
b.opennum--)}},CanBeClosed:function(a){if(a){var b=this.groups[a.groupId];if(b&&a.toggleId in b.toggles&&a.toggleId in b.open&&b.opennum<=b.minopen)return!1}return!0}};
Dottoro.ConnectedToggles={connects:{},singles:{num:0,toggles:{}},GetMultiToggle:function(a){return a.connectId?this.connects[connectId]:a.toggleId?this.singles.toggles[toggleId]:null},Add:function(a,b,c){if(b){b in this.connects||(this.connects[b]=new Dottoro.MultiToggle);var d=this.connects[b],e=""}else d=new Dottoro.MultiToggle,e=""+ ++this.singles.num,this.singles.toggles[e]=d;return{id:d.Add(a,{connectId:b,toggleId:e},c),toggle:d}},Remove:function(a){a.connectId?this.connects[a.connectId]&&delete this.connects[a.connectId]:
a.toggleId&&this.singles.toggles[a.toggleId]&&delete this.singles.toggles[a.toggleId]}};
Dottoro.MultiToggle=Dottoro.ClassEvents.extend({init:function(){this._super();this.toggles={};this.idx=this.num=0;this.connectPath=this.groupPath="";return this},Add:function(a,b,c){this.num++;var d=""+ ++this.idx;this.toggles[d]=a;this.connectPath=b;this.groupPath||(this.groupPath=Dottoro.ToggleGroups.Add(c,this));return d},Remove:function(a){this.toggles[a]&&(delete this.toggles[a],this.num--,0==this.num&&Dottoro.ConnectedToggles.Remove(this.connectPath))},IsOpen:function(){return this.open},Toggle:function(){this.open?
this.Close():this.Open()},Open:function(){if(!this.open){for(var a in this.toggles)this.toggles[a].startOpen();this.open=!0;Dottoro.ToggleGroups.NotifyOpen(this.groupPath)}},Close:function(){if(this.open&&Dottoro.ToggleGroups.CanBeClosed(this.groupPath)){for(var a in this.toggles)this.toggles[a].startClose();this.open=!1;Dottoro.ToggleGroups.NotifyClose(this.groupPath)}}});
Dottoro.Toggle=Dottoro.ClassEventsSettings.extend({init:function(){this._super();this.eventHandlers=[];this.sectionListeners=[];this.titles=[];this.contents=[];this.initSettings();return this},initSettings:function(){Dottoro.Extend(this.settings,{profile:"toggle",wrapper:null,eventtype:"click",open:"",group:"",anim_duration:450,anim_easing:"swing",anim_props:{},clear_anim_props:"always",section:"_section",section_class:"",close_on_slidechange:!1},{deep:!1})},initToggle:function(){for(var a=0;a<this.contents.length;a++){var b=
this.contents[a];b.section=new Dottoro.ToggleContent;b.section.Attach(b.elem)}},getHolderCssEx:function(a){return(a=Dottoro.CssEx.GetHolderDetails(a))&&!a.hidden?a.cssEx:null},enableElemForCssEx:function(a,b){var c=this.getHolderCssEx(a);c&&c.GetOwner()&&c.EnableElem(a,b)},stateChanged:function(a){this.changeCssClass(a);a={open:"aftershow",closed:"afterhide",opening:"beforeshow",closing:"beforehide"}[a];this.FireEvent(a);for(var b=0;b<this.contents.length;b++)this.contents[b].section.FireEvent(a);
this.notifySection()},parseAnimProps:function(a,b){var c={};null==a?"contents"==b&&(c.height={}):(a=Dottoro.Trim(a),"width"==a||"height"==a?c[a]={}:a&&(c=Dottoro.SplitSettings(a,!0)));return c},addToElems:function(a,b){var c={};Dottoro.ReadNodeSettings(a,c);c.anim_props=this.parseAnimProps(c.anim_props,b);c.clear_anim_props=c.clear_anim_props||"always";"contents"==b&&(c.closed_visible="closed_visible"in c?c.closed_visible:!1,c.cssex_on_anim="cssex_on_anim"in c?c.cssex_on_anim:!1);this[b].push({elem:a,
settings:c})},getAllElems:function(a){for(var b=[],c=0;c<this.titles.length;c++)b.push(this.titles[c].elem);for(c=0;c<this.contents.length;c++)b.push(this.contents[c].elem);a&&(a=this.GetWrapper())&&b.push(a);return b},changeCssClass:function(a){var b={closed:1,opening:1,open:1,closing:1},c="open"==a||"closing"==a?{add:["open"],remove:["closed"]}:{add:["closed"],remove:["open"]},d;for(d in b)c[d==a?"add":"remove"].push("state-"+d);b=this.getAllElems(!0);for(a=0;a<b.length;a++)Dottoro.ModifyCSSClass(b[a],
c.add,c.remove);if(this.settings.section_class&&(b="toggle_"+this.settings.section_class+"_",d=this.GetParentSectionNode())){var e={add:[],remove:[]},f;for(f in e)for(a=0;a<c[f].length;a++)e[f].push(b+c[f][a]);Dottoro.ModifyCSSClass(d,e.add,e.remove)}},SetSetting:function(a,b){var c=a.toLowerCase();if("contentelem"==c||"titleelem"==c)switch(c="contentelem"==c?"contents":"titles",Dottoro.TypeOf(b)){case "string":var d=document.getElementById(b);d&&this.addToElems(d,c);break;case "array":for(var e=
0;e<b.length;e++)(d=document.getElementById(b[e]))&&this.addToElems(d,c);break;case "object":this.addToElems(b,c)}else"anim_props"==c?this.settings.anim_props=this.parseAnimProps(b,"wrapper"):this._super(a,b)},GetParentSection:function(a){var b=this.GetWrapper();!b&&this.titles.length&&(b=this.titles[0].elem);!b&&this.contents.length&&(b=this.contents[0].elem.parentNode);return b&&(a=a?a:Dottoro.Section,a=Dottoro.GetHolderObject(b,a))?a:null},GetParentSectionNode:function(a){var b=this.settings.section;
if(!b)return null;switch(b){case "_html":return document.documentElement;case "_body":return document.body;case "_section":return(a=this.GetParentSection(a))?a.GetSectionNode():document.documentElement;case "_wrapper":return this.GetWrapper()}return Dottoro.GetElement(b)},SetSection:function(a){this.settings.section=a},GetWrapper:function(){return this.settings.wrapper},SetWrapper:function(a){this.settings.wrapper=a},Activate:function(){this.initToggle();this.multi=Dottoro.ConnectedToggles.Add(this,
this.GetSetting("connect"),this.GetSetting("group"));for(var a=this.getAllElems(),b=0;b<a.length;b++)Dottoro._setData(a[b],"toggle",this),Dottoro.ContentRemoved(a[b],[this,"Detach"])},Start:function(){for(var a=0;a<this.titles.length;a++)this.eventHandlers.push(Dottoro.AddListener(this.settings.eventtype,[this,"Toggle"],this.titles[a].elem));this.settings.close_on_slidechange&&(a=this.GetParentSection(Dottoro.Slider))&&a.AddListener&&this.sectionListeners.push(a.AddListener("docommand",[this,"onSliderCommand"]));
this.settings.open?Dottoro.StrToType(this.settings.open,"boolean")?this.multi.toggle.IsOpen()?this.startOpen():this.Open():this.Close():this.multi.toggle.IsOpen()&&this.startOpen()},Deactivate:function(){if(this.multi){this.multi.toggle.Remove(this.multi.id);Dottoro.RemoveListener(this.eventHandlers);if(this.settings.close_on_slidechange){var a=this.GetParentSection(Dottoro.Slider);a&&a.RemoveListener&&a.RemoveListener(this.sectionListeners)}this.eventHandlers=[];this.anim&&(this.anim.Stop(),this.anim=
null);for(a=0;a<this.contents.length;a++)this.contents[a].section.Detach();this.contents=[];this.titles=[]}},Detach:function(){this.Deactivate()},getElemAnimData:function(a,b){var c=Dottoro.Clone(b),d=null,e;for(e in c)if("width"==e||"height"==e){var f=c[e];"from"in f||(f.from=0);"to"in f||(d||(d=Dottoro.GetSize(a,Dottoro.BOX_INNER)),f.to=d[e])}return Dottoro.IsObjEmpty(c)?null:{elem:a,props:c}},getAnimData:function(){var a=[],b=this.GetWrapper();b&&(b=this.getElemAnimData(b,this.settings.anim_props))&&
a.push({item:{elem:b.elem,props:b.props},settings:{clear_anim_props:this.settings.clear_anim_props}});for(var c=0;c<this.titles.length;c++)(b=this.getElemAnimData(this.titles[c].elem,this.titles[c].settings.anim_props))&&a.push({item:{elem:b.elem,props:b.props},settings:this.titles[c].settings});for(c=0;c<this.contents.length;c++)(b=this.getElemAnimData(this.contents[c].elem,this.contents[c].settings.anim_props))&&a.push({item:{elem:b.elem,props:b.props},settings:this.contents[c].settings});return a},
createAnim:function(){if(this.anim&&this.anim.IsRunning())this.anim.Start({back:!this.open}),this.stateChanged(this.open?"opening":"closing");else{if(this.notRestored)for(var a=0;a<this.notRestored.length;a++)Dottoro.RestoreStyle(this.settings.profile,this.notRestored[a]);this.notRestored=[];this.open&&this.changeCssClass("open");this.animData=this.getAnimData();this.stateChanged(this.open?"opening":"closing");for(a=0;a<this.animData.length;a++){var b=this.animData[a].settings;"cssex_on_anim"in b&&
!b.cssex_on_anim&&this.enableElemForCssEx(this.animData[a].item.elem,!1)}b=[];for(a=0;a<this.animData.length;a++)b.push(this.animData[a].item);this.anim=new Dottoro.Anim(b,this.settings.anim_duration,{profile:this.settings.profile,start:this.open?1:-1,callback:[this,"onAnim"],easing:this.settings.anim_easing})}},onAnim:function(a,b,c){if(0>c){for(a=0;a<this.animData.length;a++)if(b=this.animData[a].settings,c=b.clear_anim_props,"always"==c||"open"==c&&this.open||"closed"==c&&!this.open?Dottoro.RestoreStyle(this.settings.profile,
this.animData[a].item.elem):this.notRestored.push(this.animData[a].item.elem),"cssex_on_anim"in b&&!b.cssex_on_anim&&(this.open||b.closed_visible))for(a=0;a<this.contents.length;a++)this.enableElemForCssEx(this.animData[a].item.elem,!0);this.stateChanged(this.open?"open":"closed")}else for(a=0;a<this.animData.length;a++)if(b=this.animData[a].settings,b.cssex_on_anim){this.notifySection();break}},startOpen:function(){this.open||(this.open=!0,this.createAnim())},startClose:function(){this.open&&(this.open=
!1,this.createAnim())},onSliderCommand:function(){this.Close()},notifySection:function(){for(var a=0;a<this.contents.length;a++)this.contents[a].section&&this.contents[a].section.elem&&Dottoro.NotifyParentSection(this.contents[a].section.elem,"contentsizechanged")},Toggle:function(){this.multi&&this.multi.toggle.Toggle()},Open:function(){this.multi&&this.multi.toggle.Open()},Close:function(){this.multi&&this.multi.toggle.Close()}});
Dottoro.ToggleContent=Dottoro.Section.extend({init:function(){this._super();return this},Attach:function(a){this._super(a);Dottoro._setData(a,"togglecontent",this)},Detach:function(){this.elem&&Dottoro._removeData(this.elem,"togglecontent");this._super()}});
(function(){Dottoro.RegisterTagParser("toggle",function(b,c,d){c=new Dottoro.Toggle;b=b.getAttribute("data-dottoro_params");c.ReadSettings(b);c.Activate();a[d]=a[d]||[];a[d].push(c)});Dottoro.RegisterTagParser("toggle_group",function(a){if(a=a.getAttribute("data-dottoro_params"))if(a=Dottoro.SplitSettings(a),"group"in a){var c=a.group;delete a.group;Dottoro.ToggleGroups.SetGroupSettings(c,a)}});Dottoro.ContentReady(function(b,c){if(a[c]){for(var d=0;d<a[c].length;d++)a[c][d].Start();delete a[c]}},
30);var a={}})();
Dottoro.Tooltip=Dottoro.ClassEventsSettings.extend({init:function(){this._super();this.initSettings();this.xmlns="http://www.w3.org/2000/svg";this.tip_arrow=this.tip_content=this.tip_body=this.container=null;this.isVisible=!1;this.boxHeight=this.boxWidth=0;this.ownerEventHandlers=[];this.tipEventHandlers=[];this.timerIDs={};this.dirs={up:["up","down","left","right"],down:["down","up","left","right"],left:["left","right","down","up"],right:["right","left","down","up"]};return this},initSettings:function(){this.settings=
{ownerelem:null,tooltipelem:null,delayhide:0,delayshow:0,direction:"down",hideonmouseout:!0,hideontipmouseout:!0,keepvisibleovertip:!0,offsetvertical:8,offsethorizontal:8,timelimit:5E3,frameclass:""}},SetSettings:function(a){if(a&&a.ownerelem&&"_parent"==a.ownerelem&&a.tooltipelem){var b=Dottoro.GetElement(a.tooltipelem);b&&(a.ownerelem=b.parentNode)}this._super(a)},createContainer:function(){this.ownerDoc=this.settings.tooltipelem.ownerDocument;this.ownerDoc||(this.ownerDoc=document);var a="dottoro_tooltip";
this.settings.frameclass&&(a+=" "+this.settings.frameclass);this.container=Dottoro.CreateElement("div",this.ownerDoc.body,{className:a},{position:"absolute",left:"-10000px",top:"-10000px",width:"100%",height:"100%"});this.tip_body=Dottoro.CreateElement("div",this.container,{className:"dottoro_tooltip_body"});this.tip_content=Dottoro.CreateElement("div",this.tip_body,{className:"dottoro_tooltip_content"});this.tip_arrow=Dottoro.CreateElement("div",this.container,{className:"dottoro_tooltip_arrow"});
this.settings.tooltipelem.style.position="static";this.tip_content.appendChild(this.settings.tooltipelem);this.settings.tooltipelem.style.visibility="visible";this.settings.tooltipelem.style.display="";this.container.style.display="block";Dottoro.ModifyCSSClass(this.container,"dottoro_tooltip_left","");this.hor_arrow_size=Dottoro.GetSize(this.tip_arrow);Dottoro.ModifyCSSClass(this.container,"dottoro_tooltip_up","dottoro_tooltip_left");this.ver_arrow_size=Dottoro.GetSize(this.tip_arrow)},detectDirection:function(){"up"!=
this.settings.direction&&"left"!=this.settings.direction&&"right"!=this.settings.direction&&(this.settings.direction="down");var a=this.dirs[this.settings.direction],b=null,c=Dottoro.FirstElementChild(this.tip_content),d=c.offsetWidth,e=c.style.width;c.style.width="auto";d=c.offsetWidth!=d;c.style.width=e;c=this.tip_body.offsetWidth;this.tip_body.style.maxWidth="none";this.tip_body.offsetWidth>c&&!d&&(this.tip_body.style.width=c+"px",d=!0);d&&(this.tip_body.style.whiteSpace="normal");for(var f=Dottoro.GetClientWinWidth(this.ownerDoc),
g=Dottoro.GetClientWinHeight(this.ownerDoc),h=Dottoro.GetBox(this.settings.ownerelem),c=Dottoro.GetSize(this.tip_body),d=e=-1,k=0;k<a.length&&!b;k++)switch(a[k]){case "up":d=h.top-(this.settings.offsetvertical+c.height+this.ver_arrow_size.height);0<=d&&(b="up");break;case "down":d=h.bottom+this.settings.offsetvertical;g>=d+c.height+this.ver_arrow_size.height&&(b="down");break;case "left":e=h.left-(this.settings.offsethorizontal+c.width+this.hor_arrow_size.width);0<=e&&(b="left");break;case "right":e=
h.right+this.settings.offsethorizontal,f>=e+(c.width+this.hor_arrow_size.width)&&(b="right")}if(!b)return!1;"up"==b||"down"==b?(e=Math.round(h.left+h.width/2-c.width/2),f<e+c.width&&(e=f-c.width),0>e&&(e=0)):(d=Math.round(h.top+h.height/2-c.height/2),g<d+c.height&&(d=g-c.height),0>d&&(d=0));this.container.style.visibility="hidden";this.ownerDoc.body.appendChild(this.container);this.container.style.left=e+"px";this.container.style.top=d+"px";a=Dottoro.GetBox(this.container);a.left!=e&&(this.container.style.left=
e+(e-a.left)+"px");a.top!=d&&(this.container.style.top=d+(d-a.top)+"px");Dottoro.GetBox(this.container);a=["dottoro_tooltip_up","dottoro_tooltip_left","dottoro_tooltip_right","dottoro_tooltip_down"];"left"==b||"right"==b?(this.container.style.width=c.width+this.hor_arrow_size.width-1+"px",this.container.style.height=c.height+"px",Dottoro.ModifyCSSClass(this.container,"",a),"left"==b?Dottoro.ModifyCSSClass(this.container,"dottoro_tooltip_left visible",""):Dottoro.ModifyCSSClass(this.container,"dottoro_tooltip_right visible",
"")):(this.container.style.width=c.width+"px",this.container.style.height=c.height+this.ver_arrow_size.height-1+"px",Dottoro.ModifyCSSClass(this.container,"",a),"up"==b?Dottoro.ModifyCSSClass(this.container,"dottoro_tooltip_up visible",""):Dottoro.ModifyCSSClass(this.container,"dottoro_tooltip_down visible",""));if(Dottoro.isIEOlder(9)){this.container.className+=" ie_xp";try{this.container.filters["DXImageTransform.Microsoft.Fade"]&&(this.container.filters["DXImageTransform.Microsoft.Fade"].apply(),
this.container.filters["DXImageTransform.Microsoft.Fade"].play())}catch(l){}}this.container.style.visibility="visible";this.ownerDoc.body.appendChild(this.container)},onMouseEnter_Owner:function(a){this.overOwner=!0;this.timerIDs.hide&&(clearTimeout(this.timerIDs.hide),delete this.timerIDs.hide);this.isVisible||this.Show()},onMouseLeave_Owner:function(a){this.overOwner=!1;this.delayHide()},onClick_Owner:function(a){this.delayHide()},onMouseEnter_Tip:function(a){this.overTip=!0},onMouseLeave_Tip:function(a){this.overTip=
!1;this.conditionalHide()},delayShow:function(){this.Show()},delayHide:function(){if(this.isVisible&&this.settings.hideonmouseout){var a=this.settings.delayhide;if(0<a){var b=this;this.timerIDs.hide=setTimeout(function(){b.conditionalHide()},a)}else this.conditionalHide()}},conditionalHide:function(){this.overTip&&this.settings.keepvisibleovertip||!this.settings.hideontipmouseout||!this.boring&&this.overOwner||this.Hide()},becameBoring:function(){this.boring=!0;this.overTip&&this.settings.keepvisibleovertip||
this.Hide()},Activate:function(){this.IsActivated()||(this.ownerEventHandlers.push(Dottoro.AddListener("mouseenter",[this,"onMouseEnter_Owner"],this.settings.ownerelem)),this.ownerEventHandlers.push(Dottoro.AddListener("click",[this,"onClick_Owner"],this.settings.ownerelem)),this.ownerEventHandlers.push(Dottoro.AddListener("mouseleave",[this,"onMouseLeave_Owner"],this.settings.ownerelem)))},Deactivate:function(){this.IsActivated()&&(this.Hide(),Dottoro.RemoveListener(this.ownerEventHandlers),this.ownerEventHandlers=
[])},IsActivated:function(){return 0<this.ownerEventHandlers.length},Show:function(){if(this.FireEvent("beforeshow"))return!1;if(!this.settings.tooltipelem){var a=this.settings.ownerelem;if(a&&a.getAttribute){var b=a.getAttribute("title");b&&(a.removeAttribute("title"),a=a.ownerDocument)&&(b=Dottoro.CreateElement("span",a.body,{innerHTML:b}),this.settings.tooltipelem=b)}}if(!this.settings.tooltipelem)return!1;if(this.isVisible)return!0;this.createContainer();this.detectDirection();this.container.display=
"block";this.tipEventHandlers.push(Dottoro.AddListener("mouseenter",[this,"onMouseEnter_Tip"],this.container));this.tipEventHandlers.push(Dottoro.AddListener("mouseleave",[this,"onMouseLeave_Tip"],this.container));this.isVisible=!0;this.boring=this.overTip=!1;if(0<this.settings.timelimit){var c=this;this.timerIDs.boring=setTimeout(function(){c.becameBoring()},this.settings.timelimit)}return this.FireEvent("aftershow")?(this.Hide(),!1):!0},Hide:function(){if(this.isVisible){if(this.FireEvent("beforehide"))return!1;
for(var a in this.timerIDs)clearTimeout(this.timerIDs[a]);this.timerIDs={};Dottoro.RemoveListener(this.tipEventHandlers);this.tipEventHandlers=[];Dottoro.RemoveNode(this.container);this.tip_arrow=this.tip_content=this.tip_body=this.container=null;this.isVisible=!1;this.FireEvent("afterhide")}return!0},IsVisible:function(){return this.isVisible},ReDraw:function(){return this.isVisible?this.Hide()?this.Show():!1:!0},Detach:function(){this.Deactivate()}});
(function(){Dottoro.RegisterTagParser("tooltip",function(a){var b=new Dottoro.Tooltip,c=a.getAttribute("data-dottoro_params");b.ReadSettings(c);c=b.GetSetting("ownerelem");c||(c=a,b.SetSetting("ownerelem",c));b.Activate();Dottoro.ContentRemoved(c,[b,"Detach"])})})();